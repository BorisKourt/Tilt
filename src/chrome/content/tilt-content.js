'use strict';var h=void 0,t=null,TiltChrome=TiltChrome||{};
TiltChrome.BrowserOverlay={href:t,panel:t,canvas:t,s:t,initialize:function(){this.a();this.href===window.content.location.href?this.href=t:window.menubar.Id?window.setTimeout(this.create.bind(this),200):this.create()},create:function(){this.href=window.content.location.href;var a=window.content.innerWidth,b=window.content.innerHeight;A.p.Z=document.getElementById("tilt-panel-iframe").contentDocument;A.p.Q=gBrowser.selectedBrowser.parentNode;this.panel=document.getElementById("tilt-panel");this.canvas=
A.p.da(a,b,!0);this.s=new TiltChrome.bc(this.canvas)},a:function(){A.p.Z=t;A.p.Q=t;if(this.panel!==t)this.panel.hidePopup(),this.panel=t;if(this.s!==t)this.s.a(),this.s=t;if(this.canvas!==t)this.canvas.parentNode.removeChild(this.canvas),this.canvas=t;window.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIDOMWindowUtils).garbageCollect()}};var A=A||{};
A.fb=function(a,b,c){this.Qb=this.Ib=this.Hb=this.W=this.V=0;this.ta=D.create();this.La=D.create();this.ea=D.create();this.Ta=M.create([0,0,0,1]);this.t=M.create([0,0,0,1]);this.Ha=M.create([0,0,0,1]);this.Ia=0;this.Oc(a,b,c)};
A.fb.prototype={loop:function(a){a="undefined"===typeof a?0.25:A.f.Ga(a/100,0.01,0.99);this.Ia+=(this.Qb-this.Ia)*a;this.V+=(this.Hb-this.V)*a;this.W+=(this.Ib-this.W)*a;this.Xa(this.V,this.W,this.width,this.height,this.Ya,this.La);D.ub(this.ta,this.La,this.ea);D.length(this.ea)>0?(this.t[0]=this.ea[0],this.t[1]=this.ea[1],this.t[2]=this.ea[2],this.t[3]=-D.A(this.ta,this.La)):(this.t[0]=0,this.t[1]=0,this.t[2]=0,this.t[3]=1);return{rotation:M.multiply(this.Ta,this.t,this.Ha),zoom:this.Ia}},Ac:function(a,
b){this.V=a;this.W=b;this.Xa(this.V,this.W,this.width,this.height,this.Ya,this.ta);M.set(this.Ha,this.Ta)},zc:function(a,b){this.Hb=a;this.Ib=b},Bc:function(a){this.Qb-=a*10},Xa:function(a,b,c,d,e,f){a=(a-c/2)/e;b=(b-d/2)/e;c=a*a+b*b;d=0;c>1?(d=1/Math.sqrt(c),f[0]=a*d,f[1]=b*d,f[2]=0):(f[0]=a,f[1]=b,f[2]=Math.sqrt(1-c))},Oc:function(a,b,c){this.width=a;this.height=b;this.Ya="undefined"!==typeof c?c:b;this.Xa(this.V,this.W,this.width,this.height,this.Ya,this.ta);M.set(this.Ha,this.Ta)},a:function(){for(var a in this)delete this[a]}};
A=A||{};A.q=function(a,b,c){this.b=t;this.length=this.B=this.qa=0;"undefined"!==typeof a&&this.Ra(a,b,c)};A.q.prototype={Ra:function(a,b,c){"undefined"===typeof c&&(c=a.length/b);var d=new Float32Array(a),e=A.g;this.b=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.b);e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW);this.qa=b;this.B=c;this.length=a.length;b=0;for(c=a.length;b<c;b++)this[b]=a[b]},a:function(){for(var a in this)delete this[a]}};
A.Y=function(a,b){this.b=t;this.B=this.qa=this.length=0;"undefined"!==typeof a&&this.Ra(a,b)};A.Y.prototype={Ra:function(a,b){if("undefined"===typeof b)b=a.length;var c=new Uint16Array(a),d=A.g;this.b=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.b);d.bufferData(d.ELEMENT_ARRAY_BUFFER,c,d.STATIC_DRAW);this.qa=1;this.B=b;this.length=a.length;c=0;for(d=a.length;c<d;c++)this[c]=a[c]},a:function(){for(var a in this)delete this[a]}};A=A||{};A.g=t;A.z=t;A.ya=-1;A.za=-1;A.ha={};
A.sb=function(){A.g=t;A.z=t;A.ya=-1;A.za=-1;A.ha={}};A=A||{};A.Da=function(a,b){this.b=t;this.id=0;this.w=this.attributes=t;this.P={};arguments.length===2&&this.sc(a,b)};
A.Da.prototype={sc:function(a,b){this.b=A.Yb.create(a,b);this.id=this.b.id;this.attributes=this.b.attributes;this.w=this.b.w;delete this.b.id;delete this.b.attributes;delete this.b.w},Wb:function(){if(A.ya!==this.id){A.ya=this.id;var a=A.g;a.useProgram(this.b);if(A.za<this.attributes.length){A.za=this.attributes.length;for(var b in this.attributes)this.attributes.hasOwnProperty(b)&&b!=="length"&&a.enableVertexAttribArray(this.attributes[b])}}},Fa:function(a,b){var c=A.g,d=this.attributes[a],e=b.qa;
c.bindBuffer(c.ARRAY_BUFFER,b.b);c.vertexAttribPointer(d,e,c.FLOAT,!1,0,0)},ja:function(a,b){var c=b[0]+b[1]+b[2]+(b[4]+b[5]+b[6])+(b[8]+b[9]+b[10])+(b[12]+b[13]+b[14]);this.P[a]!==c&&(this.P[a]=c,A.g.uniformMatrix4fv(this.w[a],!1,b))},qb:function(a,b){var c=b[3]*255<<24|b[0]*255<<16|b[1]*255<<8|b[2]*255;this.P[a]!==c&&(this.P[a]=c,A.g.uniform4fv(this.w[a],b))},bindTexture:function(a,b){if(this.P[a]!==b.id){this.P[a]=b.id;var c=A.g;c.bindTexture(c.TEXTURE_2D,b.b);c.uniform1i(this.w[a],0)}},a:function(){for(var a in this)try{"function"===
typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};
A.Yb={create:function(a,b){var c=this.compile(a,"x-shader/x-vertex"),d=this.compile(b,"x-shader/x-fragment");return this.link(c,d)},compile:function(a,b){var c=A.g,d;if("string"!==typeof a||a.length<1)return A.H.error(A.I.get("compileShader.source.error")),t;if(b==="x-shader/x-vertex")d=c.createShader(c.VERTEX_SHADER);else if(b==="x-shader/x-fragment")d=c.createShader(c.FRAGMENT_SHADER);else return A.H.error(A.I.Ma("compileShader.type.error"),[a]),t;c.shaderSource(d,a);c.compileShader(d);d.src=a;
return!c.getShaderParameter(d,c.COMPILE_STATUS)?(c=c.getShaderInfoLog(d),A.H.error(A.I.Ma("compileShader.compile.error"),[c]),t):d},link:function(a,b){var c=A.g,d;d=c.createProgram();c.attachShader(d,a);c.attachShader(d,b);c.linkProgram(d);if(!c.getProgramParameter(d,c.LINK_STATUS))return d=c.getProgramInfoLog(d),A.H.error(A.I.Ma("linkProgram.error",[d])),t;d.id=++this.count;c=[a.src,b.src].join(" ").replace(/#.*|[(){};,]/g," ").split(" ");return this.Vc(d,c)},Tc:function(a,b){return A.g.getAttribLocation(a,
b)},Wc:function(a,b){return A.g.getUniformLocation(a,b)},Uc:function(a,b){if("string"===typeof b){if(b.length<1)return t;var c;return(c=this.Tc(a,b))>=0?c:this.Wc(a,b)}return t},Vc:function(a,b){var c,d,e,f;a.attributes={};a.attributes.length=0;a.w={};c=0;for(d=b.length;c<d;c++)e=b[c],f=this.Uc(a,e),"number"===typeof f&&"undefined"===typeof a.attributes[e]&&(a.attributes[e]=f,a.attributes.length++),"object"===typeof f&&f instanceof WebGLUniformLocation&&"undefined"===typeof a.w[e]&&(a.w[e]=f);return a},
count:0};A=A||{};A.J=function(a,b,c){this.b=t;this.id=0;this.height=this.width=-1;this.loaded=!1;this.onload=c;"object"===typeof a?this.Ab(a,b):"string"===typeof a?this.tc(a,b):A.H.error(A.I.get("initTexture.source.error"))};
A.J.prototype={Ab:function(a,b){this.b=A.pb.create(a,b);this.id=this.b.id;this.width=this.b.width;this.height=this.b.height;this.loaded=!0;if("undefined"!==typeof this.onload)this.onload();delete this.b.id;delete this.b.width;delete this.b.height;delete this.onload},tc:function(a,b){var c=this,d=new Image;d.src=a;d.onload=function(){c.Ab(d,b);b=d=c=t}},a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};
A.pb={create:function(a,b){b=b||{};if("undefined"!==typeof A.ha[a.src])return A.ha[a.src];var c=A.g,d=A.pb.Pc(a,b),e=a.width,f=a.height,g=c.createTexture();c.bindTexture(c.TEXTURE_2D,g);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,d);g.width=e;g.height=f;g.id=++this.count;this.Sc(b);c.bindTexture(c.TEXTURE_2D,t);"undefined"!==typeof a.src&&(A.ha[a.src]=g);return g},Sc:function(a){var b=A.g,c=b.TEXTURE_MIN_FILTER,d=b.TEXTURE_MAG_FILTER,e=b.TEXTURE_WRAP_S,f=b.TEXTURE_WRAP_T,a=a||{};a.M&&
b.bindTexture(b.TEXTURE_2D,a.M.b);"nearest"===a.Fb?b.texParameteri(b.TEXTURE_2D,c,b.NEAREST):"linear"===a.Fb&&a.Gb?b.texParameteri(b.TEXTURE_2D,c,b.LINEAR_MIPMAP_LINEAR):b.texParameteri(b.TEXTURE_2D,c,b.LINEAR);"nearest"===a.Db?b.texParameteri(b.TEXTURE_2D,d,b.NEAREST):"linear"===a.Db&&a.Gb?b.texParameteri(b.TEXTURE_2D,d,b.LINEAR_MIPMAP_LINEAR):b.texParameteri(b.TEXTURE_2D,d,b.LINEAR);"repeat"===a.Kd?b.texParameteri(b.TEXTURE_2D,e,b.REPEAT):b.texParameteri(b.TEXTURE_2D,e,b.CLAMP_TO_EDGE);"repeat"===
a.Ld?b.texParameteri(b.TEXTURE_2D,f,b.REPEAT):b.texParameteri(b.TEXTURE_2D,f,b.CLAMP_TO_EDGE);a.Gb&&b.generateMipmap(b.TEXTURE_2D)},Pc:function(a,b){var c=(a.src||"").indexOf("chrome://"),d=A.f.Bb(a.height);if(A.f.Bb(a.width)&&d&&c===-1)try{return a}finally{b=a=t}b=b||{};c=A.p.da(A.f.Jb(a.width),A.f.Jb(a.height));d=c.getContext("2d");if(b.fill)d.fillStyle=b.fill,d.fillRect(0,0,c.width,c.height);d.drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);if(b.stroke)d.strokeStyle=b.stroke,d.lineWidth=
b.ua,d.strokeRect(0,0,c.width,c.height);return c},Dd:function(a){A.g.pixelStorei(A.g.UNPACK_FLIP_Y_WEBGL,a)},count:0};A=A||{};A.Ba=function(a,b,c,d){this.x=a||0;this.y=b||0;this.width=c.width;this.height=c.height;this.L=c;this.G=[this.x,this.y,this.width,this.height];if("function"===typeof d)this.onclick=d};
A.Ba.prototype={update:function(){var a=this.L,b=this.G,c=this.x,d=this.y,e=this.width,f=this.height;b[0]=c;b[1]=d;b[2]=e;b[3]=f;a.x=c;a.y=d;a.width=e;a.height=f},l:function(a){a=a||A.z;this.L.l(a)},a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};A.mb=function(a,b){this.color=a;this.L=b;this.G=[b.x,b.y,b.width,b.height]};
A.mb.prototype={update:function(){var a=this.L,b=this.G,c=a.G;a.update();b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3]},l:function(a){a=a||A.z;a.fill(this.color);a.Ec();a.rect(0,0,a.width,a.height);this.L.l(a)},a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};
A.ia=function(a,b,c,d,e,f){this.M=a;this.region=b||[0,0,a.width,a.height];this.x=c||0;this.y=d||0;this.width=e||this.region[2];this.height=f||this.region[3];this.G=[this.x,this.y,this.width,this.height];this.Aa=t};
A.ia.prototype={update:function(){var a=this.G,b=this.y,c=this.width,d=this.height;a[0]=this.x;a[1]=b;a[2]=c;a[3]=d},l:function(a){a=a||A.z;if(this.Aa===t&&this.M.loaded){var b=this.region,c=this.M;this.Aa=new A.q([b[0]/c.width,b[1]/c.height,(b[0]+b[2])/c.width,b[1]/c.height,b[0]/c.width,(b[1]+b[3])/c.height,(b[0]+b[2])/c.width,(b[1]+b[3])/c.height],2)}a.xb(this.M,this.x,this.y,this.width,this.height,this.Aa)},a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};
A=A||{};A.lb=function(){this.elements=[]};
A.lb.prototype={push:function(){for(var a=0,b=arguments.length;a<b;a++)this.elements.push(arguments[a])},remove:function(){for(var a=0,b=arguments.length,c=-1;a<b;a++)(c=this.elements.indexOf(arguments[a]))!==-1&&this.elements.splice(c,1)},l:function(){var a=A.z,b=this.elements,c,d,e;a.Wa();a.origin();a.vb();d=0;for(e=b.length;d<e;d++)c=b[d],c.update(),c.Oa||c.l(a)},click:function(a,b){var c=this.elements,d,e,f,g,j,i,l;i=0;for(l=c.length;i<l;i++)if(d=c[i],e=d.G||[-1,-1,-1,-1],f=e[0],g=e[1],j=e[2],
e=e[3],a>f&&a<f+j&&b>g&&b<g+e&&"function"===typeof d.onclick)d.onclick(a,b)},S:function(){},a:function(){for(var a in this.elements)try{"function"===typeof this.elements[a].a&&this.elements[a].a()}catch(b){}finally{delete this.elements[a]}for(var c in this)try{"function"===typeof this[c].a&&this[c].a()}catch(d){}finally{delete this[c]}}};
function aa(a){var b={indent_size:2,indent_char:" ",max_char:78,brace_style:"collapse"},c,d,e,b=b||{};c=b.ca||2;d=b.yb||" ";e=b.ka||"collapse";b=new function(){this.i=0;this.Hd="";this.R="CONTENT";this.c={parent:"parent1",xd:1,wd:""};this.N=this.Cb=this.wc=this.wa=this.r="";this.m={xa:"\n\r\t ".split(""),Xc:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),ic:"head,body,/html".split(","),U:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;
return!1}};this.mc=function(){for(var a="",b=[],c=!1;this.input.charAt(this.i)!=="<";){if(this.i>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.i);this.i++;this.k++;if(this.m.U(a,this.m.xa))b.length&&(c=!0),this.k--;else{if(c){if(this.k>=this.Eb){b.push("\n");for(c=0;c<this.u;c++)b.push(this.oa);this.k=0}else b.push(" "),this.k++;c=!1}b.push(a)}}return b.length?b.join(""):""};this.nc=function(){var a="",b=[],a=/<\/script>/igm;a.lastIndex=this.i;for(var c=(a=a.exec(this.input))?
a.index:this.input.length;this.i<c;){if(this.i>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.i);this.i++;b.push(a)}return b.length?b.join(""):""};this.Za=function(a){this.c[a+"count"]?this.c[a+"count"]++:this.c[a+"count"]=1;this.c[a+this.c[a+"count"]]=this.u;this.c[a+this.c[a+"count"]+"parent"]=this.c.parent;this.c.parent=a+this.c[a+"count"]};this.Qc=function(a){if(this.c[a+"count"]){for(var b=this.c.parent;b;){if(a+this.c[a+"count"]===b)break;b=this.c[b+"parent"]}if(b)this.u=
this.c[a+this.c[a+"count"]],this.c.parent=this.c[b+"parent"];delete this.c[a+this.c[a+"count"]+"parent"];delete this.c[a+this.c[a+"count"]];this.c[a+"count"]==1?delete this.c[a+"count"]:this.c[a+"count"]--}};this.oc=function(){var a="",b=[],c=!1;do{if(this.i>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.i);this.i++;this.k++;if(this.m.U(a,this.m.xa))c=!0,this.k--;else{if(a==="'"||a==='"')if(!b[1]||b[1]!=="!")a+=this.aa(a),c=!0;a==="="&&(c=!1);if(b.length&&b[b.length-
1]!=="="&&a!==">"&&c)this.k>=this.Eb?(this.X(!1,b),this.k=0):(b.push(" "),this.k++),c=!1;b.push(a)}}while(a!==">");a=b.join("");c=a.substring(1,a.indexOf(" ")!=-1?a.indexOf(" "):a.indexOf(">")).toLowerCase();a.charAt(a.length-2)==="/"||this.m.U(c,this.m.Xc)?this.r="SINGLE":c==="script"?(this.Za(c),this.r="SCRIPT"):c==="style"?(this.Za(c),this.r="STYLE"):c==="a"?(a=this.aa("</a>",a),b.push(a),this.r="SINGLE"):c.charAt(0)==="!"?c.indexOf("[if")!=-1?(a.indexOf("!IE")!=-1&&(a=this.aa("--\>",a),b.push(a)),
this.r="START"):c.indexOf("[endif")!=-1?(this.r="END",this.dd()):(a=c.indexOf("[cdata[")!=-1?this.aa("]]\>",a):this.aa("--\>",a),b.push(a),this.r="SINGLE"):(c.charAt(0)==="/"?(this.Qc(c.substring(1)),this.r="END"):(this.Za(c),this.r="START"),this.m.U(c,this.m.ic)&&this.X(!0,this.K));return b.join("")};this.aa=function(a,b){if(b&&b.indexOf(a)!=-1)return"";var c="",d="",e=!0;do{if(this.i>=this.input.length)break;c=this.input.charAt(this.i);this.i++;if(this.m.U(c,this.m.xa)){if(!e){this.k--;continue}if(c===
"\n"||c==="\r"){d+="\n";for(c=0;c<this.u;c++)d+=this.oa;e=!1;this.k=0;continue}}d+=c;this.k++;e=!0}while(d.indexOf(a)==-1);return d};this.pc=function(){var a;if(this.Cb==="TK_TAG_SCRIPT"){a=this.nc();if(typeof a!=="string")return a;a=da(a,{indent_size:this.ca,indent_char:this.zb,indent_level:this.u,brace_style:this.ka});return[a.replace(/^[\t ]+/,""),"TK_CONTENT"]}if(this.R==="CONTENT")return a=this.mc(),typeof a!=="string"?a:[a,"TK_CONTENT"];if(this.R==="TAG")return a=this.oc(),typeof a!=="string"?
a:[a,"TK_TAG_"+this.r]};this.Ic=function(a,b,c,d){this.input=a||"";this.K=[];this.zb=b;this.oa="";this.ca=c;this.ka=d;this.u=0;this.Eb=80;for(a=this.k=0;a<this.ca;a++)this.oa+=this.zb;this.X=function(a,b){this.k=0;if(b&&b.length){if(!a)for(;this.m.U(b[b.length-1],this.m.xa);)b.pop();b.push("\n");for(var c=0;c<this.u;c++)b.push(this.oa)}};this.sa=function(a){this.K.push(a)};this.qc=function(){this.u++};this.dd=function(){this.u>0&&this.u--}};return this};for(b.Ic(a,d,c,e);;){a=b.pc();b.N=a[0];b.wa=
a[1];if(b.wa==="TK_EOF")break;switch(b.wa){case "TK_TAG_START":case "TK_TAG_SCRIPT":case "TK_TAG_STYLE":b.X(!1,b.K);b.sa(b.N);b.qc();b.R="CONTENT";break;case "TK_TAG_END":b.X(!0,b.K);b.sa(b.N);b.R="CONTENT";break;case "TK_TAG_SINGLE":b.X(!1,b.K);b.sa(b.N);b.R="CONTENT";break;case "TK_CONTENT":b.N!==""&&(b.X(!1,b.K),b.sa(b.N)),b.R="TAG"}b.Cb=b.wa;b.wc=b.N}return b.K.join("")}
function da(a,b){function c(a){for(a=typeof a==="undefined"?!1:a;s.length&&(s[s.length-1]===" "||s[s.length-1]===G||s[s.length-1]===W||a&&(s[s.length-1]==="\n"||s[s.length-1]==="\r"));)s.pop()}function d(a){return a.replace(/^\s\s*|\s\s*$/,"")}function e(){var a=N;N=!1;f();N=a}function f(a){k.ma=!1;if(!N||!n(k.mode))if(a=typeof a==="undefined"?!0:a,k.T=!1,c(),s.length){if(s[s.length-1]!=="\n"||!a)Q=!0,s.push("\n");W&&s.push(W);for(a=0;a<k.v;a+=1)s.push(G);k.o&&k.D&&(ba===" "?s.push("    "):s.push(G))}}
function g(){if(k.ma)k.ma=!1;else{var a=" ";s.length&&(a=s[s.length-1]);a!==" "&&a!=="\n"&&a!==G&&s.push(" ")}}function j(){Q=!1;k.ma=!1;s.push(y)}function i(){s.length&&s[s.length-1]===G&&s.pop()}function l(a){k&&H.push(k);k={Hc:k?k.mode:"BLOCK",mode:a,o:!1,F:!1,D:!1,Qa:!1,T:!1,Pa:!1,ma:!1,pa:-1,v:k?k.v+(k.o&&k.D?1:0):0,bb:0}}function n(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"}function v(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"||a==="(EXPRESSION)"}function q(){Y=
k.mode==="DO_BLOCK";H.length>0&&(k=H.pop())}function r(a){for(var b=0;b<a.length;b++)if(d(a[b])[0]!="*")return!1;return!0}function m(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function z(){O=0;if(o>=I)return["","TK_EOF"];U=!1;var a=u.charAt(o);o+=1;if(N&&n(k.mode)){for(var b=0;m(a,J);){a==="\n"?(c(),s.push("\n"),Q=!0,b=0):a==="\t"?b+=4:a!=="\r"&&(b+=1);if(o>=I)return["","TK_EOF"];a=u.charAt(o);o+=1}if(k.pa===-1)k.pa=b;if(Q){var e;for(e=0;e<k.v+1;e+=1)s.push(G);if(k.pa!==-1)for(e=
0;e<b-k.pa;e++)s.push(" ")}}else{for(;m(a,J);){a==="\n"&&(O+=ca?O<=ca?1:0:1);if(o>=I)return["","TK_EOF"];a=u.charAt(o);o+=1}if($&&O>1)for(e=0;e<O;e+=1)f(e===0),Q=!0;U=O>0}if(m(a,K)){if(o<I)for(;m(u.charAt(o),K);)if(a+=u.charAt(o),o+=1,o===I)break;if(o!==I&&a.match(/^[0-9]+[Ee]$/)&&(u.charAt(o)==="-"||u.charAt(o)==="+"))return b=u.charAt(o),o+=1,e=z(),a+=b+e[0],[a,"TK_WORD"];if(a==="in")return[a,"TK_OPERATOR"];U&&x!=="TK_OPERATOR"&&x!=="TK_EQUALS"&&!k.T&&($||w!=="var")&&f();return[a,"TK_WORD"]}if(a===
"("||a==="[")return[a,"TK_START_EXPR"];if(a===")"||a==="]")return[a,"TK_END_EXPR"];if(a==="{")return[a,"TK_START_BLOCK"];if(a==="}")return[a,"TK_END_BLOCK"];if(a===";")return[a,"TK_SEMICOLON"];if(a==="/"){b="";e=!0;if(u.charAt(o)==="*"){o+=1;if(o<I)for(;!(u.charAt(o)==="*"&&u.charAt(o+1)&&u.charAt(o+1)==="/")&&o<I;){a=u.charAt(o);b+=a;if(a==="\r"||a==="\n")e=!1;o+=1;if(o>=I)break}o+=2;return e?["/*"+b+"*/","TK_INLINE_COMMENT"]:["/*"+b+"*/","TK_BLOCK_COMMENT"]}if(u.charAt(o)==="/"){for(b=a;u.charAt(o)!==
"\r"&&u.charAt(o)!=="\n";)if(b+=u.charAt(o),o+=1,o>=I)break;o+=1;U&&f();return[b,"TK_COMMENT"]}}if(a==="'"||a==='"'||a==="/"&&(x==="TK_WORD"&&m(w,["return","do"])||x==="TK_COMMENT"||x==="TK_START_EXPR"||x==="TK_START_BLOCK"||x==="TK_END_BLOCK"||x==="TK_OPERATOR"||x==="TK_EQUALS"||x==="TK_EOF"||x==="TK_SEMICOLON")){b=a;e=!1;var g=a;if(o<I)if(b==="/")for(a=!1;e||a||u.charAt(o)!==b;){if(g+=u.charAt(o),e?e=!1:(e=u.charAt(o)==="\\",u.charAt(o)==="["?a=!0:u.charAt(o)==="]"&&(a=!1)),o+=1,o>=I)return[g,"TK_STRING"]}else for(;e||
u.charAt(o)!==b;)if(g+=u.charAt(o),e=e?!1:u.charAt(o)==="\\",o+=1,o>=I)return[g,"TK_STRING"];o+=1;g+=b;if(b==="/")for(;o<I&&m(u.charAt(o),K);)g+=u.charAt(o),o+=1;return[g,"TK_STRING"]}if(a==="#"){if(s.length===0&&u.charAt(o)==="!"){for(g=a;o<I&&a!="\n";)a=u.charAt(o),g+=a,o+=1;s.push(d(g)+"\n");f();return z()}b="#";if(o<I&&m(u.charAt(o),R)){do a=u.charAt(o),b+=a,o+=1;while(o<I&&a!=="#"&&a!=="=");a!=="#"&&(u.charAt(o)==="["&&u.charAt(o+1)==="]"?(b+="[]",o+=2):u.charAt(o)==="{"&&u.charAt(o+1)==="}"&&
(b+="{}",o+=2));return[b,"TK_WORD"]}}if(a==="<"&&u.substring(o-1,o+3)==="<\!--")return o+=3,k.Qa=!0,["<\!--","TK_COMMENT"];if(a==="-"&&k.Qa&&u.substring(o-1,o+2)==="--\>")return k.Qa=!1,o+=2,U&&f(),["--\>","TK_COMMENT"];if(m(a,L)){for(;o<I&&m(a+u.charAt(o),L);)if(a+=u.charAt(o),o+=1,o>=I)break;return a==="="?[a,"TK_EQUALS"]:[a,"TK_OPERATOR"]}return[a,"TK_UNKNOWN"]}var u,s,y,x,w,B,C,k,H,G,J,K,L,o,F,R,E,S,Y,U,Q,O,W="",b=b?b:{},P;if(b.Yc!==h&&b.Sa===h)b.Sa=b.Yc;b.ec!==h&&(P=b.ec?"expand":"collapse");
P=b.ka?b.ka:P?P:"collapse";C=b.ca?b.ca:2;var ba=b.yb?b.yb:" ",$=typeof b.Gc==="undefined"?!0:b.Gc,ca=typeof b.yc==="undefined"?!1:b.yc,ea=b.Sa==="undefined"?!1:b.Sa,N=typeof b.vc==="undefined"?!1:b.vc;Q=!1;var I=a.length;for(G="";C>0;)G+=ba,C-=1;for(;a&&(a[0]===" "||a[0]==="\t");)W+=a[0],a=a.substring(1);u=a;C="";x="TK_START_EXPR";B=w="";s=[];Y=!1;J="\n\r\t ".split("");K="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");R="0123456789".split("");L="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(" ");
F="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(",");H=[];l("BLOCK");for(o=0;;){S=z();y=S[0];S=S[1];if(S==="TK_EOF")break;switch(S){case "TK_START_EXPR":if(y==="["){if(x==="TK_WORD"||w===")"){m(w,F)&&g();l("(EXPRESSION)");j();break}if(k.mode==="[EXPRESSION]"||k.mode==="[INDENTED-EXPRESSION]")if(B==="]"&&w===","){if(k.mode==="[EXPRESSION]")k.mode="[INDENTED-EXPRESSION]",N||(k.v+=1);l("[EXPRESSION]");N||f()}else if(w==="["){if(k.mode==="[EXPRESSION]")k.mode="[INDENTED-EXPRESSION]",
N||(k.v+=1);l("[EXPRESSION]");N||f()}else l("[EXPRESSION]");else l("[EXPRESSION]")}else l("(EXPRESSION)");w===";"||x==="TK_START_BLOCK"?f():x==="TK_END_EXPR"||x==="TK_START_EXPR"||x==="TK_END_BLOCK"||w==="."||(x!=="TK_WORD"&&x!=="TK_OPERATOR"?g():C==="function"||C==="typeof"?ea&&g():(m(w,F)||w==="catch")&&g());j();break;case "TK_END_EXPR":if(y==="]")if(N){if(w==="}"){i();j();q();break}}else if(k.mode==="[INDENTED-EXPRESSION]"&&w==="]"){q();f();j();break}q();j();break;case "TK_START_BLOCK":C==="do"?
l("DO_BLOCK"):l("BLOCK");P=="expand"?(x!=="TK_OPERATOR"&&(w==="return"||w==="="?g():f(!0)),j(),k.v+=1):(x!=="TK_OPERATOR"&&x!=="TK_START_EXPR"?x==="TK_START_BLOCK"?f():g():n(k.Hc)&&w===","&&(B==="}"?g():f()),k.v+=1,j());break;case "TK_END_BLOCK":q();P=="expand"?w!=="{"&&f():x==="TK_START_BLOCK"?Q?i():c():n(k.mode)&&N?(N=!1,f(),N=!0):f();j();break;case "TK_WORD":if(Y){g();j();g();Y=!1;break}if(y==="function"){if(k.o)k.D=!0;if((Q||w===";")&&w!=="{"){O=Q?O:0;$||(O=1);for(E=0;E<2-O;E++)f(!1)}}if(y===
"case"||y==="default"){w===":"?i():(k.v--,f(),k.v++);j();k.Pa=!0;break}E="NONE";x==="TK_END_BLOCK"?m(y.toLowerCase(),["else","catch","finally"])?P=="expand"||P=="end-expand"?E="NEWLINE":(E="SPACE",g()):E="NEWLINE":x==="TK_SEMICOLON"&&(k.mode==="BLOCK"||k.mode==="DO_BLOCK")?E="NEWLINE":x==="TK_SEMICOLON"&&v(k.mode)?E="SPACE":x==="TK_STRING"?E="NEWLINE":x==="TK_WORD"?(w==="else"&&c(!0),E="SPACE"):x==="TK_START_BLOCK"?E="NEWLINE":x==="TK_END_EXPR"&&(g(),E="NEWLINE");m(y,F)&&w!==")"&&(E=w=="else"?"SPACE":
"NEWLINE");if(k.T&&x==="TK_END_EXPR")k.T=!1;if(m(y.toLowerCase(),["else","catch","finally"]))x!=="TK_END_BLOCK"||P=="expand"||P=="end-expand"?f():(c(!0),g());else if(E==="NEWLINE"){if(!((x==="TK_START_EXPR"||w==="="||w===",")&&y==="function"))if(y==="function"&&w=="new")g();else if(w==="return"||w==="throw")g();else if(x!=="TK_END_EXPR"){if((x!=="TK_START_EXPR"||y!=="var")&&w!==":")y==="if"&&C==="else"&&w!=="{"?g():(k.o=!1,k.D=!1,f())}else if(m(y,F)&&w!=")")k.o=!1,k.D=!1,f()}else n(k.mode)&&w===","&&
B==="}"?f():E==="SPACE"&&g();j();C=y;if(y==="var")k.o=!0,k.D=!1,k.F=!1;if(y==="if")k.T=!0;if(y==="else")k.T=!1;break;case "TK_SEMICOLON":j();k.o=!1;k.D=!1;if(k.mode=="OBJECT")k.mode="BLOCK";break;case "TK_STRING":x==="TK_START_BLOCK"||x==="TK_END_BLOCK"||x==="TK_SEMICOLON"?f():x==="TK_WORD"&&g();j();break;case "TK_EQUALS":if(k.o)k.F=!0;g();j();g();break;case "TK_OPERATOR":E=B=!0;if(k.o&&y===","&&v(k.mode))k.F=!1;if(k.o&&y===",")if(k.F){j();k.D=!0;k.F=!1;f();break}else k.F=!1;if(w==="return"||w===
"throw"){g();j();break}if(y===":"&&k.Pa){j();f();k.Pa=!1;break}if(y==="::"){j();break}if(y===","){k.o?k.F?(j(),f(),k.F=!1):(j(),g()):x==="TK_END_BLOCK"&&k.mode!=="(EXPRESSION)"?(j(),k.mode==="OBJECT"&&w==="}"?f():g()):k.mode==="OBJECT"?(j(),f()):(j(),g());break}else m(y,["--","++","!"])||m(y,["-","+"])&&(m(x,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||m(w,F))?(E=B=!1,w===";"&&v(k.mode)&&(B=!0),x==="TK_WORD"&&m(w,F)&&(B=!0),k.mode==="BLOCK"&&(w==="{"||w===";")&&f()):y==="."?B=!1:
y===":"?k.bb==0?(k.mode="OBJECT",B=!1):k.bb-=1:y==="?"&&(k.bb+=1);B&&g();j();E&&g();break;case "TK_BLOCK_COMMENT":B=y.split(/\x0a|\x0d\x0a/);if(r(B.slice(1))){f();s.push(B[0]);for(E=1;E<B.length;E++)f(),s.push(" "),s.push(d(B[E]))}else{B.length>1?(f(),c()):g();for(E=0;E<B.length;E++)s.push(B[E]),s.push("\n")}f();break;case "TK_INLINE_COMMENT":g();j();v(k.mode)?g():e();break;case "TK_COMMENT":U?f():g();j();e();break;case "TK_UNKNOWN":(w==="return"||w==="throw")&&g(),j()}B=w;x=S;w=y}return W+s.join("").replace(/[\n ]+$/,
"")}if(typeof exports!=="undefined")exports.pd=da;var T,D,V,X,M;T=typeof Float32Array!="undefined"?Float32Array:typeof WebGLFloatArray!="undefined"?WebGLFloatArray:Array;
D={create:function(a){var b=new T(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},add:function(a,b,c){if(!c||a==c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},ga:function(a,b,c){if(!c||a==c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},ud:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a==c)return a[0]*=
b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(f){if(f==1)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return b},ub:function(a,b,c){c||(c=a);var d=a[0],e=a[1],a=a[2],f=b[0],g=b[1],b=b[2];c[0]=e*b-a*g;c[1]=a*f-d*b;c[2]=d*g-e*f;return c},length:function(a){var b=a[0],c=a[1],a=a[2];return Math.sqrt(b*b+c*c+a*a)},A:function(a,b){return a[0]*b[0]+
a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1],a=a[2]-b[2],b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c},qd:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},ab:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"}};
V={create:function(a){var b=new T(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},ba:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},bd:function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];
b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},Ub:function(a,b){b||(b=X.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},ab:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}};
X={create:function(a){var b=new T(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},ba:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},bd:function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],j=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=f;a[11]=a[14];a[12]=e;a[13]=g;a[14]=j;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},kd:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],
j=a[6],i=a[7],l=a[8],n=a[9],v=a[10],q=a[11],r=a[12],m=a[13],z=a[14],a=a[15];return r*n*j*e-l*m*j*e-r*g*v*e+f*m*v*e+l*g*z*e-f*n*z*e-r*n*d*i+l*m*d*i+r*c*v*i-b*m*v*i-l*c*z*i+b*n*z*i+r*g*d*q-f*m*d*q-r*c*j*q+b*m*j*q+f*c*z*q-b*g*z*q-l*g*d*a+f*n*d*a+l*c*j*a-b*n*j*a-f*c*v*a+b*g*v*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],j=a[5],i=a[6],l=a[7],n=a[8],v=a[9],q=a[10],r=a[11],m=a[12],z=a[13],u=a[14],s=a[15],y=c*j-d*g,x=c*i-e*g,w=c*l-f*g,B=d*i-e*j,C=d*l-f*j,k=e*l-f*i,H=n*z-v*m,G=
n*u-q*m,J=n*s-r*m,K=v*u-q*z,L=v*s-r*z,o=q*s-r*u,F=1/(y*o-x*L+w*K+B*J-C*G+k*H);b[0]=(j*o-i*L+l*K)*F;b[1]=(-d*o+e*L-f*K)*F;b[2]=(z*k-u*C+s*B)*F;b[3]=(-v*k+q*C-r*B)*F;b[4]=(-g*o+i*J-l*G)*F;b[5]=(c*o-e*J+f*G)*F;b[6]=(-m*k+u*w-s*x)*F;b[7]=(n*k-q*w+r*x)*F;b[8]=(g*L-j*J+l*H)*F;b[9]=(-c*L+d*J-f*H)*F;b[10]=(m*C-z*w+s*y)*F;b[11]=(-n*C+v*w-r*y)*F;b[12]=(-g*K+j*G-i*H)*F;b[13]=(c*K-d*G+e*H)*F;b[14]=(-m*B+z*x-u*y)*F;b[15]=(n*B-v*x+q*y)*F;return b}};
X.Gd=function(a,b){b||(b=X.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};X.ad=function(a,b){b||(b=V.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};
X.Fd=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],j=a[6],i=a[8],l=a[9],n=a[10],v=n*g-j*l,q=-n*f+j*i,r=l*f-g*i,m=c*v+d*q+e*r;if(!m)return t;m=1/m;b||(b=V.create());b[0]=v*m;b[1]=(-n*d+e*l)*m;b[2]=(j*d-e*g)*m;b[3]=q*m;b[4]=(n*c-e*i)*m;b[5]=(-j*c+e*f)*m;b[6]=r*m;b[7]=(-l*c+d*i)*m;b[8]=(g*c-d*f)*m;return b};
X.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],j=a[4],i=a[5],l=a[6],n=a[7],v=a[8],q=a[9],r=a[10],m=a[11],z=a[12],u=a[13],s=a[14],a=a[15],y=b[0],x=b[1],w=b[2],B=b[3],C=b[4],k=b[5],H=b[6],G=b[7],J=b[8],K=b[9],L=b[10],o=b[11],F=b[12],R=b[13],E=b[14],b=b[15];c[0]=y*d+x*j+w*v+B*z;c[1]=y*e+x*i+w*q+B*u;c[2]=y*f+x*l+w*r+B*s;c[3]=y*g+x*n+w*m+B*a;c[4]=C*d+k*j+H*v+G*z;c[5]=C*e+k*i+H*q+G*u;c[6]=C*f+k*l+H*r+G*s;c[7]=C*g+k*n+H*m+G*a;c[8]=J*d+K*j+L*v+o*z;c[9]=J*e+K*i+L*q+o*u;c[10]=J*f+K*l+L*
r+o*s;c[11]=J*g+K*n+L*m+o*a;c[12]=F*d+R*j+E*v+b*z;c[13]=F*e+R*i+E*q+b*u;c[14]=F*f+R*l+E*r+b*s;c[15]=F*g+R*n+E*m+b*a;return c};X.Cc=function(a,b,c){c||(c=b);var d=b[0],e=b[1],b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c};X.Dc=function(a,b){var c;c||(c=b);var d=b[0],e=b[1],f=b[2],g=b[3];c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*g;c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*g;c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*g;c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*g};
X.translate=function(a,b,c){var d=b[0],e=b[1],b=b[2];if(!c||a==c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;var f=a[0],g=a[1],j=a[2],i=a[3],l=a[4],n=a[5],v=a[6],q=a[7],r=a[8],m=a[9],z=a[10],u=a[11];c[0]=f;c[1]=g;c[2]=j;c[3]=i;c[4]=l;c[5]=n;c[6]=v;c[7]=q;c[8]=r;c[9]=m;c[10]=z;c[11]=u;c[12]=f*d+l*e+r*b+a[12];c[13]=g*d+n*e+m*b+a[13];c[14]=j*d+v*e+z*b+a[14];c[15]=i*d+q*e+u*b+a[15];return c};
X.scale=function(a,b,c){var d=b[0],e=b[1],b=b[2];if(!c||a==c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};
X.rotate=function(a,b,c,d){var e=c[0],f=c[1],c=c[2],g=Math.sqrt(e*e+f*f+c*c);if(!g)return t;g!=1&&(g=1/g,e*=g,f*=g,c*=g);var j=Math.sin(b),i=Math.cos(b),l=1-i,b=a[0],g=a[1],n=a[2],v=a[3],q=a[4],r=a[5],m=a[6],z=a[7],u=a[8],s=a[9],y=a[10],x=a[11],w=e*e*l+i,B=f*e*l+c*j,C=c*e*l-f*j,k=e*f*l-c*j,H=f*f*l+i,G=c*f*l+e*j,J=e*c*l+f*j,e=f*c*l-e*j,f=c*c*l+i;d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*w+q*B+u*C;d[1]=g*w+r*B+s*C;d[2]=n*w+m*B+y*C;d[3]=v*w+z*B+x*C;d[4]=b*k+q*H+u*G;d[5]=g*
k+r*H+s*G;d[6]=n*k+m*H+y*G;d[7]=v*k+z*H+x*G;d[8]=b*J+q*e+u*f;d[9]=g*J+r*e+s*f;d[10]=n*J+m*e+y*f;d[11]=v*J+z*e+x*f;return d};X.Nb=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[4],f=a[5],g=a[6],j=a[7],i=a[8],l=a[9],n=a[10],v=a[11];c?a!=c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+i*d;c[5]=f*b+l*d;c[6]=g*b+n*d;c[7]=j*b+v*d;c[8]=e*-d+i*b;c[9]=f*-d+l*b;c[10]=g*-d+n*b;c[11]=j*-d+v*b;return c};
X.Ob=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[0],f=a[1],g=a[2],j=a[3],i=a[8],l=a[9],n=a[10],v=a[11];c?a!=c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+i*-d;c[1]=f*b+l*-d;c[2]=g*b+n*-d;c[3]=j*b+v*-d;c[8]=e*d+i*b;c[9]=f*d+l*b;c[10]=g*d+n*b;c[11]=j*d+v*b;return c};
X.Pb=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[0],f=a[1],g=a[2],j=a[3],i=a[4],l=a[5],n=a[6],v=a[7];c?a!=c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+i*d;c[1]=f*b+l*d;c[2]=g*b+n*d;c[3]=j*b+v*d;c[4]=e*-d+i*b;c[5]=f*-d+l*b;c[6]=g*-d+n*b;c[7]=j*-d+v*b;return c};
X.kc=function(a,b,c,d,e,f,g){g||(g=X.create());var j=b-a,i=d-c,l=f-e;g[0]=e*2/j;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=e*2/i;g[6]=0;g[7]=0;g[8]=(b+a)/j;g[9]=(d+c)/i;g[10]=-(f+e)/l;g[11]=-1;g[12]=0;g[13]=0;g[14]=-(f*e*2)/l;g[15]=0;return g};X.ra=function(a,b,c,d,e,f){a=c*Math.tan(a*Math.PI/360);b*=a;return X.kc(-b,b,-a*(f?-1:1),a*(f?-1:1),c,d,e)};
X.Wa=function(a,b,c,d,e,f,g){g||(g=X.create());var j=b-a,i=d-c,l=f-e;g[0]=2/j;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/i;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=-2/l;g[11]=0;g[12]=-(a+b)/j;g[13]=-(d+c)/i;g[14]=-(f+e)/l;g[15]=1;return g};
X.xc=function(a,b,c,d){d||(d=X.create());var e=a[0],f=a[1],a=a[2],g=c[0],j=c[1],i=c[2],c=b[1],l=b[2];if(e==b[0]&&f==c&&a==l)return X.ba(d);var n,v,q,r,c=e-b[0],l=f-b[1],b=a-b[2];r=1/Math.sqrt(c*c+l*l+b*b);c*=r;l*=r;b*=r;n=j*b-i*l;i=i*c-g*b;g=g*l-j*c;(r=Math.sqrt(n*n+i*i+g*g))?(r=1/r,n*=r,i*=r,g*=r):g=i=n=0;j=l*g-b*i;v=b*n-c*g;q=c*i-l*n;(r=Math.sqrt(j*j+v*v+q*q))?(r=1/r,j*=r,v*=r,q*=r):q=v=j=0;d[0]=n;d[1]=j;d[2]=c;d[3]=0;d[4]=i;d[5]=v;d[6]=l;d[7]=0;d[8]=g;d[9]=q;d[10]=b;d[11]=0;d[12]=-(n*e+i*f+g*a);
d[13]=-(j*e+v*f+q*a);d[14]=-(c*e+l*f+b*a);d[15]=1;return d};X.ab=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"};
M={create:function(a){var b=new T(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fd:function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b},inverse:function(a,b){if(!b||a==b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b},length:function(a){var b=a[0],c=a[1],d=a[2],
a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);if(g==0)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=f*g;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],a=a[3],g=b[0],j=b[1],i=b[2],b=b[3];c[0]=d*b+a*g+e*i-f*j;c[1]=e*b+a*j+f*g-d*i;c[2]=f*b+a*i+d*j-e*g;c[3]=a*b-d*g-e*j-f*i;return c},Cc:function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],b=a[0],g=a[1],j=a[2],a=a[3],
i=a*d+g*f-j*e,l=a*e+j*d-b*f,n=a*f+b*e-g*d,d=-b*d-g*e-j*f;c[0]=i*a+d*-b+l*-j-n*-g;c[1]=l*a+d*-g+n*-b-i*-j;c[2]=n*a+d*-j+i*-g-l*-b;return c},ad:function(a,b){b||(b=V.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,j=d+d,i=e+e,l=c*g,n=c*j;c*=i;var v=d*j;d*=i;e*=i;g*=f;j*=f;f*=i;b[0]=1-(v+e);b[1]=n-f;b[2]=c+j;b[3]=n+f;b[4]=1-(l+e);b[5]=d-g;b[6]=c-j;b[7]=d+g;b[8]=1-(l+v);return b},Ub:function(a,b){b||(b=X.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,j=d+d,i=e+e,l=c*g,n=c*j;c*=i;var v=d*j;d*=i;e*=i;
g*=f;j*=f;f*=i;b[0]=1-(v+e);b[1]=n-f;b[2]=c+j;b[3]=0;b[4]=n+f;b[5]=1-(l+e);b[6]=d-g;b[7]=0;b[8]=c-j;b[9]=d+g;b[10]=1-(l+v);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},Ed:function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(Math.abs(e)>=1)return d!=a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;var f=Math.acos(e),g=Math.sqrt(1-e*e);if(Math.abs(g)<0.0010)return d[0]=a[0]*0.5+b[0]*0.5,d[1]=a[1]*0.5+b[1]*0.5,d[2]=a[2]*0.5+b[2]*0.5,d[3]=a[3]*0.5+b[3]*0.5,d;e=Math.sin((1-c)*
f)/g;c=Math.sin(c*f)/g;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d},ab:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};var Z;Z||(Z={});
(function(){function a(a){return a<10?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=j[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,j,r,m,z=f,u,s=d[a];s&&typeof s==="object"&&typeof s.toJSON==="function"&&(s=s.toJSON(a));typeof i==="function"&&(s=i.call(d,a,s));switch(typeof s){case "string":return b(s);case "number":return isFinite(s)?String(s):"null";case "boolean":case "null":return String(s);
case "object":if(!s)return"null";f+=g;u=[];if(Object.prototype.toString.apply(s)==="[object Array]"){m=s.length;for(e=0;e<m;e+=1)u[e]=c(e,s)||"null";r=u.length===0?"[]":f?"[\n"+f+u.join(",\n"+f)+"\n"+z+"]":"["+u.join(",")+"]";f=z;return r}if(i&&typeof i==="object"){m=i.length;for(e=0;e<m;e+=1)typeof i[e]==="string"&&(j=i[e],(r=c(j,s))&&u.push(b(j)+(f?": ":":")+r))}else for(j in s)Object.prototype.hasOwnProperty.call(s,j)&&(r=c(j,s))&&u.push(b(j)+(f?": ":":")+r);r=u.length===0?"{}":f?"{\n"+f+u.join(",\n"+
f)+"\n"+z+"}":"{"+u.join(",")+"}";f=z;return r}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":t},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof Z.stringify!=="function")Z.stringify=function(a,b,d){var e;g=f="";if(typeof d==="number")for(e=0;e<d;e+=1)g+=" ";else typeof d==="string"&&(g=d);if((i=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",{"":a})};
if(typeof Z.parse!=="function")Z.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&typeof g==="object")for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=c(g,e),f!==h?g[e]=f:delete g[e]);return b.call(a,d,g)}var e,a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),typeof b==="function"?c({"":e},""):e;throw new SyntaxError("JSON.parse");}})();A=A||{};
A.ib=function(a,b,c){a=a||1;b=b||1;c=c||1;this.e=new A.q([-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,0.5*a,0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,0.5*a,-0.5*b,-0.5*c,0.5*a,-0.5*b,0.5*c,-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,0.5*c,-0.5*a,0.5*b,0.5*
c,-0.5*a,0.5*b,-0.5*c],3);this.va=new A.q([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],2);this.j=new A.Y([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23])};A.ib.prototype={a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};
A.jb=function(a,b,c){a=a||1;b=b||1;c=c||1;this.e=new A.q([-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c],3);this.j=new A.Y([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,5,1,4,2,7,3,6])};A.jb.prototype={a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};
A.nb=function(){this.e=new A.q([0,0,1,0,0,1,1,1],2);this.va=new A.q([0,0,1,0,0,1,1,1],2)};A.nb.prototype={a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};A.ob=function(){this.e=new A.q([0,0,1,0,1,1,0,1,0,0],2)};A.ob.prototype={a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};
A.Ca=function(a,b){for(var c in a)this[c]=a[c];if("string"===typeof this.color)this.color=A.f.na(this.color);else if("undefined"===typeof this.color)this.color=[1,1,1,1];if("undefined"===typeof this.Ka)this.Ka=A.z.TRIANGLES;if("function"===typeof b)this.l=b};
A.Ca.prototype={l:function(){var a=A.z,b=this.e,c=this.va,d=this.j,e=this.color,f=this.M,g=this.Ka;f?a.Xb(b,c,e,f):a.cb(b,e);d?a.hc(g,d):a.la(g,b.B);this.h=X.create(a.h);this.C=X.create(a.C)},a:function(){for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};A=A||{};
A.Ea=function(a,b,c){this.canvas=a;this.d=this.tb(a);A.sb();A.g=this.d;A.z=this;if("undefined"!==typeof this.d&&this.d!==t)this.TRIANGLES=this.d.TRIANGLES,this.TRIANGLE_STRIP=this.d.TRIANGLE_STRIP,this.TRIANGLE_FAN=this.d.TRIANGLE_FAN,this.LINES=this.d.LINES,this.LINE_STRIP=this.d.LINE_STRIP,this.LINE_LOOP=this.d.LINE_LOOP,this.POINTS=this.d.POINTS,this.COLOR_BUFFER_BIT=this.d.COLOR_BUFFER_BIT,this.DEPTH_BUFFER_BIT=this.d.DEPTH_BUFFER_BIT,this.STENCIL_BUFFER_BIT=this.d.STENCIL_BUFFER_BIT,"function"===
typeof c&&c();else if(A.H.log(A.I.get("initWebGL.error")),"function"===typeof b){b();return}this.width=a.width;this.height=a.height;this.Va=[];this.h=X.ba(X.create());this.C=X.ba(X.create());this.clearColor=[0,0,0,0];this.Tb=[0,0,0,0];this.fillColor=[0,0,0,0];this.strokeColor=[0,0,0,0];this.Sb=0;this.fc=new A.Da(A.O.gb.eb,A.O.gb.Na);this.Zc=new A.Da(A.O.J.eb,A.O.J.Na);this.$a=new A.nb;this.Kc=new A.ob;this.gd=new A.ib;this.hd=new A.jb;this.Ua=0;this.currentTime=t;this.$=this.jc=this.wb=this.elapsedTime=
0;this.origin();this.ra();this.vb()};
A.Ea.prototype={clear:function(a,b,c,d){var e=this.clearColor,f=this.d;if(e[0]!==a||e[1]!==b||e[2]!==c||e[3]!==d)e[0]=a,e[1]=b,e[2]=c,e[3]=d,f.clearColor(a,b,c,d),a*=255,b*=255,c*=255,d*=255,this.canvas.setAttribute("style","background: rgba("+a+", "+b+", "+c+", "+d+"); width: 100%; height: 100%;");f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)},ra:function(){var a=this.width,b=this.height,c=a/2,d=b/2,e=d/Math.tan(A.f.fa(45)/2);X.ra(45,a/b,e/10,e*100,this.C,!0);X.translate(this.C,[-c,-d,-e])},Wa:function(){X.Wa(0,
this.width,this.height,0,-1E3,1E3,this.C)},Mb:function(){this.Va.push(X.create(this.h))},Lb:function(){if(this.Va.length>0)this.h=this.Va.pop()},origin:function(){X.ba(this.h)},transform:function(a){X.multiply(this.h,a)},translate:function(a,b,c){X.translate(this.h,[a,b,c||0])},rotate:function(a,b,c,d){X.rotate(this.h,a,[b,c,d])},Nb:function(a){X.Nb(this.h,a)},Ob:function(a){X.Ob(this.h,a)},Pb:function(a){X.Pb(this.h,a)},scale:function(a,b,c){X.scale(this.h,[a,b,c||0])},vb:function(){this.dc("alpha");
this.Ja(!1);this.$c("#fff");this.fill("#fff");this.stroke("#000");this.ua(1)},$c:function(a){this.Tb=A.f.na(a)},fill:function(a){this.fillColor=A.f.na(a)},stroke:function(a){this.strokeColor=A.f.na(a)},Ec:function(){var a=this.strokeColor;a[0]=0;a[1]=0;a[2]=0;a[3]=0},ua:function(a){if(this.Sb!==a)this.Sb=a,this.d.lineWidth(a)},dc:function(a){var b=this.d;"alpha"===a?(b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA)):"add"===a||"additive"===a?(b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,
b.ONE)):b.disable(b.BLEND)},Ja:function(a){var b=this.d;a?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST)},cb:function(a,b){var c=this.fc;c.Wb();c.Fa("vertexPosition",a);c.ja("mvMatrix",this.h);c.ja("projMatrix",this.C);c.qb("color",b)},Xb:function(a,b,c,d){var e=this.Zc;e.Wb();e.Fa("vertexPosition",a);e.Fa("vertexTexCoord",b);e.ja("mvMatrix",this.h);e.ja("projMatrix",this.C);e.qb("color",c);e.bindTexture("sampler",d)},rect:function(a,b,c,d){var e=this.$a,f=this.Kc,g=this.fillColor,j=this.strokeColor;
"center"===this.$a.zd&&(a-=c/2,b-=d/2);this.Mb();this.translate(a,b,0);this.scale(c,d,1);j[3]&&(this.cb(f.e,j),this.la(this.LINE_STRIP,f.e.B));g[3]&&(this.cb(e.e,g),this.la(this.TRIANGLE_STRIP,e.e.B));this.Lb()},xb:function(a,b,c,d,e,f){var g=this.$a,j=this.Tb,f=f||g.va;if("undefined"===typeof d||"undefined"===typeof e)d=a.width,e=a.height;"center"===g.nd&&(b-=d/2,c-=e/2);j[3]&&(this.Mb(),this.translate(b,c,0),this.scale(d,e,1),this.Xb(g.e,f,j,a),this.la(this.TRIANGLE_STRIP,g.e.B),this.Lb())},la:function(a,
b){this.d.drawArrays(a,0,b)},hc:function(a,b){var c=this.d;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.b);c.drawElements(a,b.B,c.UNSIGNED_SHORT,0)},tb:function(a,b){var c=["experimental-webgl","webgl","webkit-3d","moz-webgl"],d,e,f;e=0;for(f=c.length;e<f;++e){try{d=a.getContext(c[e],b)}catch(g){}if(d)break}return d},loop:function(a){window.Nc(a);this.origin();this.ra();this.currentTime=(new Date).getTime();if(this.Ua!==0)this.$=this.currentTime-this.Ua,this.jc=1E3/this.$;this.Ua=this.currentTime;this.elapsedTime+=
this.$;this.wb++},a:function(){A.sb();for(var a in this)try{"function"===typeof this[a].a&&this[a].a()}catch(b){}finally{delete this[a]}}};window.Nc=window.Ad||window.Jd||window.sd||window.vd||window.td||function(a){window.setTimeout(a,1E3/60)};A=A||{};A.O={};A.O.gb={eb:"attribute vec3 vertexPosition;\nuniform mat4 mvMatrix;\nuniform mat4 projMatrix;\nvoid main(void) {\n    gl_Position = projMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n}",Na:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 color;\nvoid main(void) {\n    gl_FragColor = color;\n}"};
A.O.J={eb:"attribute vec3 vertexPosition;\nattribute vec2 vertexTexCoord;\nuniform mat4 mvMatrix;\nuniform mat4 projMatrix;\nvarying vec2 texCoord;\nvoid main(void) {\n  gl_Position = projMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n  texCoord = vertexTexCoord;\n}",Na:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 color;\nuniform sampler2D sampler;\nvarying vec2 texCoord;\nvoid main(void) {\n  vec4 tex = texture2D(sampler, vec2(texCoord.s, texCoord.t));\n  gl_FragColor = color * tex;\n}"};
A=A||{};
A.H={alert:function(a,b){var c;"undefined"===typeof b&&(b="undefined");try{c=Components.classes["@mozilla.org/embedcomp/prompt-service;1"].getService(Components.interfaces.nsIPromptService),c.alert(t,a,b)}catch(d){alert(b)}},log:function(a){var b;"undefined"===typeof a&&(a="undefined");try{b=Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService),b.logStringMessage(a)}catch(c){alert(a)}},error:function(a,b,c,d,e,f,g){var j,i;"undefined"===typeof a&&(a=
"undefined");try{j=Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService),i=Components.classes["@mozilla.org/scripterror;1"].createInstance(Components.interfaces.nsIScriptError),i.init(a,b,c,d,e,f,g),j.logMessage(i)}catch(l){alert(a)}}};
A.I={rb:"tilt-string-bundle",get:function(a){if("undefined"===typeof a)return"undefined";var b=document.getElementById(this.rb);return b?b.getString(a):a},Ma:function(a,b){if("undefined"===typeof a)return"undefined";if("undefined"===typeof b)return a;var c=document.getElementById(this.rb);return c?c.ld(a,b):[a,b].join(" ")}};A=A||{};
A.p={Z:h,Q:h,da:function(a,b,c,d){if("undefined"===typeof this.Z)this.Z=document;if("undefined"===typeof this.Q)this.Q=document.body;var e=this.Z,f=this.Q;if("undefined"===typeof e||e===t||"undefined"===typeof f||f===t)return t;e=e.createElement("canvas");e.setAttribute("style","width: 100%; height: 100%;");e.width=a;e.height=b;e.id=d;c&&this.append(e,f);return e},od:function(){var a=this.da(window.innerWidth,window.innerHeight,!0);this.Q.setAttribute("style","background:#000; margin: 0px; padding: 0px; overflow: hidden;");
return a},append:function(a,b){b.appendChild(a)},remove:function(a){a.parentNode.removeChild(a)},cd:function(a,b,c){function d(a,b,c){var i,l,n;i=0;for(l=b.childNodes.length;i<l;i++)n=b.childNodes[i],c>e&&(e=c),a(n,c),d(a,n,c+1)}var e=0;try{"function"===typeof a&&d(a,c||window.content.document,0),"function"===typeof b&&b(e)}finally{c=t}},lc:function(a){try{if(a.localName==="head"||a.localName==="body")throw new Exception;var b=a.getBoundingClientRect();return{x:b.left+window.content.pageXOffset,y:b.top+
window.content.pageYOffset,width:b.width,height:b.height}}catch(c){var d=b=0,e=a.clientWidth,f=a.clientHeight;if(a.offsetParent){do b+=a.offsetLeft,d+=a.offsetTop;while(a=a.offsetParent)}else{if(a.x)b=a.x;if(a.y)d=a.y}return{x:b,y:d,width:e,height:f}}finally{}},md:function(a){var b;a.nodeType===1?b="ELEMENT_NODE":a.nodeType===2?b="ATTRIBUTE_NODE":a.nodeType===3?b="TEXT_NODE":a.nodeType===4?b="CDATA_SECTION_NODE":a.nodeType===5?b="ENTITY_REFERENCE_NODE":a.nodeType===6?b="ENTITY_NODE":a.nodeType===
7?b="PROCESSING_INSTRUCTION_NODE":a.nodeType===8?b="COMMENT_NODE":a.nodeType===9?b="DOCUMENT_NODE":a.nodeType===10?b="DOCUMENT_TYPE_NODE":a.nodeType===11?b="DOCUMENT_FRAGMENT_NODE":a.nodeType===12&&(b="NOTATION_NODE");return b}};A=A||{};
A.f={fa:function(a){return a*Math.PI/180},jd:function(a){return a*180/Math.PI},Bb:function(a){return(a&a-1)===0},Jb:function(a){var b;--a;for(b=1;b<32;b<<=1)a|=a>>b;return a+1},Ga:function(a,b,c){return Math.max(b,Math.min(c,a))},yd:function(a,b,c){b*=0.5;var d=Math.sin(b),e=a[0]*d,f=a[1]*d,a=a[2]*d,b=Math.cos(b);return"undefined"===typeof c?[e,f,a,b]:(c[0]=e,c[1]=f,c[2]=a,c[3]=b,c)},Jc:function(a,b,c,d){var e;b*=0.5;a*=0.5;c*=0.5;e=Math.sin(b);var f=Math.sin(a),g=Math.sin(c),j=Math.cos(b),i=Math.cos(a),
l=Math.cos(c),b=e*i*l-j*f*g,a=j*f*l+e*i*g,c=j*i*g-e*f*l;e=j*i*l+e*f*g;return"undefined"===typeof d?[b,a,c,e]:(d[0]=b,d[1]=a,d[2]=c,d[3]=e,d)},Vb:function(a,b,c,d,e){var f=X.create(),e=e||M.create();X.multiply(d,c,f);X.inverse(f);e[0]=+((a[0]-b[0])/b[2]*2-1);e[1]=-((a[1]-b[1])/b[3]*2-1);e[2]=2*a[2]-1;e[3]=1;X.Dc(f,e);e[3]=1/e[3];e[0]*=e[3];e[1]*=e[3];e[2]*=e[3];return e},gc:function(a,b,c,d,e){this.Vb(a,c,d,e,a);this.Vb(b,c,d,e,b);return{position:a,xc:b,direction:D.normalize(D.ga(b,a))}},uc:function(a,
b,c,d,e){var f=D.create(),g=D.create(),j=D.create(),i=D.create(),l=D.create(),n=d.position,d=d.direction;"undefined"===typeof e&&(e=D.create());D.ga(b,a,f);D.ga(c,a,g);D.ub(f,g,j);if(j[0]===0&&j[1]===0&&j[2]===0)return-1;D.ga(n,a,l);b=-D.A(j,l);j=+D.A(j,d);if(Math.abs(j)<1.0E-4)return b==0?2:0;j=b/j;if(j<0)return 0;D.add(n,D.scale(d,j),e);n=D.A(f,f);d=D.A(f,g);j=D.A(g,g);D.ga(e,a,i);a=D.A(i,f);g=D.A(i,g);i=d*d-n*j;e=(d*g-j*a)/i;if(e<0||e>1)return 0;g=(d*a-n*g)/i;return g<0||e+g>1?0:1},na:function(a){if("undefined"!==
typeof this[a])return this[a];var b,c,d,e;b=a.charAt(0)==="#"?a.substring(1):a;if(b.length===3)c=b.charAt(0),d=b.charAt(1),e=b.charAt(2),b=[c,c,d,d,e,e,"ff"].join("");else if(b.length===4)c=b.charAt(0),d=b.charAt(1),e=b.charAt(2),b=b.charAt(3),b=[c,c,d,d,e,e,b,b].join("");else if(b.match("^rgba")=="rgba")return b=b.substring(5,b.length-1).split(","),b[0]/=255,b[1]/=255,b[2]/=255,b[3]/=255,this[a]=b;else if(b.match("^rgb")=="rgb")return b=b.substring(4,b.length-1).split(","),b[0]/=255,b[1]/=255,b[2]/=
255,b[3]=1,this[a]=b;c=parseInt(b.substring(0,2),16)/255;d=parseInt(b.substring(2,4),16)/255;e=parseInt(b.substring(4,6),16)/255;b=b.length===6?1:parseInt(b.substring(6,8),16)/255;this[a]=[c,d,e,b];return[c,d,e,b]}};A=A||{};A.$b={trim:function(a){return a.replace(/^\s+|\s+$/g,"")},rd:function(a){return a.replace(/^\s+/,"")},Cd:function(a){return a.replace(/\s+$/,"")}};A=A||{};A.kb={};
A.kb.cc={rc:function(a){var b,c,d,e;b=A.p.da();c=A.p.da();b=A.Ea.prototype.tb(b);b=b.getParameter(b.MAX_TEXTURE_SIZE);d=a.innerWidth+a.scrollMaxX;e=a.innerHeight+a.scrollMaxY;d=A.f.Ga(d,0,b);b=A.f.Ga(e,0,b);c.width=d;c.height=b;c.getContext("2d").drawWindow(a,0,0,d,b,"#fff");return c}};A=A||{};
A.ed={Mc:function(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.send(t);d.onreadystatechange=function(){d.readyState===4&&"function"===typeof b&&b(d,c)}},Bd:function(a,b,c){function d(d,g){e[g]=d;f++;f===a.length&&"function"===typeof b&&b(e,c)}var e=[],f=0,g,j;g=0;for(j=a.length;g<j;g++)this.Mc(a[g],d,g)}};TiltChrome=TiltChrome||{};TiltChrome.hb={};
TiltChrome.hb.Zb=function(){function a(){return z!==t?z[17]||z[224]:!1}var b=t,c=0,d=0,e=0,f=0,g=0,j=0,i=0,l=M.create(),n=!1,v=0,q=0,r=0,m=0,z=[];this.init=function(a){b=new A.fb(a.width,a.height);a.addEventListener("mousedown",u,!1);a.addEventListener("mouseup",s,!1);a.addEventListener("dblclick",y,!1);a.addEventListener("mousemove",x,!1);a.addEventListener("mouseout",w,!1);a.addEventListener("DOMMouseScroll",B,!1);window.addEventListener("keydown",C,!1);window.addEventListener("keyup",k,!1)};this.loop=
function(k){var C=this.s;if(n)if(a()||n===3){c=f+r-v;d=g+m-q;C.Rb(c,d,e);return}else b.zc(r,m);a()||(z[37]&&(c+=k/3),z[39]&&(c-=k/3),z[38]&&(d+=k/3),z[40]&&(d-=k/3),z[65]&&(i-=A.f.fa(k)/10),z[68]&&(i+=A.f.fa(k)/10),z[87]&&(j+=A.f.fa(k)/10),z[83]&&(j-=A.f.fa(k)/10));k=b.loop(k);A.f.Jc(i,j,0,l);C.Rc(M.multiply(l,k.rotation));C.Rb(c,d,e=k.zoom)};var u=function(e){e.preventDefault();e.stopPropagation();r=e.clientX-e.target.offsetLeft;m=e.clientY-e.target.offsetTop;v=r;q=m;f=c;g=d;n=e.which;!a()&&n!==
3&&b.Ac(r,m)}.bind(this),s=function(a){a.preventDefault();a.stopPropagation();var b=Math.abs(q-m);Math.abs(v-r)<2&&b<2&&this.s.click(r,m);r=a.clientX-a.target.offsetLeft;m=a.clientY-a.target.offsetTop;v=r;q=m;f=c;g=d;n=!1}.bind(this),y=function(a){a.preventDefault();a.stopPropagation();var b=Math.abs(q-m);Math.abs(v-r)<2&&b<2&&this.s.S(r,m);r=a.clientX-a.target.offsetLeft;m=a.clientY-a.target.offsetTop;v=r;q=m;f=c;g=d;n=!1}.bind(this),x=function(a){a.preventDefault();a.stopPropagation();r=a.clientX-
a.target.offsetLeft;m=a.clientY-a.target.offsetTop}.bind(this),w=function(a){a.preventDefault();a.stopPropagation();n=!1}.bind(this),B=function(a){a.preventDefault();a.stopPropagation();b.Bc(a.detail)}.bind(this),C=function(a){"open"!==TiltChrome.BrowserOverlay.panel.state&&(z[a.keyCode||a.which]=!0)}.bind(this),k=function(a){a=a.keyCode||a.which;z[a]=!1;if(a===27)"open"===TiltChrome.BrowserOverlay.panel.state?(TiltChrome.BrowserOverlay.panel.hidePopup(),z=[],n=!1):(TiltChrome.BrowserOverlay.a(),
TiltChrome.BrowserOverlay.href=t)}.bind(this);this.a=function(a){a.removeEventListener("mousedown",u,!1);a.removeEventListener("mouseup",s,!1);a.removeEventListener("dblclick",y,!1);a.removeEventListener("mousemove",x,!1);a.removeEventListener("mouseout",w,!1);a.removeEventListener("DOMMouseScroll",B,!1);window.removeEventListener("keydown",C,!1);window.removeEventListener("keyup",k,!1);try{k=C=B=w=x=y=s=u=t,b.a(),z=l=b=t}catch(c){}for(var d in this)try{"function"===typeof this[d].a&&this[d].a()}catch(e){}finally{delete this[d]}}};
TiltChrome=TiltChrome||{};
TiltChrome.ac=function(){var a=t,b=t,c=t,d=t,e=t;this.init=function(f){a=new A.lb;b=new A.J("chrome://tilt/skin/tilt-gui.png",{Fb:"nearest",Db:"nearest"});c=new A.mb("#0107",new A.ia(b,[210,210,610,610]));c.Oa=!0;c.L.x=f.width/2-305;c.L.y=f.height/2-305;d=new A.Ba(f.width-160,0,new A.ia(b,[945,80,50,40]));e=new A.Ba(f.width-50,0,new A.ia(b,[945,120,45,40]));b.onload=function(){this.s.Lc()}.bind(this);c.onclick=function(){c.Oa=!0};d.onclick=function(){c.Oa=!1};e.onclick=function(){TiltChrome.BrowserOverlay.a();TiltChrome.BrowserOverlay.href=
t};a.push(c,d,e)};this.l=function(){a.l()};this.click=function(b,c){a.click(b,c)};this.S=function(b,c){a.S(b,c)};this.a=function(){try{a.a(),a=t}catch(b){}for(var c in this)try{"function"===typeof this[c].a&&this[c].a()}catch(d){}finally{delete this[c]}}};TiltChrome=TiltChrome||{};
TiltChrome.bc=function(a){var b=new TiltChrome.hb.Zb,c=new TiltChrome.ac;function d(){j===t||j.d===t||"undefined"===typeof j.d||(j.loop(d),l.loaded&&(i&&(i=!1,j.clear(0,0,0,1),j.Ja(!1),j.xb(l,0,0,j.width,j.height),j.translate(j.width/2,j.height/2-30,m.n[2]-v*25),j.transform(M.Ub(m.rotation)),j.translate(m.n[0],m.n[1],0),j.Ja(!0),j.ua(2),q.l(),r.l(),c.l(j.$)),"function"===typeof b.loop&&b.loop(j.$)),(j.wb+1)%1E3===0&&window.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIDOMWindowUtils).garbageCollect())}
function e(){var a=[],b=[],c=[],d=[],e=[];A.p.cd(function(f,g){if(!(f.localName==="a"||f.localName==="b"||f.localName==="i"||f.localName==="u"||f.localName==="img")){var i=A.p.lc(f);if(i.width>4&&i.height>4){var k=i.x-j.width/2,l=i.y-j.height/2,m=g*v,q=i.width,r=i.height,i=a.length/3;a.push(k,l,m);a.push(k+q,l,m);a.push(k+q,l+r,m);a.push(k,l+r,m);a.push(k,l+r,m-v);a.push(k+q,l+r,m-v);a.push(k+q,l+r,m);a.push(k,l+r,m);a.push(k,l,m);a.push(k+q,l,m);a.push(k+q,l,m-v);a.push(k,l,m-v);b.push((k+j.width/
2)/n.width,(l+j.height/2)/n.height,(k+j.width/2+q)/n.width,(l+j.height/2)/n.height,(k+j.width/2+q)/n.width,(l+j.height/2+r)/n.height,(k+j.width/2)/n.width,(l+j.height/2+r)/n.height);for(k=0;k<2;k++)b.push(0,0,0,0,0,0,0,0);e.push({innerHTML:f.innerHTML,name:f.localName,className:f.className,id:f.id});c.push(i+0,i+1,i+2,i+0,i+2,i+3);c.push(i+4,i+5,i+6,i+4,i+6,i+7);c.push(i+8,i+9,i+10,i+8,i+10,i+11);c.push(i+10,i+9,i+6,i+10,i+6,i+5);c.push(i+8,i+11,i+4,i+8,i+4,i+7);d.push(i+0,i+1,i+1,i+2,i+2,i+3,i+3,
i+0);d.push(i+4,i+5,i+5,i+6,i+6,i+7,i+7,i+4);d.push(i+8,i+9,i+9,i+10,i+10,i+11,i+11,i+8);d.push(i+10,i+9,i+9,i+6,i+6,i+5,i+5,i+10);d.push(i+8,i+11,i+11,i+4,i+4,i+7,i+7,i+8)}}});q=new A.Ca({e:new A.q(a,3),va:new A.q(b,2),j:new A.Y(c),color:"#fff",M:n,Fc:e});r=new A.Ca({e:q.e,j:new A.Y(d),color:"#999",Ka:j.LINES})}function f(){if(TiltChrome.BrowserOverlay.href!==window.content.location.href)TiltChrome.BrowserOverlay.href=t,TiltChrome.BrowserOverlay.a()}function g(){j.width=window.content.innerWidth;
j.height=window.content.innerHeight;i=!0;TiltChrome.BrowserOverlay.panel.hidePopup()}var j=new A.Ea(a,function(){TiltChrome.BrowserOverlay.a();TiltChrome.BrowserOverlay.href=t;A.H.alert("Tilt",A.I.get("initWebGL.error"))}),i=!0,l=t,n=t,v=15,q=t,r=t,m={n:D.create(),rotation:M.create()};(function(){if(!(j===t||j.d===t||"undefined"===typeof j.d)){var d=A.kb.cc.rc(window.content);n=new A.J(d,{fill:"white",stroke:"#aaa",ua:8});e.call(this);gBrowser.tabContainer.addEventListener("TabClose",f,0);gBrowser.tabContainer.addEventListener("TabAttrModified",
f,0);gBrowser.contentWindow.addEventListener("resize",g,0);b.s=this;"function"===typeof b.init&&b.init(a);c.s=this;"function"===typeof c.init&&c.init(a);l=new A.J("chrome://tilt/skin/tilt-background.png");m.n=[0,0,0];m.rotation=[0,0,0,1]}}).call(this);d.call(this);this.Lc=function(){i=!0};this.Rb=function(a,b,c){if(m.n[0]!=a||m.n[1]!=b||m.n[2]!=c)m.n[0]=a,m.n[1]=b,m.n[2]=c,i=!0};this.Rc=function(a){if(m.rotation[0]!=a[0]||m.rotation[1]!=a[1]||m.rotation[2]!=a[2]||m.rotation[3]!=a[3])M.set(a,m.rotation),
i=!0};this.click=function(a,b){"function"===typeof c.click&&c.click(a,b);TiltChrome.BrowserOverlay.panel.hidePopup();window.content.focus();i=!0};this.S=function(a,b){"function"===typeof c.S&&c.S(a,b);var d=A.f.gc([a,b,0],[a,b,1],[0,0,j.width,j.height],q.h,q.C),e=D.create(),f=[],g,l,m,k,n;g=0;for(l=q.j.length;g<l;g+=3)m=[q.e[q.j[g]*3],q.e[q.j[g]*3+1],q.e[q.j[g]*3+2]],k=[q.e[q.j[g+1]*3],q.e[q.j[g+1]*3+1],q.e[q.j[g+1]*3+2]],n=[q.e[q.j[g+2]*3],q.e[q.j[g+2]*3+1],q.e[q.j[g+2]*3+2]],A.f.uc(m,k,n,d,e)>0&&
f.push({location:D.create(e),Kb:q.Fc[Math.floor(g/30)]});if(f.length>0)f.sort(function(a,b){return a.location[2]<b.location[2]?1:-1}),e=f[0],d=e.Kb,e=A.$b.trim(aa(e.Kb.innerHTML).replace(/</g,"&lt;").replace(/>/g,"&gt;")),f=document.getElementById("tilt-panel-iframe"),g=f.contentDocument.getElementById("editor"),document.getElementById("tilt-panel-label").value=" <"+d.name+(d.className?' class="'+d.className+'"':"")+(d.id?' id="'+d.id+'"':"")+">",TiltChrome.BrowserOverlay.panel.openPopup(t,"overlap",
window.innerWidth-f.width-21,window.innerHeight-f.height-77,!1,!1),g.innerHTML=e,f.contentWindow.onload();i=!0};this.a=function(){gBrowser.tabContainer.removeEventListener("TabClose",f,0);gBrowser.tabContainer.removeEventListener("TabAttrModified",f,0);gBrowser.contentWindow.removeEventListener("resize",g,0);try{j.a(),j=t,b.a(a),b=t,c.a(a),c=t,l.a(),l=t,n.a(),n=t,q.a(),q=t,r.a(),r=t,delete m.rotation,delete m.n,m=t}catch(d){}for(var e in this)try{"function"===typeof this[e].a&&this[e].a()}catch(i){}finally{delete this[e]}}};
