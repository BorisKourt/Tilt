<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tilt Editor</title>
    <style type="text/css">
      body {
        overflow: hidden;
        background: #fff;
      }
      #code {
        position: absolute;
        margin: 0px;
        top: 0px;
        bottom: 0px;
        left: -20px;
        right: 0px;
        font-size: 11px;
      }
    </style>
  </head>
  <body>
    <pre id="code"/>
    <script type="text/javascript" src="src/ace.js"></script>
    <script>
      var scripts = {};
      var themes = [
        "clouds",
        "clouds_midnight",
        "cobalt",
        "dawn",
        "eclipse",
        "idle_fingers",
        "kr_theme",
        "merbivore",
        "merbivore_soft",
        "mono_industrial",
        "monokai",
        "pastel_on_dark",
        "twilight",
        "vibrant_ink",
      ];

      window.refreshCodeEditor = function(type, code, theme) {
        loadScript("src/theme-" + themes[theme] + ".js", function() {

          var editor = ace.edit("code");
          editor.getSession().setValue(code);
          editor.setTheme("ace/theme/" + themes[theme]);
          editor.setReadOnly(true);

          if (type === "html") {
            loadScript("src/mode-html.js", function() {
              var HTMLMode = require("ace/mode/html").Mode;
              editor.getSession().setMode(new HTMLMode());
            });
          }
          else if (type === "css") {
            loadScript("src/mode-scss.js", function() {
              var CSSMode = require("ace/mode/scss").Mode;
              editor.getSession().setMode(new CSSMode());
            });
          }
        });
      };

      window.loadScript = function(path, callback) {
        var head = document.getElementsByTagName('head')[0];
        var s = document.createElement('script');

        s.src = path;
        head.appendChild(s);

        s.onload = callback;
        scripts[path] = true;
      };
    </script>

  </body>
</html>
