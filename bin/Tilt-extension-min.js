'use strict';var e=void 0,k=null;function ba(){return function(){}}function ja(a){return function(b){this[a]=b}}function L(a){return function(){return this[a]}}var Q,TiltChrome=TiltChrome||{};
TiltChrome.BrowserOverlay={href:k,canvas:k,o:k,C:k,L:k,initialize:function(){this.e(!0);if(this.href===window.content.location.href)this.href=k;else{this.href=window.content.location.href;this.C={B:document.getElementById("tilt-sourceeditor"),title:document.getElementById("tilt-sourceeditor-title"),Ma:document.getElementById("tilt-sourceeditor-iframe")};this.L={B:document.getElementById("tilt-colorpicker"),Ma:document.getElementById("tilt-colorpicker-iframe")};this.C.refresh=this.C.Ma.contentWindow.refreshCodeEditor;
this.L.refresh=this.L.Ma.contentWindow.refreshColorPicker;var a=window.content.innerWidth,b=window.content.innerHeight;S.K.kb=document.getElementById("tilt-iframe").contentDocument;S.K.Ha=gBrowser.selectedBrowser.parentNode;this.canvas=S.K.qb(a,b,!0);this.o=new TiltChrome.Lb(this.canvas,new TiltChrome.pd.we,new TiltChrome.b.ve)}},e:function(a,b){S.K.kb=k;S.K.Ha=k;if(this.canvas!==k)this.canvas.parentNode.removeChild(this.canvas),this.canvas=k;var c=function(){if(this.o!==k)this.o.e(),this.o=k;if(this.C!==
k)this.C.B.hidePopup(),this.C.B=k,this.C.title=k,this.C=this.C.Ma=k;if(this.L!==k)this.L.B.hidePopup(),this.L.B=k,this.L=this.L.Ma=k;S.r.log();S.r.reset();a&&window.setTimeout(this.Ub,100)}.bind(this);b?window.setTimeout(c,100):c()},Ub:function(){window.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIDOMWindowUtils).garbageCollect()}};var S=S||{};
S.nd=function(a,b,c){S.r.u("Tilt.Arcball",this);this.$a=[0,0];this.Fb=[0,0];this.Eb=[0,0];this.bd=[0,0];this.Ba=-1;this.Ca=0;this.Af=-3E3;this.zf=500;this.Bf=10;this.fc=[];this.hd=V();this.pe=V();this.qe=V();this.gc=ka([0,0,0,1]);this.Xc=ka([0,0,0,1]);this.bc=ka([0,0,0,1]);this.ad=V();this.Yc=V();this.Wc=V();this.yb=[0,0];this.zb=[0,0];this.me=ka([0,0,0,1]);this.ne=V();this.qa(a,b,c)};
S.nd.prototype={loop:function(a){var a="undefined"===typeof a?0.25:S.i.G(a*0.01,0.01,0.99),b,c,d=this.dd,f=this.q,g=this.k,h=this.$a,i=this.Fb,j=this.Eb;c=this.bd;var l=this.Ba,s=this.Ca,t=this.fc,w=this.hd,y=this.pe,v=this.qe,A=this.gc,o=this.Xc,n=this.bc,u=this.ad,q=this.Yc,r=this.Wc,x=this.yb,B=this.zb,m=this.me,C=this.ne;c[0]+=(j[0]-c[0])*a;c[1]+=(j[1]-c[1])*a;b=c[0];c=c[1];if(l===3||b===i[0]&&c===i[1])this.ed=!1;l===1||this.ed?(this.ed=!0,this.$d(b,c,f,g,d,y),ma(w,y,v),X(v)>0?(o[0]=v[0],o[1]=
v[1],o[2]=v[2],o[3]=-Y(w,y)):(o[0]=0,o[1]=0,o[2]=0,o[3]=1),na(A,o,n)):oa(n,A);l===3?(q[0]=j[0]-h[0],q[1]=j[1]-h[1],r[0]=u[0]+q[0],r[1]=u[1]+q[1]):(u[0]=r[0],u[1]=r[1]);q[2]=(s-r[2])*0.1;r[2]+=q[2];t[65]&&(x[0]-=a*0.2);t[68]&&(x[0]+=a*0.2);t[87]&&(x[1]+=a*0.2);t[83]&&(x[1]-=a*0.2);t[37]&&(B[0]+=a*50);t[39]&&(B[0]-=a*50);t[38]&&(B[1]+=a*50);t[40]&&(B[1]-=a*50);m[0]+=(x[0]-m[0])*a;m[1]+=(x[1]-m[1])*a;C[0]+=(B[0]-C[0])*a;C[1]+=(B[1]-C[1])*a;S.i.rf(m[0],m[1],0,o);q[0]=C[0];q[1]=C[1];q[2]=0;return{rotation:na(o,
n),Z:pa(q,r)}},Ec:function(a,b,c){this.Wa();this.$a[0]=a;this.$a[1]=b;this.Ba=c;this.jc();this.$d(a,b,this.q,this.k,this.dd,this.hd);oa(this.bc,this.gc)},Ic:function(a,b){this.Fb[0]=a;this.Fb[1]=b;this.Ba=-1},Fc:function(a,b){this.Ba!==-1&&(this.Eb[0]=a,this.Eb[1]=b)},Gc:function(){this.Ba=-1},Hc:function(a){var b=this.Bf,c=this.Af,d=this.zf;this.Wa();this.Ca=S.i.G(this.Ca-a*b,c,d)},Ac:function(a){this.Wa();this.fc[a]=!0},Bc:function(a){this.fc[a]=!1},$d:function(a,b,c,d,f,g){a=(a-c*0.5)/f;b=(b-d*
0.5)/f;c=0;c=a*a+b*b;c>1?(c=1/Math.sqrt(c),g[0]=a*c,g[1]=b*c,g[2]=0):(g[0]=a,g[1]=b,g[2]=Math.sqrt(1-c))},qa:function(a,b,c){this.q=a;this.k=b;this.dd="undefined"!==typeof c?c:b;this.jc()},translate:function(a,b){this.zb[0]+=a;this.zb[1]+=b},rotate:function(a,b){this.yb[0]+=a;this.yb[1]+=b},zoom:function(a){this.Ca+=a},stop:function(){this.Wa();this.jc();this.Ba=-1},reset:function(a){var b=this.Ca,c=this.gc,d=this.Xc,f=this.bc,g=this.ad,h=this.Yc,i=this.Wc,j=this.yb,l=this.zb;this.ue(function(){c[0]*=
-1;c[1]*=-1;c[2]*=-1;ra(c,c,1-a);ra(d,c,1-a);ra(f,c,1-a);ta(g,a);ta(h,a);ta(i,a);j[0]*=a;j[1]*=a;l[0]*=a;l[1]*=a;this.Ca*=a;X(c)<1.0E-4&&X(d)<1.0E-4&&X(f)<1.0E-4&&X(g)<0.01&&X(h)<0.01&&X(i)<0.01&&X([j[0],j[1],b])<0.01&&X([l[0],l[1],b])<0.01&&this.Wa()}.bind(this),1E3/60)},ue:function(a,b){if("undefined"===typeof this.Bb)this.Bb=window.setInterval(a,b)},Wa:function(){"undefined"!==typeof this.Bb&&(window.clearInterval(this.Bb),delete this.Bb)},jc:function(){var a=this.Eb,b=this.Fb,c=this.bd,d=this.$a[0],
f=this.$a[1];a[0]=d;a[1]=f;b[0]=d;b[1]=f;c[0]=d;c[1]=f},e:function(){this.stop();S.H(this)}};S=S||{};S.W=function(a,b,c){S.r.u("Tilt.VertexBuffer",this);this.S=this.n=k;this.da=this.Sb=0;"undefined"!==typeof a&&this.yc(a,b,c)};
S.W.prototype={yc:function(a,b,c){var d=S.D;"undefined"===typeof c&&(c=a.length/b);this.S=new Float32Array(a);this.n=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,this.n);d.bufferData(d.ARRAY_BUFFER,this.S,d.STATIC_DRAW);this.Sb=b;this.da=c},e:function(){S.D.deleteBuffer(this.n);S.H(this)}};S.fb=function(a,b){S.r.u("Tilt.IndexBuffer",this);this.S=this.n=k;this.da=this.Sb=0;"undefined"!==typeof a&&this.yc(a,b)};
S.fb.prototype={yc:function(a,b){var c=S.D;if("undefined"===typeof b)b=a.length;this.S=new Uint16Array(a);this.n=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.n);c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.S,c.STATIC_DRAW);this.Sb=1;this.da=b},e:function(){S.D.deleteBuffer(this.n);S.H(this)}};S=S||{};S.D=k;S.aa=k;S.ac=-1;S.dc=-1;S.Db={};S.qc=function(){S.D=k;S.aa=k;S.ac=-1;S.dc=-1;S.Db={};S.ud.Xa=0;S.oc.Xa=0};S=S||{};
S.H=function(a){for(var b in a)try{"function"===typeof a[b].e&&a[b].e()}catch(c){}finally{a[b]=k,delete a[b]}};S=S||{};
S.r={enabled:!1,wa:[],u:function(a,b,c,d,f,g){var h,i,j;if(this.enabled)if(c){if("undefined"===typeof d&&(d=this.Ae.bind(this)),"undefined"===typeof f&&(f=this.ye.bind(this)),"undefined"===typeof g&&(g=this.Ke.bind(this)),h=b[c],"function"===typeof h)i=this.wa.length,this.wa[i]={name:(a+"."||"")+c,jb:0,hb:0,ya:0,Ta:0},b[c]=function(){try{return d(i),g(b,h,arguments)}finally{f(i)}}}else for(j in b)"function"===typeof b[j]&&this.u(a,b,j,d,f,g)},Ae:function(a){if("undefined"!==typeof this.wa[a])this.wa[a].currentTime=
(new Date).getTime()},ye:function(a){a=this.wa[a];if("undefined"!==typeof a){var b=(new Date).getTime()-a.currentTime;a.jb++;a.ya=Math.max(a.ya,b);a.hb=(a.ya+b)*0.5;a.Ta+=b}},Ke:function(a,b,c){if(c.length===0)return b.call(a);a=0;c=c.length;for(b="";a<c;a++)b+="arguments[2]["+a+"]"+(a!==c-1?",":"");return eval("arguments[1].call(arguments[0], "+b+");")},log:function(){var a=this.wa.slice(0),b,c,d,f;a.sort(function(a,b){return a.Ta<b.Ta?1:-1});for(b=0;b<a.length;b++){d=a[b];for(c=b+1;c<a.length;c++)if(f=
a[c],d.name===f.name)d.jb+=f.jb,d.ya=Math.max(d.ya,f.ya),d.hb=(d.hb+f.hb)*0.5,d.Ta+=f.Ta,a.splice(c,1),c--;d.jb!==0&&S.ha.log("function "+d.name+"\ncalls    "+d.jb+"\naverage  "+d.hb+"ms\nlongest  "+d.ya+"ms\ntotal    "+d.Ta+"ms")}},reset:function(){this.wa=[]}};S=S||{};S.Kb=function(a,b){S.r.u("Tilt.Program",this);this.n=k;this.Za=-1;this.eb=this.ta=k;this.Ab={};this.kd={};arguments.length===2&&this.Ze(a,b)};
S.Kb.prototype={Ze:function(a,b){this.n=S.ud.create(a,b);this.Za=this.n.id;this.ta=this.n.attributes;this.eb=this.n.Ua;delete this.n.id;delete this.n.attributes;delete this.n.Ua},Tc:function(){var a=this.Za,b;if(S.ac!==a&&(S.ac=a,a=S.D,a.useProgram(this.n),this.De(),S.dc<this.ta.length))for(b in S.dc=this.ta.length,this.ta)this.ta.hasOwnProperty(b)&&b!=="length"&&a.enableVertexAttribArray(this.ta[b])},Ga:function(a,b){var c=S.D,d=this.ta[a],f=b.Sb;c.bindBuffer(c.ARRAY_BUFFER,b.n);c.vertexAttribPointer(d,
f,c.FLOAT,!1,0,0)},Fa:function(a,b){var c=this.Ab,d=(b[0]+b[1]+b[2])*(b[4]+b[5]+b[6])*(b[8]+b[9]+b[10])*(b[12]+b[13]+b[14]);c[a]!==d&&(c[a]=d,S.D.uniformMatrix4fv(this.eb[a],!1,b))},pc:function(a,b){var c=this.Ab,d=b[3]*255<<24|b[0]*255<<16|b[1]*255<<8|b[2]*255;c[a]!==d&&(c[a]=d,S.D.uniform4fv(this.eb[a],b))},Be:function(a,b){var c=this.Ab;c[a]!==b&&(c[a]=b,S.D.uniform1f(this.eb[a],b))},bindTexture:function(a,b){var c=this.kd,d=b.Za;if(c[a]!==d)c[a]=d,c=S.D,c.bindTexture(c.TEXTURE_2D,b.n),c.uniform1i(this.eb[a],
0)},De:function(){this.kd={}},qc:function(){this.Ab={}},e:function(){S.D.deleteShader(this.n);S.H(this)}};S=S||{};
S.ud={create:function(a,b){var c=this.compile(a,"x-shader/x-vertex"),d=this.compile(b,"x-shader/x-fragment");return this.link(c,d)},compile:function(a,b){var c=S.D,d;if("string"!==typeof a||a.length<1)return S.ha.error(S.ca.get("compileShader.source.error")),k;if(b==="x-shader/x-vertex")d=c.createShader(c.VERTEX_SHADER);else if(b==="x-shader/x-fragment")d=c.createShader(c.FRAGMENT_SHADER);else return S.ha.error(S.ca.sc("compileShader.type.error"),[a]),k;c.shaderSource(d,a);c.compileShader(d);d.src=
a;return!c.getShaderParameter(d,c.COMPILE_STATUS)?(c=c.getShaderInfoLog(d),S.ha.error(S.ca.sc("compileShader.compile.error"),[c]),k):d},link:function(a,b){var c=S.D,d;d=c.createProgram();c.attachShader(d,a);c.attachShader(d,b);c.linkProgram(d);if(!c.getProgramParameter(d,c.LINK_STATUS))return d=c.getProgramInfoLog(d),S.ha.error(S.ca.sc("linkProgram.error",[d])),k;d.id=this.Xa++;c=[a.src,b.src].join(" ").replace(/#.*|[(){};,]/g," ").split(" ");return this.Kf(d,c)},If:function(a,b){return S.D.getAttribLocation(a,
b)},Lf:function(a,b){return S.D.getUniformLocation(a,b)},Jf:function(a,b){if("string"===typeof b){if(b.length<1)return k;var c;return(c=this.If(a,b))>=0?c:this.Lf(a,b)}return k},Kf:function(a,b){var c,d,f,g;a.attributes={};a.attributes.length=0;a.Ua={};a.Ua.length=0;for(c=0,d=b.length;c<d;c++)f=b[c],g=this.Jf(a,f),"number"===typeof g&&"undefined"===typeof a.attributes[f]&&(a.attributes[f]=g,a.attributes.length++),"object"===typeof g&&g instanceof WebGLUniformLocation&&"undefined"===typeof a.Ua[f]&&
(a.Ua[f]=g,a.Ua.length++);return a},Xa:0};S=S||{};S.Ea=function(a,b){S.r.u("Tilt.Texture",this);b=b||{};this.n=k;this.height=this.width=this.Za=-1;this.loaded=!1;this.onload=b.onload;"object"===typeof a?this.Jd(a,b):"string"===typeof a?this.$e(a,b):S.ha.error(S.ca.get("initTexture.source.error"))};
S.Ea.prototype={Jd:function(a,b){this.n=S.oc.create(a,b);this.Za=this.n.id;this.width=this.n.width;this.height=this.n.height;this.loaded=!0;if("function"===typeof this.onload)this.onload();delete this.n.id;delete this.n.width;delete this.n.height;delete this.onload},$e:function(a,b){var c=new Image;c.src=a;c.onload=function(){this.Jd(c,b);b=c=k}.bind(this)},e:function(){S.D.deleteTexture(this.n);S.H(this)}};S=S||{};
S.oc={create:function(a,b){b=b||{};if("undefined"!==typeof S.Db[a.src])return S.Db[a.src];var c=S.D,d=S.oc.vf(a,b),f=c.getParameter(c.TEXTURE_BINDING_2D),g=a.width,h=a.height,i=c.createTexture();c.bindTexture(c.TEXTURE_2D,i);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,d);i.width=g;i.height=h;i.id=this.Xa++;this.Gf(b);c.bindTexture(c.TEXTURE_2D,f);"undefined"!==typeof a.src&&(S.Db[a.src]=i);return i},Gf:function(a){var b=S.D,c=b.TEXTURE_MIN_FILTER,d=b.TEXTURE_MAG_FILTER,f=b.TEXTURE_WRAP_S,
g=b.TEXTURE_WRAP_T,a=a||{};a.Yb&&b.bindTexture(b.TEXTURE_2D,a.Yb.qg);"nearest"===a.Qd?b.texParameteri(b.TEXTURE_2D,c,b.NEAREST):"linear"===a.Qd&&a.Rd?b.texParameteri(b.TEXTURE_2D,c,b.LINEAR_MIPMAP_LINEAR):b.texParameteri(b.TEXTURE_2D,c,b.LINEAR);"nearest"===a.Nd?b.texParameteri(b.TEXTURE_2D,d,b.NEAREST):"linear"===a.Nd&&a.Rd?b.texParameteri(b.TEXTURE_2D,d,b.LINEAR_MIPMAP_LINEAR):b.texParameteri(b.TEXTURE_2D,d,b.LINEAR);"repeat"===a.Ag?b.texParameteri(b.TEXTURE_2D,f,b.REPEAT):b.texParameteri(b.TEXTURE_2D,
f,b.CLAMP_TO_EDGE);"repeat"===a.Bg?b.texParameteri(b.TEXTURE_2D,g,b.REPEAT):b.texParameteri(b.TEXTURE_2D,g,b.CLAMP_TO_EDGE);a.Rd&&b.generateMipmap(b.TEXTURE_2D)},vf:function(a,b){var c=(a.src||"").indexOf("chrome://"),d=S.i.Kd(a.height);if(S.i.Kd(a.width)&&d&&c===-1)try{return a}finally{b=a=k}b=b||{};c=S.K.qb(S.i.Td(a.width),S.i.Td(a.height));d=c.getContext("2d");if(b.fill)d.fillStyle=b.fill,d.fillRect(0,0,c.width,c.height);d.drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);if(b.stroke)d.strokeStyle=
b.stroke,d.lineWidth=b.tb,d.strokeRect(0,0,c.width,c.height);return c},xg:function(a){S.D.pixelStorei(S.D.UNPACK_FLIP_Y_WEBGL,a)},Xa:0};
function ua(a){var b={indent_size:2,indent_char:" ",max_char:78,brace_style:"collapse"},c,d,f,b=b||{};c=b.pb||2;d=b.Hd||" ";f=b.Mb||"collapse";b=new function(){this.M=0;this.yg="";this.Ia="CONTENT";this.A={parent:"parent1",ng:1,mg:""};this.Aa=this.Md=this.cf=this.Zb=this.ga="";this.V={$b:"\n\r\t ".split(""),Nf:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),Le:"head,body,/html".split(","),Na:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;
return!1}};this.Qe=function(){for(var a="",b=[],c=!1;this.input.charAt(this.M)!=="<";){if(this.M>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.M);this.M++;this.P++;if(this.V.Na(a,this.V.$b))b.length&&(c=!0),this.P--;else{if(c){if(this.P>=this.Od){b.push("\n");for(c=0;c<this.ja;c++)b.push(this.Qb);this.P=0}else b.push(" "),this.P++;c=!1}b.push(a)}}return b.length?b.join(""):""};this.Re=function(){var a="",b=[],a=/<\/script>/igm;a.lastIndex=this.M;for(var c=(a=
a.exec(this.input))?a.index:this.input.length;this.M<c;){if(this.M>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.M);this.M++;b.push(a)}return b.length?b.join(""):""};this.Pc=function(a){this.A[a+"count"]?this.A[a+"count"]++:this.A[a+"count"]=1;this.A[a+this.A[a+"count"]]=this.ja;this.A[a+this.A[a+"count"]+"parent"]=this.A.parent;this.A.parent=a+this.A[a+"count"]};this.wf=function(a){if(this.A[a+"count"]){for(var b=this.A.parent;b;){if(a+this.A[a+"count"]===b)break;
b=this.A[b+"parent"]}if(b)this.ja=this.A[a+this.A[a+"count"]],this.A.parent=this.A[b+"parent"];delete this.A[a+this.A[a+"count"]+"parent"];delete this.A[a+this.A[a+"count"]];this.A[a+"count"]==1?delete this.A[a+"count"]:this.A[a+"count"]--}};this.Se=function(){var a="",b=[],c=!1;do{if(this.M>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.M);this.M++;this.P++;if(this.V.Na(a,this.V.$b))c=!0,this.P--;else{if(a==="'"||a==='"')if(!b[1]||b[1]!=="!")a+=this.nb(a),c=
!0;a==="="&&(c=!1);if(b.length&&b[b.length-1]!=="="&&a!==">"&&c)this.P>=this.Od?(this.Ra(!1,b),this.P=0):(b.push(" "),this.P++),c=!1;b.push(a)}}while(a!==">");a=b.join("");c=a.substring(1,a.indexOf(" ")!=-1?a.indexOf(" "):a.indexOf(">")).toLowerCase();a.charAt(a.length-2)==="/"||this.V.Na(c,this.V.Nf)?this.ga="SINGLE":c==="script"?(this.Pc(c),this.ga="SCRIPT"):c==="style"?(this.Pc(c),this.ga="STYLE"):c==="a"?(a=this.nb("</a>",a),b.push(a),this.ga="SINGLE"):c.charAt(0)==="!"?c.indexOf("[if")!=-1?(a.indexOf("!IE")!=
-1&&(a=this.nb("--\>",a),b.push(a)),this.ga="START"):c.indexOf("[endif")!=-1?(this.ga="END",this.Sf()):(a=c.indexOf("[cdata[")!=-1?this.nb("]]\>",a):this.nb("--\>",a),b.push(a),this.ga="SINGLE"):(c.charAt(0)==="/"?(this.wf(c.substring(1)),this.ga="END"):(this.Pc(c),this.ga="START"),this.V.Na(c,this.V.Le)&&this.Ra(!0,this.za));return b.join("")};this.nb=function(a,b){if(b&&b.indexOf(a)!=-1)return"";var c="",d="",f=!0;do{if(this.M>=this.input.length)break;c=this.input.charAt(this.M);this.M++;if(this.V.Na(c,
this.V.$b)){if(!f){this.P--;continue}if(c==="\n"||c==="\r"){d+="\n";for(c=0;c<this.ja;c++)d+=this.Qb;f=!1;this.P=0;continue}}d+=c;this.P++;f=!0}while(d.indexOf(a)==-1);return d};this.Te=function(){var a;if(this.Md==="TK_TAG_SCRIPT"){a=this.Re();if(typeof a!=="string")return a;a=va(a,{indent_size:this.pb,indent_char:this.Id,indent_level:this.ja,brace_style:this.Mb});return[a.replace(/^[\t ]+/,""),"TK_CONTENT"]}if(this.Ia==="CONTENT")return a=this.Qe(),typeof a!=="string"?a:[a,"TK_CONTENT"];if(this.Ia===
"TAG")return a=this.Se(),typeof a!=="string"?a:[a,"TK_TAG_"+this.ga]};this.of=function(a,b,c,d){this.input=a||"";this.za=[];this.Id=b;this.Qb="";this.pb=c;this.Mb=d;this.ja=0;this.Od=80;for(a=this.P=0;a<this.pb;a++)this.Qb+=this.Id;this.Ra=function(a,b){this.P=0;if(b&&b.length){if(!a)for(;this.V.Na(b[b.length-1],this.V.$b);)b.pop();b.push("\n");for(var c=0;c<this.ja;c++)b.push(this.Qb)}};this.Vb=function(a){this.za.push(a)};this.Xe=function(){this.ja++};this.Sf=function(){this.ja>0&&this.ja--}};return this};
for(b.of(a,d,c,f);;){a=b.Te();b.Aa=a[0];b.Zb=a[1];if(b.Zb==="TK_EOF")break;switch(b.Zb){case "TK_TAG_START":case "TK_TAG_SCRIPT":case "TK_TAG_STYLE":b.Ra(!1,b.za);b.Vb(b.Aa);b.Xe();b.Ia="CONTENT";break;case "TK_TAG_END":b.Ra(!0,b.za);b.Vb(b.Aa);b.Ia="CONTENT";break;case "TK_TAG_SINGLE":b.Ra(!1,b.za);b.Vb(b.Aa);b.Ia="CONTENT";break;case "TK_CONTENT":b.Aa!==""&&(b.Ra(!1,b.za),b.Vb(b.Aa)),b.Ia="TAG"}b.Md=b.Zb;b.cf=b.Aa}return b.za.join("")}
function va(a,b){function c(a){for(a=typeof a==="undefined"?!1:a;n.length&&(n[n.length-1]===" "||n[n.length-1]===D||n[n.length-1]===Z||a&&(n[n.length-1]==="\n"||n[n.length-1]==="\r"));)n.pop()}function d(a){return a.replace(/^\s\s*|\s\s*$/,"")}function f(){var a=J;J=!1;g();J=a}function g(a){m.Ob=!1;if(!J||!s(m.mode))if(a=typeof a==="undefined"?!0:a,m.La=!1,c(),n.length){if(n[n.length-1]!=="\n"||!a)T=!0,n.push("\n");Z&&n.push(Z);for(a=0;a<m.ka;a+=1)n.push(D);m.$&&m.ra&&(ha===" "?n.push("    "):n.push(D))}}
function h(){if(m.Ob)m.Ob=!1;else{var a=" ";n.length&&(a=n[n.length-1]);a!==" "&&a!=="\n"&&a!==D&&n.push(" ")}}function i(){T=!1;m.Ob=!1;n.push(u)}function j(){n.length&&n[n.length-1]===D&&n.pop()}function l(a){m&&C.push(m);m={nf:m?m.mode:"BLOCK",mode:a,$:!1,sa:!1,ra:!1,xc:!1,La:!1,wc:!1,Ob:!1,Rb:-1,ka:m?m.ka+(m.$&&m.ra?1:0):0,Sc:0}}function s(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"}function t(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"||a==="(EXPRESSION)"}function w(){aa=
m.mode==="DO_BLOCK";C.length>0&&(m=C.pop())}function y(a){for(var b=0;b<a.length;b++)if(d(a[b])[0]!="*")return!1;return!0}function v(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function A(){O=0;if(p>=H)return["","TK_EOF"];W=!1;var a=o.charAt(p);p+=1;if(J&&s(m.mode)){for(var b=0;v(a,F);){a==="\n"?(c(),n.push("\n"),T=!0,b=0):a==="\t"?b+=4:a!=="\r"&&(b+=1);if(p>=H)return["","TK_EOF"];a=o.charAt(p);p+=1}if(m.Rb===-1)m.Rb=b;if(T){var f;for(f=0;f<m.ka+1;f+=1)n.push(D);if(m.Rb!==-1)for(f=
0;f<b-m.Rb;f++)n.push(" ")}}else{for(;v(a,F);){a==="\n"&&(O+=U?O<=U?1:0:1);if(p>=H)return["","TK_EOF"];a=o.charAt(p);p+=1}if(ea&&O>1)for(f=0;f<O;f+=1)g(f===0),T=!0;W=O>0}if(v(a,K)){if(p<H)for(;v(o.charAt(p),K);)if(a+=o.charAt(p),p+=1,p===H)break;if(p!==H&&a.match(/^[0-9]+[Ee]$/)&&(o.charAt(p)==="-"||o.charAt(p)==="+"))return b=o.charAt(p),p+=1,f=A(),a+=b+f[0],[a,"TK_WORD"];if(a==="in")return[a,"TK_OPERATOR"];W&&q!=="TK_OPERATOR"&&q!=="TK_EQUALS"&&!m.La&&(ea||r!=="var")&&g();return[a,"TK_WORD"]}if(a===
"("||a==="[")return[a,"TK_START_EXPR"];if(a===")"||a==="]")return[a,"TK_END_EXPR"];if(a==="{")return[a,"TK_START_BLOCK"];if(a==="}")return[a,"TK_END_BLOCK"];if(a===";")return[a,"TK_SEMICOLON"];if(a==="/"){b="";f=!0;if(o.charAt(p)==="*"){p+=1;if(p<H)for(;!(o.charAt(p)==="*"&&o.charAt(p+1)&&o.charAt(p+1)==="/")&&p<H;){a=o.charAt(p);b+=a;if(a==="\r"||a==="\n")f=!1;p+=1;if(p>=H)break}p+=2;return f?["/*"+b+"*/","TK_INLINE_COMMENT"]:["/*"+b+"*/","TK_BLOCK_COMMENT"]}if(o.charAt(p)==="/"){for(b=a;o.charAt(p)!==
"\r"&&o.charAt(p)!=="\n";)if(b+=o.charAt(p),p+=1,p>=H)break;p+=1;W&&g();return[b,"TK_COMMENT"]}}if(a==="'"||a==='"'||a==="/"&&(q==="TK_WORD"&&v(r,["return","do"])||q==="TK_COMMENT"||q==="TK_START_EXPR"||q==="TK_START_BLOCK"||q==="TK_END_BLOCK"||q==="TK_OPERATOR"||q==="TK_EQUALS"||q==="TK_EOF"||q==="TK_SEMICOLON")){b=a;f=!1;var h=a;if(p<H)if(b==="/")for(a=!1;f||a||o.charAt(p)!==b;){if(h+=o.charAt(p),f?f=!1:(f=o.charAt(p)==="\\",o.charAt(p)==="["?a=!0:o.charAt(p)==="]"&&(a=!1)),p+=1,p>=H)return[h,"TK_STRING"]}else for(;f||
o.charAt(p)!==b;)if(h+=o.charAt(p),f=f?!1:o.charAt(p)==="\\",p+=1,p>=H)return[h,"TK_STRING"];p+=1;h+=b;if(b==="/")for(;p<H&&v(o.charAt(p),K);)h+=o.charAt(p),p+=1;return[h,"TK_STRING"]}if(a==="#"){if(n.length===0&&o.charAt(p)==="!"){for(h=a;p<H&&a!="\n";)a=o.charAt(p),h+=a,p+=1;n.push(d(h)+"\n");g();return A()}b="#";if(p<H&&v(o.charAt(p),M)){do a=o.charAt(p),b+=a,p+=1;while(p<H&&a!=="#"&&a!=="=");a!=="#"&&(o.charAt(p)==="["&&o.charAt(p+1)==="]"?(b+="[]",p+=2):o.charAt(p)==="{"&&o.charAt(p+1)==="}"&&
(b+="{}",p+=2));return[b,"TK_WORD"]}}if(a==="<"&&o.substring(p-1,p+3)==="<\!--")return p+=3,m.xc=!0,["<\!--","TK_COMMENT"];if(a==="-"&&m.xc&&o.substring(p-1,p+2)==="--\>")return m.xc=!1,p+=2,W&&g(),["--\>","TK_COMMENT"];if(v(a,I)){for(;p<H&&v(a+o.charAt(p),I);)if(a+=o.charAt(p),p+=1,p>=H)break;return a==="="?[a,"TK_EQUALS"]:[a,"TK_OPERATOR"]}return[a,"TK_UNKNOWN"]}var o,n,u,q,r,x,B,m,C,D,F,K,I,p,E,M,z,G,aa,W,T,O,Z="",b=b?b:{},P;if(b.Of!==e&&b.zc===e)b.zc=b.Of;b.Ce!==e&&(P=b.Ce?"expand":"collapse");
P=b.Mb?b.Mb:P?P:"collapse";B=b.pb?b.pb:2;var ha=b.Hd?b.Hd:" ",ea=typeof b.mf==="undefined"?!0:b.mf,U=typeof b.df==="undefined"?!1:b.df,la=b.zc==="undefined"?!1:b.zc,J=typeof b.bf==="undefined"?!1:b.bf;T=!1;var H=a.length;for(D="";B>0;)D+=ha,B-=1;for(;a&&(a[0]===" "||a[0]==="\t");)Z+=a[0],a=a.substring(1);o=a;B="";q="TK_START_EXPR";x=r="";n=[];aa=!1;F="\n\r\t ".split("");K="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");M="0123456789".split("");I="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(" ");
E="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(",");C=[];l("BLOCK");for(p=0;;){G=A();u=G[0];G=G[1];if(G==="TK_EOF")break;switch(G){case "TK_START_EXPR":if(u==="["){if(q==="TK_WORD"||r===")"){v(r,E)&&h();l("(EXPRESSION)");i();break}if(m.mode==="[EXPRESSION]"||m.mode==="[INDENTED-EXPRESSION]")if(x==="]"&&r===","){if(m.mode==="[EXPRESSION]")m.mode="[INDENTED-EXPRESSION]",J||(m.ka+=1);l("[EXPRESSION]");J||g()}else if(r==="["){if(m.mode==="[EXPRESSION]")m.mode=
"[INDENTED-EXPRESSION]",J||(m.ka+=1);l("[EXPRESSION]");J||g()}else l("[EXPRESSION]");else l("[EXPRESSION]")}else l("(EXPRESSION)");r===";"||q==="TK_START_BLOCK"?g():q==="TK_END_EXPR"||q==="TK_START_EXPR"||q==="TK_END_BLOCK"||r==="."||(q!=="TK_WORD"&&q!=="TK_OPERATOR"?h():B==="function"||B==="typeof"?la&&h():(v(r,E)||r==="catch")&&h());i();break;case "TK_END_EXPR":if(u==="]")if(J){if(r==="}"){j();i();w();break}}else if(m.mode==="[INDENTED-EXPRESSION]"&&r==="]"){w();g();i();break}w();i();break;case "TK_START_BLOCK":B===
"do"?l("DO_BLOCK"):l("BLOCK");P=="expand"?(q!=="TK_OPERATOR"&&(r==="return"||r==="="?h():g(!0)),i(),m.ka+=1):(q!=="TK_OPERATOR"&&q!=="TK_START_EXPR"?q==="TK_START_BLOCK"?g():h():s(m.nf)&&r===","&&(x==="}"?h():g()),m.ka+=1,i());break;case "TK_END_BLOCK":w();P=="expand"?r!=="{"&&g():q==="TK_START_BLOCK"?T?j():c():s(m.mode)&&J?(J=!1,g(),J=!0):g();i();break;case "TK_WORD":if(aa){h();i();h();aa=!1;break}if(u==="function"){if(m.$)m.ra=!0;if((T||r===";")&&r!=="{"){O=T?O:0;ea||(O=1);for(z=0;z<2-O;z++)g(!1)}}if(u===
"case"||u==="default"){r===":"?j():(m.ka--,g(),m.ka++);i();m.wc=!0;break}z="NONE";q==="TK_END_BLOCK"?v(u.toLowerCase(),["else","catch","finally"])?P=="expand"||P=="end-expand"?z="NEWLINE":(z="SPACE",h()):z="NEWLINE":q==="TK_SEMICOLON"&&(m.mode==="BLOCK"||m.mode==="DO_BLOCK")?z="NEWLINE":q==="TK_SEMICOLON"&&t(m.mode)?z="SPACE":q==="TK_STRING"?z="NEWLINE":q==="TK_WORD"?(r==="else"&&c(!0),z="SPACE"):q==="TK_START_BLOCK"?z="NEWLINE":q==="TK_END_EXPR"&&(h(),z="NEWLINE");v(u,E)&&r!==")"&&(z=r=="else"?"SPACE":
"NEWLINE");if(m.La&&q==="TK_END_EXPR")m.La=!1;if(v(u.toLowerCase(),["else","catch","finally"]))q!=="TK_END_BLOCK"||P=="expand"||P=="end-expand"?g():(c(!0),h());else if(z==="NEWLINE"){if(!((q==="TK_START_EXPR"||r==="="||r===",")&&u==="function"))if(u==="function"&&r=="new")h();else if(r==="return"||r==="throw")h();else if(q!=="TK_END_EXPR"){if((q!=="TK_START_EXPR"||u!=="var")&&r!==":")u==="if"&&B==="else"&&r!=="{"?h():(m.$=!1,m.ra=!1,g())}else if(v(u,E)&&r!=")")m.$=!1,m.ra=!1,g()}else s(m.mode)&&r===
","&&x==="}"?g():z==="SPACE"&&h();i();B=u;if(u==="var")m.$=!0,m.ra=!1,m.sa=!1;if(u==="if")m.La=!0;if(u==="else")m.La=!1;break;case "TK_SEMICOLON":i();m.$=!1;m.ra=!1;if(m.mode=="OBJECT")m.mode="BLOCK";break;case "TK_STRING":q==="TK_START_BLOCK"||q==="TK_END_BLOCK"||q==="TK_SEMICOLON"?g():q==="TK_WORD"&&h();i();break;case "TK_EQUALS":if(m.$)m.sa=!0;h();i();h();break;case "TK_OPERATOR":z=x=!0;if(m.$&&u===","&&t(m.mode))m.sa=!1;if(m.$&&u===",")if(m.sa){i();m.ra=!0;m.sa=!1;g();break}else m.sa=!1;if(r===
"return"||r==="throw"){h();i();break}if(u===":"&&m.wc){i();g();m.wc=!1;break}if(u==="::"){i();break}if(u===","){m.$?m.sa?(i(),g(),m.sa=!1):(i(),h()):q==="TK_END_BLOCK"&&m.mode!=="(EXPRESSION)"?(i(),m.mode==="OBJECT"&&r==="}"?g():h()):m.mode==="OBJECT"?(i(),g()):(i(),h());break}else v(u,["--","++","!"])||v(u,["-","+"])&&(v(q,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||v(r,E))?(z=x=!1,r===";"&&t(m.mode)&&(x=!0),q==="TK_WORD"&&v(r,E)&&(x=!0),m.mode==="BLOCK"&&(r==="{"||r===";")&&g()):
u==="."?x=!1:u===":"?m.Sc==0?(m.mode="OBJECT",x=!1):m.Sc-=1:u==="?"&&(m.Sc+=1);x&&h();i();z&&h();break;case "TK_BLOCK_COMMENT":x=u.split(/\x0a|\x0d\x0a/);if(y(x.slice(1))){g();n.push(x[0]);for(z=1;z<x.length;z++)g(),n.push(" "),n.push(d(x[z]))}else{x.length>1?(g(),c()):h();for(z=0;z<x.length;z++)n.push(x[z]),n.push("\n")}g();break;case "TK_INLINE_COMMENT":h();i();t(m.mode)?h():f();break;case "TK_COMMENT":W?g():h();i();f();break;case "TK_UNKNOWN":(r==="return"||r==="throw")&&h(),i()}x=r;q=G;r=u}return Z+
n.join("").replace(/[\n ]+$/,"")}if(typeof exports!=="undefined")exports.dg=va;var wa;wa=typeof Float32Array!="undefined"?Float32Array:typeof WebGLFloatArray!="undefined"?WebGLFloatArray:Array;function V(a){var b=new wa(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b}function pa(a,b,c){if(!c||a==c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c}
function xa(a,b,c){if(!c||a==c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c}function ta(a,b){a[0]*=b;a[1]*=b;a[2]*=b;return a}function ma(a,b,c){c||(c=a);var d=a[0],f=a[1],a=a[2],g=b[0],h=b[1],b=b[2];c[0]=f*b-a*h;c[1]=a*g-d*b;c[2]=d*h-f*g}function X(a){var b=a[0],c=a[1],a=a[2];return Math.sqrt(b*b+c*c+a*a)}function Y(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}
function $(a){var b=new wa(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b}function ya(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}
function za(a,b,c){c||(c=a);var d=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],l=a[6],s=a[7],t=a[8],w=a[9],y=a[10],v=a[11],A=a[12],o=a[13],n=a[14],a=a[15],u=b[0],q=b[1],r=b[2],x=b[3],B=b[4],m=b[5],C=b[6],D=b[7],F=b[8],K=b[9],I=b[10],p=b[11],E=b[12],M=b[13],z=b[14],b=b[15];c[0]=u*d+q*i+r*t+x*A;c[1]=u*f+q*j+r*w+x*o;c[2]=u*g+q*l+r*y+x*n;c[3]=u*h+q*s+r*v+x*a;c[4]=B*d+m*i+C*t+D*A;c[5]=B*f+m*j+C*w+D*o;c[6]=B*g+m*l+C*y+D*n;c[7]=B*h+m*s+C*v+D*a;c[8]=F*d+K*i+I*t+p*A;c[9]=F*f+K*j+I*w+p*o;c[10]=F*g+K*l+I*y+p*n;c[11]=
F*h+K*s+I*v+p*a;c[12]=E*d+M*i+z*t+b*A;c[13]=E*f+M*j+z*w+b*o;c[14]=E*g+M*l+z*y+b*n;c[15]=E*h+M*s+z*v+b*a}function Aa(a,b,c){c||(c=b);var d=b[0],f=b[1],g=b[2],b=b[3];c[0]=a[0]*d+a[4]*f+a[8]*g+a[12]*b;c[1]=a[1]*d+a[5]*f+a[9]*g+a[13]*b;c[2]=a[2]*d+a[6]*f+a[10]*g+a[14]*b;c[3]=a[3]*d+a[7]*f+a[11]*g+a[15]*b}function Ba(a,b){var c=b[0],d=b[1],f=b[2];a[12]=a[0]*c+a[4]*d+a[8]*f+a[12];a[13]=a[1]*c+a[5]*d+a[9]*f+a[13];a[14]=a[2]*c+a[6]*d+a[10]*f+a[14];a[15]=a[3]*c+a[7]*d+a[11]*f+a[15]}
function ka(a){var b=new wa(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b}function oa(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3]}function na(a,b,c){c||(c=a);var d=a[0],f=a[1],g=a[2],a=a[3],h=b[0],i=b[1],j=b[2],b=b[3];c[0]=d*b+a*h+f*j-g*i;c[1]=f*b+a*i+g*h-d*j;c[2]=g*b+a*j+d*i-f*h;c[3]=a*b-d*h-f*i-g*j;return c}
function Da(a){var b;b||(b=$());var c=a[0],d=a[1],f=a[2],g=a[3],h=c+c,i=d+d,j=f+f,a=c*h,l=c*i;c*=j;var s=d*i;d*=j;f*=j;h*=g;i*=g;g*=j;b[0]=1-(s+f);b[1]=l-g;b[2]=c+i;b[3]=0;b[4]=l+g;b[5]=1-(a+f);b[6]=d-h;b[7]=0;b[8]=c-i;b[9]=d+h;b[10]=1-(a+s);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}
function ra(a,b,c){var d;d||(d=a);var f=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(Math.abs(f)>=1)d!=a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]);else{var g=Math.acos(f),h=Math.sqrt(1-f*f);Math.abs(h)<0.0010?(d[0]=a[0]*0.5+b[0]*0.5,d[1]=a[1]*0.5+b[1]*0.5,d[2]=a[2]*0.5+b[2]*0.5,d[3]=a[3]*0.5+b[3]*0.5):(f=Math.sin((1-c)*g)/h,c=Math.sin(c*g)/h,d[0]=a[0]*f+b[0]*c,d[1]=a[1]*f+b[1]*c,d[2]=a[2]*f+b[2]*c,d[3]=a[3]*f+b[3]*c)}}var Ea;Ea||(Ea={});
(function(){function a(a){return a<10?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=i[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var f,i,y,v,A=g,o,n=d[a];n&&typeof n==="object"&&typeof n.toJSON==="function"&&(n=n.toJSON(a));typeof j==="function"&&(n=j.call(d,a,n));switch(typeof n){case "string":return b(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";g+=h;o=[];if(Object.prototype.toString.apply(n)==="[object Array]"){v=n.length;for(f=0;f<v;f+=1)o[f]=c(f,n)||"null";y=o.length===0?"[]":g?"[\n"+g+o.join(",\n"+g)+"\n"+A+"]":"["+o.join(",")+"]";g=A;return y}if(j&&typeof j==="object"){v=j.length;for(f=0;f<v;f+=1)typeof j[f]==="string"&&(i=j[f],(y=c(i,n))&&o.push(b(i)+(g?": ":":")+y))}else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(y=c(i,n))&&o.push(b(i)+(g?": ":":")+y);y=o.length===0?"{}":g?"{\n"+g+o.join(",\n"+
g)+"\n"+A+"}":"{"+o.join(",")+"}";g=A;return y}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":k},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,h,i={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof Ea.stringify!=="function")Ea.stringify=function(a,b,d){var f;h=g="";if(typeof d==="number")for(f=0;f<d;f+=1)h+=" ";else typeof d==="string"&&(h=d);if((j=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof Ea.parse!=="function")Ea.parse=function(a,b){function c(a,d){var f,g,h=a[d];if(h&&typeof h==="object")for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&(g=c(h,f),g!==e?h[f]=g:delete h[f]);return b.call(a,d,h)}var f,a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),typeof b==="function"?c({"":f},""):f;throw new SyntaxError("JSON.parse");}})();S=S||{};
S.qd=function(a,b,c){S.r.u("Tilt.Cube",this);a=a||1;b=b||1;c=c||1;this.R=new S.W([-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,0.5*a,0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,0.5*a,-0.5*b,-0.5*c,0.5*a,-0.5*b,0.5*c,-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*
b,0.5*c,-0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,-0.5*c],3);this.Sa=new S.W([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],2);this.la=new S.fb([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23])};S.qd.prototype={e:function(){S.H(this)}};S=S||{};
S.rd=function(a,b,c){S.r.u("Tilt.CubeWireframe",this);a=a||1;b=b||1;c=c||1;this.R=new S.W([-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c],3);this.la=new S.fb([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,5,1,4,2,7,3,6])};S.rd.prototype={e:function(){S.H(this)}};S=S||{};S.vd=function(){S.r.u("Tilt.Rectangle",this);this.R=new S.W([0,0,1,0,0,1,1,1],2);this.Sa=new S.W([0,0,1,0,0,1,1,1],2)};
S.vd.prototype={e:function(){S.H(this)}};S=S||{};S.wd=function(){S.r.u("Tilt.RectangleWireframe",this);this.R=new S.W([0,0,1,0,1,1,0,1],2)};S.wd.prototype={e:function(){S.H(this)}};S=S||{};S.Jb=function(a){S.r.u("Tilt.Mesh",this);for(var b in a)this[b]!=="draw"&&(this[b]=a[b]);if("string"===typeof this.color)this.color=S.i.xa(this.color);else if("undefined"===typeof this.color)this.color=[1,1,1,1];if("undefined"===typeof this.Nb)this.Nb=S.aa.TRIANGLES;if("function"===typeof a.F)this.F=a.F};
S.Jb.prototype={F:function(){var a=S.aa,b=this.R,c=this.Sa,d=this.la,f=this.color,g=this.Yb,h=this.Nb;g?a.he(b,c,f,g):a.wb(b,f);d?a.Ed(h,d):a.Ja(h,b.da)},e:function(){S.H(this)}};S=S||{};
S.Jb.prototype.save=function(a,b){var c=[],d=[],f=this.R.S,g=this.Sa.S,h=this.la.S,i,j;c.push("mtllib "+b+".mtl","usemtl webpage");d.push("newmtl webpage","illum 2","Ka 1.000 1.000 1.000","Kd 1.000 1.000 1.000","Ks 0.000 0.000 0.000","map_Ka "+b+".png","map_Kd "+b+".png","map_Ks "+b+".png");for(i=0,j=f.length;i<j;i+=3)c.push("v "+f[i]/100+" "+f[i+1]/-100+" "+f[i+2]/100);for(i=0,j=g.length;i<j;i+=2)c.push("vt "+g[i]+" "+(1-g[i+1]));for(i=0,j=h.length;i<j;i+=3)c.push("f "+(h[i]+1)+"/"+(h[i]+1)+" "+
(h[i+1]+1)+"/"+(h[i+1]+1)+" "+(h[i+2]+1)+"/"+(h[i+2]+1));f=S.va.separator;S.va.save(c.join("\n"),a+f+b+".obj");S.va.save(d.join("\n"),a+f+b+".mtl")};S=S||{};
S.nc=function(a,b){S.r.u("Tilt.Renderer",this);b=b||{};this.canvas=a;this.w=this.Cd(a,{antialias:!0,stencil:!0});S.qc();S.D=this.w;S.aa=this;if("undefined"!==typeof this.w&&this.w!==k){if(this.TRIANGLES=this.w.TRIANGLES,this.TRIANGLE_STRIP=this.w.TRIANGLE_STRIP,this.TRIANGLE_FAN=this.w.TRIANGLE_FAN,this.LINES=this.w.LINES,this.LINE_STRIP=this.w.LINE_STRIP,this.LINE_LOOP=this.w.LINE_LOOP,this.POINTS=this.w.POINTS,this.COLOR_BUFFER_BIT=this.w.COLOR_BUFFER_BIT,this.DEPTH_BUFFER_BIT=this.w.DEPTH_BUFFER_BIT,
this.STENCIL_BUFFER_BIT=this.w.STENCIL_BUFFER_BIT,this.w.clearColor(0,0,0,1),this.w.clearDepth(1),this.w.clearStencil(0),"function"===typeof b.onsuccess)b.onsuccess()}else if(S.ha.log(S.ca.get("initWebGL.error")),"function"===typeof b.Pa){b.Pa();return}this.width=a.width;this.height=a.height;this.Kc=[];this.J=ya($());this.ea=ya($());this.je=[0,0,0,0];this.md=[1,1,1,1];this.ec=[1,1,1,1];this.Hb=[0,0,0,1];this.jd=1;this.Ee=new S.Kb(S.ba.od.xb,S.ba.od.mb);this.Rf=new S.Kb(S.ba.Ea.xb,S.ba.Ea.mb);this.ic=
new S.vd;this.te=new S.wd;this.Tf=new S.qd;this.Uf=new S.rd;this.hc=0;this.cc=k;this.lb=this.Me=this.Fd=this.elapsedTime=0;this.origin();this.Mc();this.Dd()};
S.nc.prototype={clear:function(a,b,c,d){var f=this.je,g=this.w;if(f[0]!==a||f[1]!==b||f[2]!==c||f[3]!==d)f[0]=a,f[1]=b,f[2]=c,f[3]=d,g.clearColor(a,b,c,d),a*=255,b*=255,c*=255,d*=255,this.canvas.setAttribute("style",["background: rgba(",a,", ",b,", ",c,", ",d,"); width: 100%; height: 100%;"].join(""));g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT|g.STENCIL_BUFFER_BIT)},background:function(a){a="string"===typeof a?S.i.xa(a):"undefined"===typeof a?[0,0,0,1]:"number"===typeof a?[a/255,a/255,a/255,1]:
[a[0]/255,a[1]/255,a[2]/255,a[3]/255];this.clear(a[0],a[1],a[2],a[3])},Mc:function(){var a=this.width,b=this.height,c=a/2,d=b/2,f=d/Math.tan(S.i.sf(45)/2),g=f/10,h=g*Math.tan(45*Math.PI/360),a=h*(a/b),b=-a,i=-h*-1;h*=-1;var j=f*10,l=this.ea;l||(l=$());var s=a-b,t=h-i,w=j-g;l[0]=g*2/s;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=g*2/t;l[6]=0;l[7]=0;l[8]=(a+b)/s;l[9]=(h+i)/t;l[10]=-(j+g)/w;l[11]=-1;l[12]=0;l[13]=0;l[14]=-(j*g*2)/w;l[15]=0;Ba(this.ea,[-c,-d,-f]);ya(this.J);this.pa(!0)},gf:function(){var a=this.width,
b=this.height,c=this.ea;c||(c=$());var d=a-0,f=0-b;c[0]=2/d;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2/f;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=-1.0E-6;c[11]=0;c[12]=-(0+a)/d;c[13]=-(0+b)/f;c[14]=0;c[15]=1;Ba(this.ea,[0,0,-999999]);ya(this.J);this.pa(!1)},Oc:function(){this.Kc.push($(this.J))},Nc:function(){if(this.Kc.length>0)this.J=this.Kc.pop()},origin:function(){ya(this.J)},transform:function(a){za(this.J,a)},translate:function(a,b,c){Ba(this.J,[a,b,c||0])},rotate:function(a,b,c,d){var f=this.J,d=[b,c,d],
g,b=d[0],c=d[1],d=d[2],h=Math.sqrt(b*b+c*c+d*d);if(h){h!=1&&(h=1/h,b*=h,c*=h,d*=h);var i=Math.sin(a),j=Math.cos(a),l=1-j,a=f[0],h=f[1],s=f[2],t=f[3],w=f[4],y=f[5],v=f[6],A=f[7],o=f[8],n=f[9],u=f[10],q=f[11],r=b*b*l+j,x=c*b*l+d*i,B=d*b*l-c*i,m=b*c*l-d*i,C=c*c*l+j,D=d*c*l+b*i,F=b*d*l+c*i,b=c*d*l-b*i,c=d*d*l+j;g?f!=g&&(g[12]=f[12],g[13]=f[13],g[14]=f[14],g[15]=f[15]):g=f;g[0]=a*r+w*x+o*B;g[1]=h*r+y*x+n*B;g[2]=s*r+v*x+u*B;g[3]=t*r+A*x+q*B;g[4]=a*m+w*C+o*D;g[5]=h*m+y*C+n*D;g[6]=s*m+v*C+u*D;g[7]=t*m+A*
C+q*D;g[8]=a*F+w*b+o*c;g[9]=h*F+y*b+n*c;g[10]=s*F+v*b+u*c;g[11]=t*F+A*b+q*c}},scale:function(a,b,c){var d=this.J,c=[a,b,c||0],a=c[0],b=c[1],c=c[2];d[0]*=a;d[1]*=a;d[2]*=a;d[3]*=a;d[4]*=b;d[5]*=b;d[6]*=b;d[7]*=b;d[8]*=c;d[9]*=c;d[10]*=c;d[11]*=c},na:function(a){this.md=S.i.xa(a)},fill:function(a){this.ec=S.i.xa(a)},stroke:function(a){this.Hb=S.i.xa(a)},ff:function(){var a=this.Hb;a[0]=0;a[1]=0;a[2]=0;a[3]=0},tb:function(a){if(this.jd!==a)this.jd=a,this.w.lineWidth(a)},Ad:function(a){var b=this.w;"alpha"===
a?(b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA)):"add"===a||"additive"===a?(b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE)):b.disable(b.BLEND)},pa:function(a){var b=this.w;a?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST)},Pf:function(a){var b=this.w;a?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST)},Dd:function(){this.na("#fff");this.fill("#fff");this.stroke("#000");this.tb(1);this.pa(!0);this.Pf(!1);this.Ad("alpha")},wb:function(a,b){var c=this.Ee;c.Tc();c.Ga("vertexPosition",
a);c.Fa("mvMatrix",this.J);c.Fa("projMatrix",this.ea);c.pc("color",b)},he:function(a,b,c,d){var f=this.Rf;f.Tc();f.Ga("vertexPosition",a);f.Ga("vertexTexCoord",b);f.Fa("mvMatrix",this.J);f.Fa("projMatrix",this.ea);f.pc("color",c);f.bindTexture("sampler",d)},qf:function(a,b,c,d){var f=this.ec,g=this.Hb,a=new S.W([a[0],a[1],a[2],b[0],b[1],b[2],c[0],c[1],c[2],d[0],d[1],d[2]],3);f[3]&&(this.wb(a,f),this.Ja(this.TRIANGLE_FAN,a.da));g[3]&&(this.wb(a,g),this.Ja(this.LINE_LOOP,a.da));a.e()},rect:function(a,
b,c,d){var f=this.ec,g=this.Hb,h=this.ic.R,i=this.te.R;"center"===this.ic.pg&&(a-=c/2,b-=d/2);this.Oc();this.translate(a,b,0);this.scale(c,d,1);f[3]&&(this.wb(h,f),this.Ja(this.TRIANGLE_STRIP,h.da));g[3]&&(this.wb(i,g),this.Ja(this.LINE_LOOP,i.da));this.Nc()},Gd:function(a,b,c,d,f,g){if(a.loaded){var h=this.ic,i=this.md,j=h.R,g=g||h.Sa;if("undefined"===typeof d||"undefined"===typeof f)d=a.width,f=a.height;"center"===h.bg&&(b-=d*0.5,c-=f*0.5);i[3]&&(this.Oc(),this.translate(b,c,0),this.scale(d,f,1),
this.he(j,g,i,a),this.Ja(this.TRIANGLE_STRIP,j.da),this.Nc())}},Ja:function(a,b){this.w.drawArrays(a,0,b)},Ed:function(a,b){var c=this.w;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.n);c.drawElements(a,b.da,c.UNSIGNED_SHORT,0)},Cd:function(a,b){var c=["experimental-webgl","webgl","webkit-3d","moz-webgl"],d,f,g;for(f=0,g=c.length;f<g;++f){try{d=a.getContext(c[f],b)}catch(h){}if(d)break}return d},loop:function(a){window.uf(a);this.Mc();this.cc=(new Date).getTime();if(this.hc!==0)this.lb=this.cc-this.hc,this.Me=
1E3/this.lb;this.hc=this.cc;this.elapsedTime+=this.lb;this.Fd++},e:function(){S.qc();S.H(this)}};window.uf=window.rg||window.zg||window.hg||window.jg||window.ig||function(a){window.setTimeout(a,1E3/60)};S=S||{};S.ba={};S.ba.od={xb:"attribute vec3 vertexPosition;\nuniform mat4 mvMatrix;\nuniform mat4 projMatrix;\nvoid main(void) {\n    gl_Position = projMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n}",mb:"#ifdef GL_ES\nprecision lowp float;\n#endif\nuniform vec4 color;\nvoid main(void) {\n    gl_FragColor = color;\n}"};
S.ba.Ea={xb:"attribute vec3 vertexPosition;\nattribute vec2 vertexTexCoord;\nuniform mat4 mvMatrix;\nuniform mat4 projMatrix;\nvarying vec2 texCoord;\nvoid main(void) {\n  gl_Position = projMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n  texCoord = vertexTexCoord;\n}",mb:"#ifdef GL_ES\nprecision lowp float;\n#endif\nuniform vec4 color;\nuniform sampler2D sampler;\nvarying vec2 texCoord;\nvoid main(void) {\n  vec4 texture = texture2D(sampler, texCoord);\n  gl_FragColor = color * texture;\n}"};
S=S||{};S.oa=function(a){S.r.u("Tilt.Container",this);a=a||{};this.j=a.j||!1;this.disabled=a.disabled||!1;this.standby=a.standby||!1;this.ie=a.background||k;this.m=a.x||0;this.l=a.y||0;this.q=a.width||0;this.k=a.height||0;this.ua=a.kg||[0,0];a.elements instanceof Array&&a.elements.forEach(function(a){this.push(a)}.bind(this));S.b.push(this)};S.oa.prototype=[];Q=S.oa.prototype;Q.N=function(a,b){this.m=a;this.l=b};Q.Y=function(a,b){this.q=a;this.k=b};Q.fa=ja("m");Q.Rc=ja("q");Q.Qc=ja("k");Q.X=L("m");
Q.t=L("l");Q.Ka=L("q");Q.tc=L("k");Q.update=function(a,b){var c,d,f;for(d=0,f=this.length;d<f;d++)c=this[d],"function"===typeof c.update&&!c.j&&!c.disabled&&c.update(a,b)};
Q.F=function(a,b){var b=b||S.aa,c;c=this.ie;var d=this.m,f=this.l,g=this.q,h=this.k,i=this.ua,j=d+i[0],i=f+i[1],l,s,t,w,y,v,A,o,n,u;c!==k&&(b.fill(c),b.ff(),b.rect(d,f,g||b.width,h||b.height));b.Oc();b.translate(j,i,0);for(n=0,u=this.length;n<u;n++)if(c=this[n],c.rc=!1,c.re=d,c.se=f,c.Xf=g,c.Wf=h,!c.j)if(g===0||h===0)c.F(a,b),c.rc=!0;else if(l=c.s||[1,1,1,1],s=l[0]+j,t=l[1]+i,w=l[2],y=l[3],l=s,v=t,s+=w,t+=y,w=d,y=f,A=d+g,o=f+h,l>w&&s<A&&v>y&&t<o)c.F(a,b),c.rc=!0;b.Nc()};
Q.e=function(){S.b.splice(S.b.indexOf(this),1);S.H(this)};S=S||{};
S.xd=function(a){S.r.u("Tilt.ScrollContainer",this);S.b.push(this);this.view=new S.oa(a);this.view.standby=!0;this.scrollbars=new S.oa;this.top=a.ae[0]||0;this.bottom=a.ae[1]||Number.MAX_VALUE;this.view.ua[1]=this.top;var b=new S.h(a.top,{x:this.view.m-25,y:this.view.l-5,width:32,height:30,fill:a.top?k:"#f00a",padding:a.top?a.top.g:[0,0,0,0],onmousedown:function(){window.clearInterval(this.cb);window.clearInterval(this.bb);window.clearInterval(this.ab);var a=S.b,b=this.view,c=b.ua;this.bb=window.setInterval(function(){c[1]=
S.i.G(c[1]+5,this.top,-this.bottom+b.k);a.v();a.T||(c=b=a=k,window.clearInterval(this.bb))}.bind(this),1E3/60)}.bind(this)}),c=new S.h(a.bottom,{x:this.view.m-25,y:this.view.l+this.view.k-25,width:32,height:30,fill:a.bottom?k:"#0f0a",padding:a.bottom?a.bottom.g:[0,0,0,0],onmousedown:function(){window.clearInterval(this.cb);window.clearInterval(this.bb);window.clearInterval(this.ab);var a=S.b,b=this.view,c=b.ua;this.ab=window.setInterval(function(){c[1]=S.i.G(c[1]-5,this.top,-this.bottom+b.k);a.v();
a.T||(c=b=a=k,window.clearInterval(this.ab))}.bind(this),1E3/60)}.bind(this)}),a=new S.h(a.reset,{x:this.view.m-25,y:this.view.l+this.view.k-50,width:32,height:30,fill:a.reset?k:"#0f0b",padding:a.reset?a.reset.g:[0,0,0,0],onmousedown:function(){window.clearInterval(this.cb);window.clearInterval(this.bb);window.clearInterval(this.ab);var a=S.b,b=this.view,c=b.ua;this.cb=window.setInterval(function(){c[1]-=(c[1]-this.top)/10;a.v();Math.abs(c[1]-this.top)<0.1&&(c=b=a=k,window.clearInterval(this.cb))}.bind(this),
1E3/60)}.bind(this)});this.view.onmousescroll=function(a){window.clearInterval(this.cb);window.clearInterval(this.bb);window.clearInterval(this.ab);var b=S.b,c=this.view,h=c.ua;h[1]=S.i.G(h[1]-a*2,this.top,-this.bottom+c.k);b.v()}.bind(this);this.scrollbars.push(b,c,a);a=c=b=k};S.xd.prototype={update:function(){this.scrollbars.j=this.view.j;this.scrollbars.disabled=this.view.disabled},F:ba(),e:function(){S.b.splice(S.b.indexOf(this),1);S.H(this)}};S=S||{};
S.h=function(a,b){S.r.u("Tilt.Button",this);b=b||{};this.j=b.j||!1;this.disabled=b.disabled||!1;this.onmousedown=b.onmousedown||e;this.onmouseup=b.onmouseup||e;this.onclick=b.onclick||e;this.c=a||{m:-1,l:-1,q:-1,k:-1};this.c.m=b.x||this.c.m;this.c.l=b.y||this.c.l;this.c.q=b.width||this.c.q;this.c.k=b.height||this.c.k;this.c.disabled=!0;this.g=b.padding||[0,0,0,0];this.Cb=b.fill||k;this.lc=b.stroke||k;this.s=[this.c.m+this.g[0],this.c.l+this.g[1],this.c.q-this.g[0]-this.g[2],this.c.k-this.g[1]-this.g[3]]};
S.h.prototype={N:function(a,b){"function"===typeof this.c.N?this.c.N(a,b):(this.c.m=a,this.c.l=b);this.s[0]=a+this.g[0];this.s[1]=b+this.g[1]},Y:function(a,b){"function"===typeof this.c.Y?this.c.Y(a,b):(this.c.q=a,this.c.k=b);this.s[2]=a-this.g[0]-this.g[2];this.s[3]=b-this.g[1]-this.g[3]},fa:function(a){this.N(a,this.c.l)},Rc:function(a){this.Y(a,this.c.k)},Qc:function(a){this.Y(this.c.q,a)},de:function(a){var b=this.c.m,c=this.c.l,d=this.c.q,f=this.c.k,g=this.c.g;this.c=a;this.c.g=g;this.c.N(b,
c);this.c.Y(d,f);this.c.disabled=!0},Xb:ja("Cb"),X:function(){return this.c.m},t:function(){return this.c.l},Ka:function(){return this.c.q},tc:function(){return this.c.k},F:function(a,b){b=b||S.aa;"undefined"!==typeof this.c.mc&&this.c.F(b);var c,d,f=this.Cb,g=this.lc;if(f||g)c=this.s,d=this.g,b.fill(f||"#fff0"),b.stroke(g||"#0000"),b.rect(c[0]-d[0],c[1]-d[1],c[2]+d[0]+d[2],c[3]+d[1]+d[3]);S.b.He&&(b.fill("#fff2"),b.stroke("#00f"),b.rect(this.c.m,this.c.l,this.c.q,this.c.k),this.disabled||(b.fill("#0f04"),
b.rect(this.s[0],this.s[1],this.s[2],this.s[3])))},e:function(){S.H(this)}};S=S||{};
S.Da=function(a,b){S.r.u("Tilt.Slider",this);b=b||{};this.j=b.j||!1;this.disabled=b.disabled||!1;this.onmousedown=b.onmousedown||e;this.onmouseup=b.onmouseup||e;this.onclick=b.onclick||e;this.c=new S.z(a.mc,a.Gb,{padding:a.g,na:a.ld});this.c.m=b.x||this.c.m;this.c.l=b.y||this.c.l;this.c.q=b.width||this.c.q;this.c.k=b.height||this.c.k;this.m=this.c.m;this.l=this.c.l;this.kc=b.size||100;this.Zc=b.direction||0;this.s=[this.c.m+this.c.g[0],this.c.l+this.c.g[1],this.c.q-this.c.g[2],this.c.k-this.c.g[3]];
this.Q(b.value||0)};
S.Da.prototype={N:function(a,b){this.m=a;this.l=b;this.s[0]=a+this.c.g[0];this.s[1]=b+this.c.g[1];this.Q(this.U)},fa:function(a){this.N(a,this.l);this.Q(this.U)},Y:function(a){this.kc=a;this.Q(this.U)},Q:function(a){var b=this.c,c=this.m,d=this.l,f=this.kc,g=this.Zc;this.U=S.i.G(a+0.0010,0,100);g===0?(a=S.i.map(this.U,0,100,c,c+f),b.N(a,d),this.s[0]=a+b.g[0]):(a=S.i.map(this.U,0,100,d,d+f),b.N(c,a),this.s[1]=a+b.g[1])},X:L("m"),t:L("l"),update:function(){var a,b,c,d,f,g,h;if(this.T)this.gd=!0;else if(!S.b.T)this.gd=
!1;if(this.gd)a=this.c,b=this.re,c=this.se,d=this.m,f=this.l,g=this.kc,h=this.Zc,h===0?(d+=b,g=d+g,h=S.i.G(S.b.Jc-a.q*0.5,d,g),b=h-b,a.N(b,f),this.U=S.i.map(h,d,g,0,100),this.s[0]=b+a.g[0]):(f+=c,h=S.i.G(S.b.Vf-a.k*0.5,f,f+g),b=h-c,a.N(d,b),this.U=S.i.map(b,f,f+g,0,100),this.s[1]=b+a.g[1])},F:function(a,b){b=b||S.aa;this.c.F(b)},e:function(){S.H(this)}};S=S||{};
S.z=function(a,b,c){S.r.u("Tilt.Sprite",this);c=c||{};this.j=c.j||!1;this.disabled=c.disabled||!1;this.onmousedown=c.onmousedown||e;this.onmouseup=c.onmouseup||e;this.onclick=c.onclick||e;this.mc=a;this.Gb=b||[0,0,a.width,a.height];this.m=c.x||0;this.l=c.y||0;this.q=c.width||this.Gb[2];this.k=c.height||this.Gb[3];this.g=c.padding||[0,0,0,0];this.ld=c.na||k;this.oe=c.pa||!1;this.s=[this.m+this.g[0],this.l+this.g[1],this.q-this.g[0]-this.g[2],this.k-this.g[0]-this.g[3]];this.Ib=k};
S.z.prototype={N:function(a,b){this.m=a;this.l=b;this.s[0]=a+this.g[0];this.s[1]=b+this.g[1]},Y:function(a,b){this.q=a;this.k=b;this.s[2]=a-this.g[0]-this.g[2];this.s[3]=b-this.g[1]-this.g[3]},fa:function(a){this.N(a,this.l)},Rc:function(a){this.Y(a,this.k)},Qc:function(a){this.Y(this.q,a)},X:L("m"),t:L("l"),Ka:L("q"),tc:L("k"),F:function(a,b){var b=b||S.aa,c=this.Gb,d=this.mc,f=this.m,g=this.l,h=this.q,i=this.k,j=this.oe,l=this.ld;if(this.Ib===k&&d.loaded)this.Ib=new S.W([c[0]/d.width,c[1]/d.height,
(c[0]+c[2])/d.width,c[1]/d.height,c[0]/d.width,(c[1]+c[3])/d.height,(c[0]+c[2])/d.width,(c[1]+c[3])/d.height],2);l!==k&&b.na(l);j?(b.pa(!0),b.Gd(d,f,g,h,i,this.Ib),b.pa(!1)):b.Gd(d,f,g,h,i,this.Ib);l!==k&&b.na("#fff");S.b.He&&(b.fill("#fff2"),b.stroke("#f00"),b.rect(this.m,this.l,this.q,this.k),this.disabled||(b.fill("#0f04"),b.rect(this.s[0],this.s[1],this.s[2],this.s[3])))},e:function(){S.H(this)}};S=S||{};S.b=[];S.b.Jc=0;S.b.Sd=0;S.b.T=!1;S.b.ef=0;S.b.Ld=[];S.b.v=ba();
S.b.F=function(a){var b=S.aa,c,d,f;b.Dd();b.gf();for(c=0,d=this.length;c<d;c++)f=this[c],f.j||(f.disabled||f.update(a,b),f.F(a,b))};S.b.lf=function(a){if(!(a.Dc||this.indexOf(a)===-1)){for(var b=0,c=this.length;b<c;b++)this[b].cd=this[b].disabled,this[b].disabled=!0;a.Dc=!0;a.j=!1;a.disabled=!1;this.v()}};S.b.Ie=function(a){if(a.Dc&&this.indexOf(a)!==-1){for(var b=0,c=this.length;b<c;b++)this[b].disabled=this[b].cd,delete this[b].cd;a.Dc=!1;a.j=!0;a.disabled=!0;this.v()}};
S.b.Ec=function(a,b,c){this.T=!0;this.ma=!1;this.Ya("onmousedown",a,b,c)};S.b.Ic=function(a,b,c){this.ma=this.T=!1;this.Ya("onmouseup",a,b,c)};S.b.click=function(a,b){this.Ya("onclick",a,b)};S.b.Je=function(a,b){this.Ya("ondoubleclick",a,b)};S.b.Fc=function(a,b){this.Jc=a;this.Sd=b};S.b.Hc=function(a){this.ma=!1;this.ef=a;this.Ya("onmousescroll",a)};S.b.ma=ba();S.b.Gc=ba();S.b.Ac=function(a){this.Ld[a]=!0;this.$c("onkeydown",a)};S.b.Bc=function(a){this.Ld[a]=!1;this.$c("onkeyup",a)};
S.b.Ya=function(a,b,c,d){var f,g,h,i,j,l,s,t,w,y,v,A,o=this.Jc,n=this.Sd;for(f=0,h=this.length;f<h;f++)if(j=this[f],!j.j&&!j.disabled){s=j.m||0;g=j.l||0;i=j.q||0;t=j.k||0;if(j.standby&&o>s&&o<s+i&&n>g&&n<g+t)this.ma=!0,l=j[a],"function"===typeof l&&l(b,c,d);i=j.ua||[0,0];s+=i[0];t=g+i[1]+2;for(g=0,i=j.length;g<i;g++)if(l=j[g],!l.j&&!l.disabled&&l.rc){w=l.s||[-1,-1,-1,-1];y=w[0]+s;v=w[1]+t;A=w[2];w=w[3];if("onmouseup"===a)l.T=!1;if(o>y&&o<y+A&&n>v&&n<v+w){if("onmousedown"===a)l.T=!0;this.ma=!0;l=l[a];
"function"===typeof l&&l(b,c,d)}}}};S.b.$c=function(a,b){var c,d,f,g,h,i;for(c=0,f=this.length;c<f;c++)if(h=this[c],!h.j&&!h.disabled){h.standby&&(i=h[a],"function"===typeof i&&i(b));for(d=0,g=h.length;d<g;d++)i=h[d],!i.j&&!i.disabled&&(i=i[a],"function"===typeof i&&i(b))}};S.r.u("Tilt.UI",S.b);S=S||{};
S.ha={alert:function(a,b){var c;"undefined"===typeof b&&(b="undefined");try{c=Cc["@mozilla.org/embedcomp/prompt-service;1"].getService(Ci.nsIPromptService),c.alert(k,a,b)}catch(d){window.alert(b)}},log:function(a){var b;"undefined"===typeof a&&(a="undefined");try{b=Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService),b.logStringMessage(a)}catch(c){window.alert(a)}},error:function(a,b,c,d,f,g,h){var i,j;"undefined"===typeof a&&(a="undefined");try{i=Cc["@mozilla.org/consoleservice;1"].getService(Ci.nsIConsoleService),
j=Cc["@mozilla.org/scripterror;1"].createInstance(Ci.nsIScriptError),j.init(a,b,c,d,f,g,h),i.logMessage(j)}catch(l){window.alert(a)}}};S.ca={Bd:"tilt-string-bundle",get:function(a){if("undefined"===typeof a)return"undefined";var b=document.getElementById(this.Bd);return b?b.getString(a):a},sc:function(a,b){if("undefined"===typeof a)return"undefined";if("undefined"===typeof b)return a;var c=document.getElementById(this.Bd);return c?c.Zf(a,b):[a,b].join(" ")}};S=S||{};
S.K={kb:e,Ha:e,qb:function(a,b,c,d){if("undefined"===typeof this.kb)this.kb=document;if("undefined"===typeof this.Ha)this.Ha=document.body;var f=this.kb,g=this.Ha;if("undefined"===typeof f||f===k||"undefined"===typeof g||g===k)return k;f=f.createElement("canvas");f.setAttribute("style","width: 100%; height: 100%;");f.width=a;f.height=b;f.id=d;c&&this.append(f,g);return f},cg:function(){var a=this.qb(window.innerWidth,window.innerHeight,!0);this.Ha.setAttribute("style","background: #000; margin: 0px; padding: 0px; overflow: hidden;");
return a},append:function(a,b){b.appendChild(a)},remove:function(a){a.parentNode.removeChild(a)},fe:function(a,b,c,d){var f=this.top=this.left=this.vb=0,g=0,h=function(b,d){var l,s,t,w;for(l=0,s=b.childNodes.length;l<s;l++)t=b.childNodes[l],d>f&&(f=d),g++,this.vb++,a(t,d,g,this.vb,this.left,this.top),h(t,d+1),c&&t.localName==="iframe"&&(w=S.K.uc(t),this.left+=w.x,this.top+=w.y,h(t.contentDocument,d+1),this.left-=w.x,this.top-=w.y)}.bind(this);try{"function"===typeof a&&h(d||window.content.document,
0),"function"===typeof b&&b(f,g)}finally{d=k}},Oe:function(a){var b,c={width:a.innerWidth+a.scrollMaxX,height:a.innerHeight+a.scrollMaxY};this.fe(function(a){b=this.uc(a);c.width=Math.max(c.width,b.x||0+b.width||0);c.height=Math.max(c.height,b.y||0+b.height||0)}.bind(this),k,a.document);return c},uc:function(a){if(a.nodeType!==1)return{x:0,y:0,width:0,height:0};var b,c,d,f;try{if(a.localName==="head"||a.localName==="body")throw new Exception;d=a.getBoundingClientRect();b=window.content.pageXOffset;
c=window.content.pageYOffset;return{x:d.left+b,y:d.top+c,width:d.width,height:d.height}}catch(g){c=b=0;d=a.clientWidth;f=a.clientHeight;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}else{if(a.x)b=a.x;if(a.y)c=a.y}return{x:b,y:c,width:d,height:f}}finally{}},$f:function(a){var b;a.nodeType===1?b="ELEMENT_NODE":a.nodeType===2?b="ATTRIBUTE_NODE":a.nodeType===3?b="TEXT_NODE":a.nodeType===4?b="CDATA_SECTION_NODE":a.nodeType===5?b="ENTITY_REFERENCE_NODE":a.nodeType===6?b="ENTITY_NODE":
a.nodeType===7?b="PROCESSING_INSTRUCTION_NODE":a.nodeType===8?b="COMMENT_NODE":a.nodeType===9?b="DOCUMENT_NODE":a.nodeType===10?b="DOCUMENT_TYPE_NODE":a.nodeType===11?b="DOCUMENT_FRAGMENT_NODE":a.nodeType===12&&(b="NOTATION_NODE");return b},Ne:function(a){var b=[],c,d;for(c=0,d=a.length;c<d;c++)b.push(a[c].name+' = "'+a[c].value+'"');return b.join("\n")+"\n"},Pe:function(a){var b=[],c,d,f;for(f=0;f<a.length;f++)c=a[f],d=a.getPropertyValue(c),c=c+": "+d+";",'background-attachment: scroll;\nbackground-clip: border-box;\nbackground-color: transparent;\nbackground-image: none;\nbackground-origin: padding-box;\nbackground-position: 0% 0%;\nbackground-repeat: repeat;\nbackground-size: auto auto;\nborder-bottom-color: rgb(0, 0, 0);\nborder-bottom-left-radius: 0px;\nborder-bottom-right-radius: 0px;\nborder-bottom-style: none;\nborder-bottom-width: 0px;\nborder-collapse: separate;\nborder-left-color: rgb(0, 0, 0);\nborder-left-style: none;\nborder-left-width: 0px;\nborder-right-color: rgb(0, 0, 0);\nborder-right-style: none;\nborder-right-width: 0px;\nborder-spacing: 0px 0px;\nborder-top-color: rgb(0, 0, 0);\nborder-top-left-radius: 0px;\nborder-top-right-radius: 0px;\nborder-top-style: none;\nborder-top-width: 0px;\nbottom: auto;\nbox-shadow: none;\ncaption-side: top;\nclear: none;\nclip: auto;\ncolor: rgb(0, 0, 0);\ncontent: none;\ncounter-increment: none;\ncounter-reset: none;\ncursor: auto;\ndirection: ltr;\ndisplay: block;\nempty-cells: -moz-show-background;\nfloat: none;\nfont-family: serif;\nfont-size: 16px;\nfont-size-adjust: none;\nfont-stretch: normal;\nfont-style: normal;\nfont-variant: normal;\nfont-weight: 400;\nheight: 0px;\nime-mode: auto;\nleft: auto;\nletter-spacing: normal;\nline-height: 19.2px;\nlist-style-image: none;\nlist-style-position: outside;\nlist-style-type: disc;\nmargin-bottom: 8px;\nmargin-left: 8px;\nmargin-right: 8px;\nmargin-top: 8px;\nmarker-offset: auto;\nmax-height: none;\nmax-width: none;\nmin-height: 0px;\nmin-width: 0px;\nopacity: 1;\noutline-color: rgb(0, 0, 0);\noutline-offset: 0px;\noutline-style: none;\noutline-width: 0px;\noverflow: visible;\noverflow-x: visible;\noverflow-y: visible;\npadding-bottom: 0px;\npadding-left: 0px;\npadding-right: 0px;\npadding-top: 0px;\npage-break-after: auto;\npage-break-before: auto;\npointer-events: auto;\nposition: static;\nquotes: "\u201c" "\u201d" "\u2018" "\u2019";\nresize: none;\nright: auto;\ntable-layout: auto;\ntext-align: start;\ntext-decoration: none;\ntext-indent: 0px;\ntext-overflow: clip;\ntext-shadow: none;\ntext-transform: none;\ntop: auto;\nunicode-bidi: embed;\nvertical-align: baseline;\nvisibility: visible;\nwhite-space: normal;\nwidth: 1157px;\nword-spacing: 0px;\nword-wrap: normal;\nz-index: auto;\n-moz-animation-delay: 0s;\n-moz-animation-direction: normal;\n-moz-animation-duration: 0s;\n-moz-animation-fill-mode: none;\n-moz-animation-iteration-count: 1;\n-moz-animation-name: none;\n-moz-animation-play-state: running;\n-moz-animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);\n-moz-appearance: none;\n-moz-background-inline-policy: continuous;\n-moz-binding: none;\n-moz-border-bottom-colors: none;\n-moz-border-image: none;\n-moz-border-left-colors: none;\n-moz-border-right-colors: none;\n-moz-border-top-colors: none;\n-moz-box-align: stretch;\n-moz-box-direction: normal;\n-moz-box-flex: 0;\n-moz-box-ordinal-group: 1;\n-moz-box-orient: horizontal;\n-moz-box-pack: start;\n-moz-box-sizing: content-box;\n-moz-column-count: auto;\n-moz-column-gap: 16px;\n-moz-column-rule-color: rgb(0, 0, 0);\n-moz-column-rule-style: none;\n-moz-column-rule-width: 0px;\n-moz-column-width: auto;\n-moz-float-edge: content-box;\n-moz-font-feature-settings: normal;\n-moz-font-language-override: normal;\n-moz-force-broken-image-icon: 0;\n-moz-hyphens: manual;\n-moz-image-region: auto;\n-moz-orient: horizontal;\n-moz-outline-radius-bottomleft: 0px;\n-moz-outline-radius-bottomright: 0px;\n-moz-outline-radius-topleft: 0px;\n-moz-outline-radius-topright: 0px;\n-moz-stack-sizing: stretch-to-fit;\n-moz-tab-size: 8;\n-moz-text-blink: none;\n-moz-text-decoration-color: rgb(0, 0, 0);\n-moz-text-decoration-line: none;\n-moz-text-decoration-style: solid;\n-moz-transform: none;\n-moz-transform-origin: 50% 50%;\n-moz-transition-delay: 0s;\n-moz-transition-duration: 0s;\n-moz-transition-property: all;\n-moz-transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);\n-moz-user-focus: none;\n-moz-user-input: auto;\n-moz-user-modify: read-only;\n-moz-user-select: auto;\n-moz-window-shadow: default;\nclip-path: none;\nclip-rule: nonzero;\ncolor-interpolation: srgb;\ncolor-interpolation-filters: linearrgb;\ndominant-baseline: auto;\nfill: rgb(0, 0, 0);\nfill-opacity: 1;\nfill-rule: nonzero;\nfilter: none;\nflood-color: rgb(0, 0, 0);\nflood-opacity: 1;\nimage-rendering: auto;\nlighting-color: rgb(255, 255, 255);\nmarker-end: none;\nmarker-mid: none;\nmarker-start: none;\nmask: none;\nshape-rendering: auto;\nstop-color: rgb(0, 0, 0);\nstop-opacity: 1;\nstroke: none;\nstroke-dasharray: none;\nstroke-dashoffset: 0px;\nstroke-linecap: butt;\nstroke-linejoin: miter;\nstroke-miterlimit: 4;\nstroke-opacity: 1;\nstroke-width: 1px;\ntext-anchor: start;\ntext-rendering: auto;'.indexOf(c)===
-1&&b.push(c);return b.join("\n")+"\n"}};S.r.u("Tilt.Document",S.K);S=S||{};
S.va={Mf:function(a,b){var c;c=Cc["@mozilla.org/filepicker;1"].createInstance(Ci.nsIFilePicker);c.init(window,a,b==="folder"?Ci.nsIFilePicker.modeGetFolder:Ci.nsIFilePicker.gg);return c.show()==Ci.nsIFilePicker.returnOK?c.file:k},save:function(a,b){var c,d;Cu.import("resource://gre/modules/FileUtils.jsm");Cu.import("resource://gre/modules/NetUtil.jsm");c=Cc["@mozilla.org/file/local;1"].createInstance(Ci.nsILocalFile);c.initWithPath(b);c=FileUtils.openSafeFileOutputStream(c);d=Cc["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Ci.nsIScriptableUnicodeConverter);
d.charset="UTF-8";d=d.convertToInputStream(a);NetUtil.asyncCopy(d,c,function(a){Components.isSuccessCode(a)})},yf:function(a,b){var c,d,f;Cu.import("resource://gre/modules/FileUtils.jsm");Cu.import("resource://gre/modules/NetUtil.jsm");c=Cc["@mozilla.org/file/local;1"].createInstance(Ci.nsILocalFile);c.initWithPath(b);d=Cc["@mozilla.org/network/io-service;1"].getService(Ci.nsIIOService);f=d.newURI(a.toDataURL("image/png",""),"UTF8",k);d.newFileURI(c);d=Cc["@mozilla.org/embedding/browser/nsWebBrowserPersist;1"].createInstance(Ci.nsIWebBrowserPersist);
d.persistFlags=Ci.nsIWebBrowserPersist.PERSIST_FLAGS_REPLACE_EXISTING_FILES;d.persistFlags|=Ci.nsIWebBrowserPersist.PERSIST_FLAGS_AUTODETECT_APPLY_CONVERSION;d.saveURI(f,k,k,k,k,c)},separator:navigator.appVersion.indexOf("Win")!==-1?"\\":"/"};S.r.u("Tilt.File",S.va);S=S||{};
S.i={sf:function(a){return a*0.0174532925},Yf:function(a){return a*57.2957795},map:function(a,b,c,d,f){return d+(f-d)*((a-b)/(c-b))},Kd:function(a){return(a&a-1)===0},Td:function(a){var b;--a;for(b=1;b<32;b<<=1)a|=a>>b;return a+1},G:function(a,b,c){if(b>c)var d=b,b=c,c=d;return Math.max(b,Math.min(c,a))},og:function(a,b,c){b*=0.5;var d=Math.sin(b),f=a[0]*d,g=a[1]*d,a=a[2]*d,b=Math.cos(b);return"undefined"===typeof c?[f,g,a,b]:(c[0]=f,c[1]=g,c[2]=a,c[3]=b,c)},rf:function(a,b,c,d){var f;b*=0.5;a*=0.5;
c*=0.5;f=Math.sin(b);var g=Math.sin(a),h=Math.sin(c),i=Math.cos(b),j=Math.cos(a),l=Math.cos(c),b=f*j*l-i*g*h,a=i*g*l+f*j*h,c=i*j*h-f*g*l;f=i*j*l+f*g*h;return"undefined"===typeof d?[b,a,c,f]:(d[0]=b,d[1]=a,d[2]=c,d[3]=f,d)},pf:function(a,b,c,d,f){var g,h=ka();d?za(d,c,g=$()):g=c;a[3]=1;Aa(g,a,h);d?(f[0]=h[0]/h[3],f[1]=h[1]/h[3],f[0]*=b[2]*0.5,f[1]*=-b[3]*0.5,f[0]+=b[2]*0.5,f[1]+=b[3]*0.5,f[2]=0):(f[0]=h[0],f[1]=h[1],f[2]=h[2]);return f},ge:function(a,b,c,d,f){var g=$(),f=f||ka();za(d,c,g);var h;h||
(h=g);var c=g[0],d=g[1],i=g[2],j=g[3],l=g[4],s=g[5],t=g[6],w=g[7],y=g[8],v=g[9],A=g[10],o=g[11],n=g[12],u=g[13],q=g[14],r=g[15],x=c*s-d*l,B=c*t-i*l,m=c*w-j*l,C=d*t-i*s,D=d*w-j*s,F=i*w-j*t,K=y*u-v*n,I=y*q-A*n,p=y*r-o*n,E=v*q-A*u,M=v*r-o*u,z=A*r-o*q,G=1/(x*z-B*M+m*E+C*p-D*I+F*K);h[0]=(s*z-t*M+w*E)*G;h[1]=(-d*z+i*M-j*E)*G;h[2]=(u*F-q*D+r*C)*G;h[3]=(-v*F+A*D-o*C)*G;h[4]=(-l*z+t*p-w*I)*G;h[5]=(c*z-i*p+j*I)*G;h[6]=(-n*F+q*m-r*B)*G;h[7]=(y*F-A*m+o*B)*G;h[8]=(l*M-s*p+w*K)*G;h[9]=(-c*M+d*p-j*K)*G;h[10]=(n*
D-u*m+r*x)*G;h[11]=(-y*D+v*m-o*x)*G;h[12]=(-l*E+s*I-t*K)*G;h[13]=(c*E-d*I+i*K)*G;h[14]=(-n*C+u*B-q*x)*G;h[15]=(y*C-v*B+A*x)*G;f[0]=+((a[0]-b[0])/b[2]*2-1);f[1]=-((a[1]-b[1])/b[3]*2-1);f[2]=2*a[2]-1;f[3]=1;Aa(g,f);f[3]=1/f[3];f[0]*=f[3];f[1]*=f[3];f[2]*=f[3];return f},Fe:function(a,b,c,d,f){this.ge(a,c,d,f,a);this.ge(b,c,d,f,b);var f=xa(b,a),g;g||(g=f);var c=f[0],d=f[1],f=f[2],h=Math.sqrt(c*c+d*d+f*f);h?h==1?(g[0]=c,g[1]=d,g[2]=f):(h=1/h,g[0]=c*h,g[1]=d*h,g[2]=f*h):(g[0]=0,g[1]=0,g[2]=0);return{position:a,
eg:b,direction:g}},af:function(a,b,c,d,f){var g=V(),h=V(),i=V(),j=V(),l=V(),s=d.position,d=d.direction;"undefined"===typeof f&&(f=V());xa(b,a,g);xa(c,a,h);ma(g,h,i);if(i[0]===0&&i[1]===0&&i[2]===0)return-1;xa(s,a,l);b=-Y(i,l);i=+Y(i,d);if(Math.abs(i)<1.0E-4)return b===0?2:0;i=b/i;if(i<0)return 0;pa(s,ta(d,i),f);s=Y(g,g);d=Y(g,h);i=Y(h,h);xa(f,a,j);a=Y(j,g);h=Y(j,h);j=d*d-s*i;f=(d*h-i*a)/j;if(f<0||f>1)return 0;h=(d*a-s*h)/j;return h<0||f+h>1?0:1},vc:function(a,b,c){c<0&&(c+=1);c>1&&(c-=1);return c<
0.166666667?a+(b-a)*6*c:c<0.5?b:c<0.666666667?a+(b-a)*(2/3-c)*6:a},tg:function(a,b,c){a*=0.00392156863;b*=0.00392156863;c*=0.00392156863;var d=Math.max(a,b,c),f=Math.min(a,b,c),g,h,i=(d+f)*0.5;if(d===f)h=f=0;else{g=d-f;f=i>0.5?g/(2-d-f):g/(d+f);switch(d){case a:h=(b-c)/g+(b<c?6:0);break;case b:h=(c-a)/g+2;break;case c:h=(a-b)/g+4}h/=6}return[h,f,i]},ag:function(a,b,c){var d,f;b===0?c=b=a=c:(d=c<0.5?c*(1+b):c+b-c*b,f=2*c-d,c=this.vc(f,d,a+0.333333333),b=this.vc(f,d,a),a=this.vc(f,d,a-0.333333333));
return[c*255,b*255,a*255]},xf:function(a,b,c){a*=0.00392156863;b*=0.00392156863;c*=0.00392156863;var d=Math.max(a,b,c),f=Math.min(a,b,c),g,h;g=d-f;if(d===f)h=0;else{switch(d){case a:h=(b-c)/g+(b<c?6:0);break;case b:h=(c-a)/g+2;break;case c:h=(a-b)/g+4}h/=6}return[h,d===0?0:g/d,d]},Ve:function(a,b,c){var d,f,g,h=Math.floor(a*6),i=a*6-h,a=c*(1-b),j=c*(1-i*b),b=c*(1-(1-i)*b);switch(h%6){case 0:d=c;f=b;g=a;break;case 1:d=j;f=c;g=a;break;case 2:d=a;f=c;g=b;break;case 3:d=a;f=j;g=c;break;case 4:d=b;f=a;
g=c;break;case 5:d=c,f=a,g=j}return[d*255,f*255,g*255]},xa:function(a){var b,c,d;d=a.charAt(0)==="#"?a.substring(1):a;if("undefined"!==typeof this[d])return this[d];if(d.length===3)a=d.charAt(0),b=d.charAt(1),c=d.charAt(2),d=[a,a,b,b,c,c,"ff"].join("");else if(d.length===4||d.length===5)a=d.charAt(0),b=d.charAt(1),c=d.charAt(2),d=d.charAt(3),d=[a,a,b,b,c,c,d,d].join("");else if(d.match("^rgba")=="rgba")return a=d.substring(5,d.length-1).split(","),a[0]*=0.00392156863,a[1]*=0.00392156863,a[2]*=0.00392156863,
a[3]*=0.00392156863,this[d]=a;else if(d.match("^rgb")=="rgb")return a=d.substring(4,d.length-1).split(","),a[0]*=0.00392156863,a[1]*=0.00392156863,a[2]*=0.00392156863,a[3]=1,this[d]=a;return this[d]=a=[parseInt(d.substring(0,2),16)*0.00392156863,parseInt(d.substring(2,4),16)*0.00392156863,parseInt(d.substring(4,6),16)*0.00392156863,d.length===6?1:parseInt(d.substring(6,8),16)*0.00392156863]}};S.r.u("Tilt.Math",S.i);S=S||{};
S.yd={trim:function(a){return a.replace(/^\s+|\s+$/g,"")},fg:function(a){return a.replace(/^\s+/,"")},ug:function(a){return a.replace(/\s+$/,"")}};S.r.u("Tilt.String",S.yd);S=S||{};S.sd={};S.sd.zd={Ye:function(a){var b,c,d,f;b=S.K.qb();c=S.K.qb();b=S.nc.prototype.Cd(b);d=b.getParameter(b.MAX_TEXTURE_SIZE);f=S.K.Oe(a);b=S.i.G(f.width,0,d);d=S.i.G(f.height,0,d);c.width=b;c.height=d;c.getContext("2d").drawWindow(a,0,0,b,d,"#fff");return c}};S.r.u("Tilt.WebGL",S.zd);S=S||{};
S.xe={tf:function(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.send(k);d.onreadystatechange=function(){d.readyState===4&&"function"===typeof b&&b(d,c)}},sg:function(a,b,c){function d(d,h){f[h]=d;g++;g===a.length&&"function"===typeof b&&b(f,c)}var f=[],g=0,h,i;for(h=0,i=a.length;h<i;h++)this.tf(a[h],d,h)}};S.r.u("Tilt.Xhr",S.xe);TiltChrome=TiltChrome||{};TiltChrome.d={};
TiltChrome.d.b={I:{rb:{ob:{value:50},sb:{value:0},ib:{value:100},gb:{value:80},ub:{value:100},Tb:{outline:[0,0,0,0.25]}},Oa:{ob:{value:50},sb:{value:0},ib:{value:100},gb:{value:80},ub:{value:100},Tb:{outline:[0,0,0,0.25]}},Va:{ob:{value:57.5},sb:{value:50},ib:{value:100},gb:{value:7.5},ub:{value:100},Tb:{outline:[1,1,1,0.7]}}},f:{Qf:{stroke:"#fff3"},html:{fill:"#FFF"},"head/body":{fill:"#E667AF"},title:{fill:"#CD0074"},script:{fill:"#A64B00"},style:{fill:"#FF9640"},div:{fill:"#5DC8CD"},span:{fill:"#67E46F"},
table:{fill:"#FF0700"},tr:{fill:"#FF4540"},td:{fill:"#FF7673"},ul:{fill:"#4671D5"},li:{fill:"#6C8CD5"},p:{fill:"#888"},a:{fill:"#123EAB"},img:{fill:"#FFB473"},iframe:{fill:"#85004B"},other:{fill:"#444"}}};TiltChrome=TiltChrome||{};TiltChrome.pd={};
TiltChrome.pd.we=function(){function a(a){a=a.keyCode||a.which;if(a===27)"open"===TiltChrome.BrowserOverlay.C.B.state?TiltChrome.BrowserOverlay.C.B.hidePopup():(TiltChrome.BrowserOverlay.e(!0,!0),TiltChrome.BrowserOverlay.href=k);i.Bc(a);j.Bc(a)}function b(a){a=a.keyCode||a.which;"open"!==TiltChrome.BrowserOverlay.C.B.state&&(i.Ac(a),j.Ac(a))}function c(a){a.preventDefault();a.stopPropagation();i.Hc(a.detail);i.ma||j.Hc(a.detail)}function d(a){a.preventDefault();a.stopPropagation();i.Gc();j.Gc()}
function f(a){a.preventDefault();a.stopPropagation();var b=a.clientX-a.target.offsetLeft,a=a.clientY-a.target.offsetTop;i.Fc(b,a);j.Fc(b,a)}function g(a){a.preventDefault();a.stopPropagation();var b=a.which,c=a.clientX-a.target.offsetLeft,a=a.clientY-a.target.offsetTop;i.Ic(c,a,b);j.Ic(c,a,b)}function h(a){a.preventDefault();a.stopPropagation();l=a.clientX-a.target.offsetLeft;s=a.clientY-a.target.offsetTop;i.Ec(l,s,a.which);i.ma?j.stop():j.Ec(l,s,a.which)}var i=S.b,j=k,l=0,s=0;this.init=function(i){j=
new S.nd(i.width,i.height);this.stop=j.stop.bind(j);this.translate=j.translate.bind(j);this.rotate=j.rotate.bind(j);this.zoom=j.zoom.bind(j);this.reset=j.reset.bind(j);this.qa=j.qa.bind(j);i.addEventListener("mousedown",h,!1);i.addEventListener("mouseup",g,!1);i.addEventListener("click",t,!1);i.addEventListener("dblclick",w,!1);i.addEventListener("mousemove",f,!1);i.addEventListener("mouseout",d,!1);i.addEventListener("DOMMouseScroll",c,!1);window.addEventListener("keydown",b,!1);window.addEventListener("keyup",
a,!1)};this.update=function(a){var b=this.o,a=j.loop(a);b.Ff(a.rotation);b.Hf(a.Z)};var t=function(a){a.preventDefault();a.stopPropagation();var b=a.which,c=a.clientX-a.target.offsetLeft,a=a.clientY-a.target.offsetTop;Math.abs(l-c)<2&&Math.abs(s-a)<2&&(i.click(c,a,b),i.ma||this.o.jf(c,a))}.bind(this),w=function(a){a.preventDefault();a.stopPropagation();var b=a.clientX-a.target.offsetLeft,a=a.clientY-a.target.offsetTop;Math.abs(l-b)<2&&Math.abs(s-a)<2&&(i.Je(b,a),i.ma||this.o.hf(b,a))}.bind(this);
this.e=function(l){i=this.o=k;h!==k&&(l.removeEventListener("mousedown",h,!1),h=k);g!==k&&(l.removeEventListener("mouseup",g,!1),g=k);t!==k&&(l.removeEventListener("click",t,!1),t=k);w!==k&&(l.removeEventListener("dblclick",w,!1),w=k);f!==k&&(l.removeEventListener("mousemove",f,!1),f=k);d!==k&&(l.removeEventListener("mouseout",d,!1),d=k);c!==k&&(l.removeEventListener("DOMMouseScroll",c,!1),c=k);b!==k&&(window.removeEventListener("keydown",b,!1),b=k);a!==k&&(window.removeEventListener("keyup",a,!1),
a=k);j!==k&&(j.e(),j=k);S.H(this)};S.r.u("TiltChrome.Controller.MouseAndKeyboard",this)};TiltChrome=TiltChrome||{};TiltChrome.b={};
TiltChrome.b.ve=function(){var a=S.b,b=k,c=k,d=k,f=k,g=k,h=k,i=k,j=k,l=k,s=k,t=k,w=k,y=k,v=k,A=k,o=k,n=k,u=k,q=k,r=k,x=k,B=k,m=k,C=k,D=k,F=k,K=k,I=k,p=k,E=k,M=k,z=k,G=k,aa=k,W=k,T=k,O=k,Z=k,P=k,ha=k,ea=k,U=k,la=k,J=k,H=k,ca=k,da=k,ia=k,qa=k,sa=k;this.init=function(R){h=new S.Ea("chrome://tilt/skin/tilt-ui.png",{Qd:"nearest",Nd:"nearest",onload:function(){this.o.v()}.bind(this)});b=new S.oa;c=new S.oa;i=new S.z(h,[0,768,256,256],{width:R.width,height:R.height,pa:!0,disabled:!0});F=new S.h(new S.z(h,
[935,120,42,38]),{x:R.width-50,y:-5,padding:[0,0,0,5],onclick:function(){TiltChrome.BrowserOverlay.e(!0,!0);TiltChrome.BrowserOverlay.href=k}});K=new S.h(new S.z(h,[935,80,46,38]),{x:R.width-150,y:-5,padding:[0,0,0,5],onclick:function(){var b=R.width*0.5+197,c=R.height*0.5-218;qa.N(R.width*0.5-305,R.height*0.5-305);sa.N(b,c);a.lf(d)}.bind(this)});I=new S.h(new S.z(h,[935,40,61,38]),{x:R.width-215,y:-5,padding:[0,0,0,5],onclick:function(){var a=S.ca.get("folderPicker.string"),b=S.ca.get("webpageFilename.string");
if(a=S.va.Mf(a,"folder"))a.reveal(),this.o.kf(a.path,b)}.bind(this)});p=new S.h(new S.z(h,[935,0,66,38]),{x:R.width-285,y:-5,padding:[0,0,0,5],j:!0,onclick:function(){S.ha.alert("Tilt",S.ca.get("implement.info"))}.bind(this)});M=new S.h(new S.z(h,[935,200,48,38]),{x:R.width-337,y:-5,padding:[0,0,0,5],j:!0,onclick:function(){this.o.be()}.bind(this)});z=new S.h(new S.z(h,[935,160,36,38]),{x:R.width-377,y:-5,padding:[0,0,0,5],j:!0,onclick:function(){this.o.Cf()}.bind(this)});E=new S.h(new S.z(h,[935,
240,84,38]),{x:R.width-465,y:-5,padding:[0,0,0,5],j:!0,onclick:function(){this.o.Wb()}.bind(this)});G=new S.h(new S.z(h,[0,147,42,42]),{x:0,y:-5,padding:[6,6,6,6],onclick:function(){window.clearInterval(this.O);this.Vc=0;this.O=window.setInterval(function(){this.Vc++;this.ia.translate(g.view.j?-5:5,0);this.Vc>=20&&window.clearInterval(this.O)}.bind(this),1E3/60);c.j^=1;g.view.j^=1;if(!d.j)d.j=!0;if(!f.j)f.j=!0}.bind(this)});aa=new S.z(h,[0,0,145,145],{x:0,y:0});W=new S.h(k,{x:50,y:4,width:45,height:30,
onmousedown:function(){window.clearInterval(this.O);this.O=window.setInterval(function(){this.ia.translate(0,-5);a.T||window.clearInterval(this.O)}.bind(this),1E3/60)}.bind(this)});T=new S.h(k,{x:50,y:110,width:45,height:30,onmousedown:function(){window.clearInterval(this.O);this.O=window.setInterval(function(){this.ia.translate(0,5);a.T||window.clearInterval(this.O)}.bind(this),1E3/60)}.bind(this)});O=new S.h(k,{x:4,y:50,width:30,height:45,onmousedown:function(){window.clearInterval(this.O);this.O=
window.setInterval(function(){this.ia.translate(-5,0);a.T||window.clearInterval(this.O)}.bind(this),1E3/60)}.bind(this)});Z=new S.h(k,{x:110,y:50,width:30,height:45,onmousedown:function(){window.clearInterval(this.O);this.O=window.setInterval(function(){this.ia.translate(5,0);a.T||window.clearInterval(this.O)}.bind(this),1E3/60)}.bind(this)});P=new S.h(new S.z(h,[0,190,42,42]),{x:50,y:135,padding:[6,6,6,6],onclick:function(){this.ia.reset(0.95)}.bind(this)});ha=new S.h(new S.z(h,[0,234,42,42]),{x:90,
y:P.t(),padding:[6,6,6,6],onclick:function(){this.ia.zoom(200)}.bind(this)});ea=new S.h(new S.z(h,[0,278,42,42]),{x:10,y:P.t(),padding:[6,6,6,6],onclick:function(){this.ia.zoom(-200)}.bind(this)});j=new S.z(h,[1,365,88,353],{x:0,y:292,disabled:!0});g=new S.xd({x:85,y:300,width:130,height:R.height-310,background:"#0001",ae:[0,Math.MAX_VALUE],top:new S.z(h,[506,69,33,30],{padding:[2,2,2,4]}),bottom:new S.z(h,[506,102,33,30],{padding:[2,2,2,4]}),reset:new S.z(h,[506,134,33,30],{padding:[2,4,2,2]})});
l=new S.h(k,{x:5,y:301,width:14,height:14,fill:TiltChrome.d.b.f.html.fill,onclick:function(){N(TiltChrome.d.b.f.html,l)}});s=new S.h(k,{x:5,y:l.t()+20,width:14,height:14,fill:TiltChrome.d.b.f["head/body"].fill,onclick:function(){N(TiltChrome.d.b.f["head/body"],s)}});t=new S.h(k,{x:5,y:s.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.title.fill,onclick:function(){N(TiltChrome.d.b.f.title,t)}});w=new S.h(k,{x:5,y:t.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.style.fill,onclick:function(){N(TiltChrome.d.b.f.style,
w)}});y=new S.h(k,{x:5,y:w.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.script.fill,onclick:function(){N(TiltChrome.d.b.f.script,y)}});v=new S.h(k,{x:5,y:y.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.div.fill,onclick:function(){N(TiltChrome.d.b.f.div,v)}});A=new S.h(k,{x:5,y:v.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.span.fill,onclick:function(){N(TiltChrome.d.b.f.span,A)}});o=new S.h(k,{x:5,y:A.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.table.fill,onclick:function(){N(TiltChrome.d.b.f.table,
o)}});n=new S.h(k,{x:5,y:o.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.tr.fill,onclick:function(){N(TiltChrome.d.b.f.tr,n)}});u=new S.h(k,{x:5,y:n.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.td.fill,onclick:function(){N(TiltChrome.d.b.f.td,u)}});q=new S.h(k,{x:5,y:u.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.ul.fill,onclick:function(){N(TiltChrome.d.b.f.ul,q)}});r=new S.h(k,{x:5,y:q.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.li.fill,onclick:function(){N(TiltChrome.d.b.f.li,r)}});
x=new S.h(k,{x:5,y:r.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.p.fill,onclick:function(){N(TiltChrome.d.b.f.p,x)}});B=new S.h(k,{x:5,y:x.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.a.fill,onclick:function(){N(TiltChrome.d.b.f.a,B)}});m=new S.h(k,{x:5,y:B.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.img.fill,onclick:function(){N(TiltChrome.d.b.f.img,m)}});C=new S.h(k,{x:5,y:m.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.iframe.fill,onclick:function(){N(TiltChrome.d.b.f.iframe,C)}});
D=new S.h(k,{x:5,y:C.t()+20,width:14,height:14,fill:TiltChrome.d.b.f.other.fill,onclick:function(){N(TiltChrome.d.b.f.other,D)}});var N=function(a,b){this.le=a;this.ke=b;var c=S.i.xa(a.fill),c=S.i.xf(c[0]*255,c[1]*255,c[2]*255);TiltChrome.BrowserOverlay.L.refresh(c[0]*360,c[1]*100,c[2]*100);TiltChrome.BrowserOverlay.L.B.openPopup(k,k,200+b.X(),80+b.t())}.bind(this),Fa=new S.z(h,[438,67,66,66]),Ca=new S.z(h,[438,0,66,66]);U=new S.h(Ca,{x:39,y:170,padding:[12,10,12,12],onclick:function(){U.type!==1?
(U.type=1,U.de(Fa),J.Q(TiltChrome.d.b.I.Va.ob.value),H.Q(TiltChrome.d.b.I.Va.sb.value),ca.Q(TiltChrome.d.b.I.Va.ib.value),da.Q(TiltChrome.d.b.I.Va.gb.value),ia.Q(TiltChrome.d.b.I.Va.ub.value),fa(),this.o.ce(TiltChrome.d.b.I.Va.Tb.outline)):(U.type=0,U.de(Ca),J.Q(TiltChrome.d.b.I.Oa.ob.value),H.Q(TiltChrome.d.b.I.Oa.sb.value),ca.Q(TiltChrome.d.b.I.Oa.ib.value),da.Q(TiltChrome.d.b.I.Oa.gb.value),ia.Q(TiltChrome.d.b.I.Oa.ub.value),fa(),this.o.ce(TiltChrome.d.b.I.Oa.Tb.outline))}.bind(this)});la=new S.h(new S.z(h,
[505,0,66,66]),{x:39,y:230,padding:[12,10,14,16],onclick:function(){f.j^=1;this.o.v()}.bind(this)});var ga=new S.z(h,[574,131,29,29],{padding:[8,8,8,8]});J=new S.Da(ga,{x:64,y:12,size:120,value:TiltChrome.d.b.I.rb.ob.value,onmousedown:function(){fa()}});H=new S.Da(ga,{x:J.X(),y:J.t()+19,size:120,value:TiltChrome.d.b.I.rb.sb.value,onmousedown:function(){fa()}});ca=new S.Da(ga,{x:J.X(),y:H.t()+18,size:120,value:TiltChrome.d.b.I.rb.ib.value,onmousedown:function(){fa()}});da=new S.Da(ga,{x:J.X(),y:ca.t()+
18,size:120,value:TiltChrome.d.b.I.rb.gb.value,onmousedown:function(){fa()}});ia=new S.Da(ga,{x:J.X(),y:da.t()+18,size:120,value:TiltChrome.d.b.I.rb.ub.value,onmousedown:function(){fa()}});var fa=function(){window.clearInterval(this.fd);this.fd=window.setInterval(function(){var b=S.i.Ve(J.U*0.01,H.U*0.01,ca.U*0.01),c=ia.U*0.01;b[0]/=255;b[1]/=255;b[2]/=255;b[3]=da.U*0.01;this.o.Df(b);this.o.Ef(c);a.T||window.clearInterval(this.fd)}.bind(this),1E3/60)}.bind(this),ga=new S.z(h,[572,1,231,126],{disabled:!0});
f=new S.oa({x:77,y:239,j:!0,elements:[ga,J,H,ca,da,ia]});qa=new S.z(h,[210,180,610,510],{disabled:!0});sa=new S.h(k,{width:30,height:30,onclick:function(){a.Ie(d)}.bind(this)});d=new S.oa({j:!0,background:"#0107",elements:[qa,sa]});b.push(i,F,G);c.push(K,I,p,M,z,E,P,ha,ea,aa,W,T,O,Z,U,la,j,l,s,t,w,y,v,A,o,n,u,q,r,x,B,m,C,D)};this.F=function(){a.F()};this.Wd=function(){M.j=!1;z.j=!1;E.j=!1};this.Vd=function(){M.j=!0;z.j=!0;E.j=!0};this.lg=ba();this.Xd=function(){var a=TiltChrome.BrowserOverlay.L.Ma.contentDocument.colorPicked;
this.le.fill=a;this.ke.Xb(a);this.Cc();this.o.Yd()};this.Pd=function(a,b,c,d){if("undefined"===typeof this.ee)this.ee=0;if(!("undefined"===typeof a.localName||a.localName===k)){var c=this.ee++,f=3+b*6,b=3+c*10,h,i,j,l;j=S.i.G(a.localName.length,3,10);var c=S.i.G(a.localName.length,3,10),m=S.i.G(a.id.length,3,10),o=f+j*10+3,z=o+c*3+3,f=new S.h(k,{x:f,y:b,width:j*10,height:7,padding:[-1,-1,-1,-1],stroke:TiltChrome.d.b.f.Qf.stroke});j=f.X()+f.Ka();l=f.t()+f.tc()*2;a.className&&(i=new S.h(k,{x:o,y:b,
width:c*3,height:7,padding:[-1,-1,-1,-1],stroke:f.lc}),j=Math.max(j,i.X()+i.Ka()));a.id&&(h=new S.h(k,{x:z,y:b,width:m*3,height:7,padding:[-1,-1,-1,-1],stroke:f.lc}),j=Math.max(j,h.X()+h.Ka()));j>g.view.Ka()&&g.view.Rc(j);g.bottom=l;if(f)g.view.push(f),f.localName=a.localName,f.onclick=function(){a.localName==="img"||a.localName==="input"||a.localName==="button"||a.localName==="meta"||a.localName==="link"||a.localName==="style"||a.localName==="script"||a.localName==="noscript"?this.o.Wb():this.o.be();
this.o.Qa(d)}.bind(this);if(i)g.view.push(i),i.Xb(f.Cb),i.localName=a.localName,i.onclick=function(){this.o.Wb();this.o.Qa(d)}.bind(this);if(h)g.view.push(h),h.Xb(f.Cb),h.localName=a.localName,h.onclick=function(){this.o.Wb();this.o.Qa(d)}.bind(this)}};this.Cc=function(){g.view.forEach(function(a){a.Xb((TiltChrome.d.b.f[a.localName!=="head"&&a.localName!=="body"?a.localName:"head/body"]||TiltChrome.d.b.f.other).fill)})};this.qa=function(a,b){i.Y(a,b);g.view.Qc(b-310);F.fa(a-50);K.fa(a-150);I.fa(a-
215);p.fa(a-285);M.fa(a-337);z.fa(a-377);E.fa(a-465)};this.e=function(){a=this.ia=this.o=k;b!==k&&(b.e(),b=k);c!==k&&(c.e(),c=k);d!==k&&(d.e(),d=k);f!==k&&(f.e(),f=k);g!==k&&(g.e(),g=k);h!==k&&(h.e(),h=k);i!==k&&(i.e(),i=k);sa=qa=ia=da=ca=H=J=la=U=ea=ha=P=Z=O=T=W=aa=G=z=M=E=p=I=K=F=D=C=m=B=x=u=n=o=A=v=y=w=t=s=l=j=k;S.H(this)};S.r.u("TiltChrome.UI",this)};TiltChrome=TiltChrome||{};
TiltChrome.Lb=function(a,b,c){var d=new S.nc(a,{Pa:function(){TiltChrome.BrowserOverlay.e(!0,!0);TiltChrome.BrowserOverlay.href=k;S.ha.alert("Firefox",S.ca.get("initWebGL.error"));gBrowser.selectedTab=gBrowser.addTab("http://get.webgl.org/troubleshooting/")}}),f=k,g=k,h=k,i=k,j=k,l=-1,s="#fff",t="000",w=V(),y=V(),v=V(),A=V(),o={Z:V(),rotation:ka()},n=!0,u=function(){if(d&&d.w)f=S.sd.zd.Ye(window.content),g=new S.Ea(f,{fill:"white",stroke:"#aaa",tb:8}),j=new S.Kb(TiltChrome.ba.Lb.xb,TiltChrome.ba.Lb.mb),
r(),x(),B(),m(),o.Z=[0,0,0],o.rotation=[0,0,0,1],window.setTimeout(function(){p();E()}.bind(this),100)}.bind(this),q=function(){if(d&&d.w){d.loop(q);if(n){n=!1;d.clear(0,0,0,1);d.translate(d.width*0.5+100,d.height*0.5-50,-450);d.translate(o.Z[0],o.Z[1],o.Z[2]);d.transform(Da(o.rotation));d.Ad("alpha");d.tb(2);h.F();i.F();if(l!==-1){var a=S.i.pf,f=h.J,g=h.R.S,j=h.la.S,m=l*30,p=[g[j[m+1]*3],g[j[m+1]*3+1],g[j[m+1]*3+2]],O=[g[j[m+2]*3],g[j[m+2]*3+1],g[j[m+2]*3+2]],r=[g[j[m+5]*3],g[j[m+5]*3+1],g[j[m+5]*
3+2]];a([g[j[m]*3],g[j[m]*3+1],g[j[m]*3+2]],k,f,k,w);a(p,k,f,k,y);a(O,k,f,k,v);a(r,k,f,k,A);d.Mc();d.pa(!1);d.fill(s);d.stroke(t);d.tb(3);d.qf(w,y,v,A)}c&&"function"===typeof c.F&&c.F(d.lb)}b&&"function"===typeof b.update&&b.update(d.lb);(d.Fd+1)%1E3===0&&TiltChrome.BrowserOverlay.Ub()}}.bind(this),r=function(){if("undefined"!==typeof b)b.o=this,"function"===typeof b.init&&b.init(a)}.bind(this),x=function(){if("undefined"!==typeof c)c.o=this,c.ia=b,S.b.v=this.v,"function"===typeof c.init&&c.init(a)}.bind(this),
B=function(){var a=[],b=[],f=[],m=[],l=[],o=[];S.K.fe(function(h,i,j,p,n,q){c&&"function"===typeof c.Pd&&c.Pd(h,i,0,p);j={innerHTML:h.innerHTML,attributes:h.attributes,localName:h.localName,className:h.className,id:h.id,vb:p};try{j.style=window.getComputedStyle(h)}catch(r){j.style=""}h.nodeType!==1||h.localName==="head"||h.localName==="title"||h.localName==="meta"||h.localName==="link"||h.localName==="style"||h.localName==="script"||h.localName==="noscript"||h.localName==="option"?(j.index=-1,o.push(j)):
(h=S.K.uc(h),h.width>4&&h.height>4?(j.index=l.length,l.push(j),j=a.length/3,i=i*15+Math.random()*0.1,n=h.x-d.width/2+Math.random()*0.1+n,q=h.y-d.height/2+Math.random()*0.1+q,p=h.width,h=h.height,a.push(n,q,i,n+p,q,i,n+p,q+h,i,n,q+h,i,n,q+h,i-15,n+p,q+h,i-15,n+p,q+h,i,n,q+h,i,n,q,i,n+p,q,i,n+p,q,i-15,n,q,i-15),b.push((n+d.width*0.5)/g.width,(q+d.height*0.5)/g.height,(n+d.width*0.5+p)/g.width,(q+d.height*0.5)/g.height,(n+d.width*0.5+p)/g.width,(q+d.height*0.5+h)/g.height,(n+d.width*0.5)/g.width,(q+
d.height*0.5+h)/g.height,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1),f.push(j+0,j+1,j+2,j+0,j+2,j+3,j+4,j+5,j+6,j+4,j+6,j+7,j+8,j+9,j+10,j+8,j+10,j+11,j+10,j+9,j+6,j+10,j+6,j+5,j+8,j+11,j+4,j+8,j+4,j+7),m.push(j+0,j+1,j+1,j+2,j+2,j+3,j+3,j+0,j+4,j+5,j+5,j+6,j+6,j+7,j+7,j+4,j+8,j+9,j+9,j+10,j+10,j+11,j+11,j+8,j+10,j+9,j+9,j+6,j+6,j+5,j+5,j+10)):(j.index=-1,o.push(j)))}.bind(this),function(){c&&"undefined"!==c.Cc&&c.Cc()}.bind(this),!0);h=new S.Jb({R:new S.W(a,3),Sa:new S.W(b,2),la:new S.fb(f),
na:[1,1,1,0.85],alpha:1,Yb:g,Uc:l,Ue:o,F:function(){var a=S.aa,b=this.R,c=this.Sa,d=this.color,f=this.la,h=this.na,g=this.alpha,i=this.Yb,m=this.Nb,l=j;l.Tc();l.Ga("vertexPosition",b);l.Ga("vertexTexCoord",c);l.Ga("vertexColor",d);l.Fa("mvMatrix",a.J);l.Fa("projMatrix",a.ea);l.pc("tint",h);l.Be("alpha",g);l.bindTexture("sampler",i);a.Ed(m,f);this.J=$(a.J);this.ea=$(a.ea)}});i=new S.Jb({R:h.R,la:new S.fb(m),color:"#0004",Nb:d.LINES});this.Yd()}.bind(this),m=function(){var a=gBrowser.tabContainer,b=
TiltChrome.BrowserOverlay.C.B,c=TiltChrome.BrowserOverlay.L.B;a.addEventListener("TabClose",I,!1);a.addEventListener("TabAttrModified",I,!1);gBrowser.contentWindow.addEventListener("resize",p,!1);gBrowser.addEventListener("mouseover",E,!1);b.addEventListener("popupshown",C,!1);b.addEventListener("popuphidden",D,!1);c.addEventListener("popupshown",F,!1);c.addEventListener("popuphidden",K,!1)}.bind(this),C=function(){"function"===typeof c.Wd&&c.Wd();this.v()}.bind(this),D=function(){"function"===typeof c.Vd&&
c.Vd();l=-1;TiltChrome.BrowserOverlay.Ub();this.v()}.bind(this),F=function(){this.v()}.bind(this),K=function(){"function"===typeof c.Xd&&c.Xd();l=-1;TiltChrome.BrowserOverlay.Ub();this.v()}.bind(this),I=function(){if(TiltChrome.BrowserOverlay.href!==window.content.location.href)TiltChrome.BrowserOverlay.href=k,TiltChrome.BrowserOverlay.e(!0,!0)}.bind(this),p=function(){this.v();d.width=window.content.innerWidth;d.height=window.content.innerHeight;b&&"function"===typeof b.qa&&b.qa(d.width,d.height);
c&&"function"===typeof c.qa&&c.qa(d.width,d.height);"open"===TiltChrome.BrowserOverlay.C.B.state&&TiltChrome.BrowserOverlay.C.B.hidePopup();"open"===TiltChrome.BrowserOverlay.L.B.state&&TiltChrome.BrowserOverlay.L.B.hidePopup()}.bind(this),E=function(){this.v();if(a.width!==d.width||a.height!==d.height)a.width=d.width,a.height=d.height,d.w.viewport(0,0,a.width,a.height),q()}.bind(this);this.v=function(){n=!0};this.kf=function(a,b){S.va.yf(f,a+S.va.separator+b+".png");h.save(a,b)};this.Yd=function(){this.v();
for(var a=h.Uc,b=[],c=0,d=h.la.S.length;c<d;c+=30){var f=a[Math.floor(c/30)],g=S.i.xa((TiltChrome.d.b.f[f.localName!=="head"&&f.localName!=="body"?f.localName:"head/body"]||TiltChrome.d.b.f.other).fill),f=[S.i.G(g[0]*0.6,0,1),S.i.G(g[1]*0.6,0,1),S.i.G(g[2]*0.6,0,1)],g=[S.i.G(g[0]*1,0,1),S.i.G(g[1]*1,0,1),S.i.G(g[2]*1,0,1)];b.push(0,0,0,0,0,0,0,0,0,0,0,0,f[0],f[1],f[2],f[0],f[1],f[2],g[0],g[1],g[2],g[0],g[1],g[2],g[0],g[1],g[2],g[0],g[1],g[2],f[0],f[1],f[2],f[0],f[1],f[2])}h.color=new S.W(b,3)};this.jf=
function(a,b){this.Zd(a,b,{Lc:function(a){"open"===TiltChrome.BrowserOverlay.C.B.state&&TiltChrome.BrowserOverlay.C.B.hidePopup();var b=a[0].Ud,a=b.index,b=b.localName!=="head"&&b.localName!=="body"?b.localName:"head/body",c=TiltChrome.d.b.f[b]||TiltChrome.d.b.f.other;b!=="html"&&(l=a,s=c.fill+"55",t=c.fill+"AA")}.bind(this),Pa:function(){"open"===TiltChrome.BrowserOverlay.C.B.state&&TiltChrome.BrowserOverlay.C.B.hidePopup();l=-1}})};this.hf=function(a,b){this.Zd(a,b,{Lc:function(a){this.Qa(a[0].Ud)}.bind(this),
Pa:function(){"open"===TiltChrome.BrowserOverlay.C.B.state&&TiltChrome.BrowserOverlay.C.B.hidePopup()}})};this.Zd=function(a,b,c){for(var c=c||{},a=S.i.Fe([a,b,0],[a,b,1],[0,0,d.width,d.height],h.J,h.ea),b=[],f=V(),g=h.la.S,i=h.R.S,j=0,l=g.length,m,n,o;j<l;j+=3)m=[i[g[j]*3],i[g[j]*3+1],i[g[j]*3+2]],n=[i[g[j+1]*3],i[g[j+1]*3+1],i[g[j+1]*3+2]],o=[i[g[j+2]*3],i[g[j+2]*3+1],i[g[j+2]*3+2]],S.i.af(m,n,o,a,f)>0&&b.push({Ud:h.Uc[Math.floor(j/30)],location:V(f)});b.length>0?(b.sort(function(a,b){return a.location[2]<
b.location[2]?1:-1}),"function"===typeof c.Lc&&c.Lc(b)):"function"===typeof c.Pa&&c.Pa();this.v()};this.Qa=function(a){if("number"===typeof a){for(var b=h.Uc,c=h.Ue,d=0,f=b.length;d<f;d++){var g=b[d];if(a===g.vb){this.Qa(g);return}}b=0;for(d=c.length;b<d;b++)if(f=c[b],a===f.vb){this.Qa(f);break}}else if("object"===typeof a){var c=TiltChrome.BrowserOverlay.C.B,b=S.yd.trim(ua(a.innerHTML).replace(/</g,"&lt;").replace(/>/g,"&gt;"))+"\n",d=S.K.Pe(a.style),f=S.K.Ne(a.attributes),g=document.getElementById("tilt-sourceeditor-iframe"),
i=g.contentDocument.getElementById("code");document.getElementById("tilt-sourceeditor-title").value="<"+a.localName+(a.className?' class="'+a.className+'"':"")+(a.id?' id="'+a.id+'"':"")+">";c.openPopup(k,"overlap",window.innerWidth-g.width-21,window.innerHeight-g.height-77,!1,!1);i.We=b;i.Ge=d;i.ze=f;a.localName==="img"||a.localName==="input"||a.localName==="button"||i.Pb==="attr"?(i.innerHTML=f,g.contentWindow.refreshCodeEditor("css")):i.Pb==="css"?(i.innerHTML=d,g.contentWindow.refreshCodeEditor("css")):
(i.innerHTML=b,g.contentWindow.refreshCodeEditor("html"));c=a.index;a=a.localName!=="head"&&a.localName!=="body"?a.localName:"head/body";b=TiltChrome.d.b.f[a]||TiltChrome.d.b.f.other;a!=="html"&&(l=c,s=b.fill+"55",t=b.fill+"AA",this.v())}};this.be=function(){var a=document.getElementById("tilt-sourceeditor-iframe"),b=a.contentDocument.getElementById("code");b.innerHTML=b.We;b.Pb="html";a.contentWindow.refreshCodeEditor("html")};this.Cf=function(){var a=document.getElementById("tilt-sourceeditor-iframe"),
b=a.contentDocument.getElementById("code");b.innerHTML=b.Ge;b.Pb="css";a.contentWindow.refreshCodeEditor("css")};this.Wb=function(){var a=document.getElementById("tilt-sourceeditor-iframe"),b=a.contentDocument.getElementById("code");b.innerHTML=b.ze;b.Pb="attr";a.contentWindow.refreshCodeEditor("css")};this.Hf=function(a){var b=a[1],c=a[2];if(o.Z[0]!=a[0]||o.Z[1]!=b||o.Z[2]!=c)b=o.Z,b[0]=a[0],b[1]=a[1],b[2]=a[2],this.v()};this.Ff=function(a){var b=a[1],c=a[2],d=a[3];if(o.rotation[0]!=a[0]||o.rotation[1]!=
b||o.rotation[2]!=c||o.rotation[3]!=d)oa(a,o.rotation),this.v()};this.ce=function(a){i.color=a;this.v()};this.wg=function(a){i.color[3]=a;this.v()};this.Df=function(a){h.na=a;this.v()};this.vg=function(a){h.na[3]=a;this.v()};this.Ef=function(a){h.alpha=a;this.v()};this.e=function(){var j=gBrowser.tabContainer,l=TiltChrome.BrowserOverlay.C.B,n=TiltChrome.BrowserOverlay.L.B;I!==k&&(j.removeEventListener("TabClose",I,!1),j.removeEventListener("TabAttrModified",I,!1),I=k);p!==k&&(gBrowser.contentWindow.removeEventListener("resize",
p,!1),p=k);E!==k&&(gBrowser.removeEventListener("mouseover",E,!1),E=k);C!==k&&(l.removeEventListener("popupshown",C,!1),C=k);D!==k&&(l.removeEventListener("popuphidden",D,!1),D=k);F!==k&&(n.removeEventListener("popupshown",F,!1),F=k);K!==k&&(n.removeEventListener("popuphidden",K,!1),K=k);b&&"function"===typeof b.e&&(b.e(a),b=k);c&&"function"===typeof c.e&&(c.e(a),c=k);g!==k&&(g.e(),g=k);h!==k&&(h.e(),h=k);i!==k&&(i.e(),i=k);if(o!==k)o.rotation=k,o=o.Z=k;d!==k&&(d.e(),d=k);x=r=m=B=q=u=a=f=k;S.H(this)};
S.r.u("TiltChrome.Visualization",this);u.call(this);q.call(this)};TiltChrome=TiltChrome||{};TiltChrome.ba={};TiltChrome.ba.Lb={xb:"attribute vec3 vertexPosition;\nattribute vec2 vertexTexCoord;\nattribute vec3 vertexColor;\nuniform mat4 mvMatrix;\nuniform mat4 projMatrix;\nvarying vec2 texCoord;\nvarying vec3 color;\nvoid main(void) {\n  gl_Position = projMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n  texCoord = vertexTexCoord;\n  color = vertexColor;\n}",mb:"#ifdef GL_ES\nprecision lowp float;\n#endif\nuniform vec4 tint;\nuniform float alpha;\nuniform sampler2D sampler;\nvarying vec2 texCoord;\nvarying vec3 color;\nvoid main(void) {\n  if (texCoord.s < 0.0) {\n    gl_FragColor = vec4(color.r, color.g, color.b, tint.a);\n  }\n  else {\n    vec4 texture = texture2D(sampler, texCoord);\n    gl_FragColor = tint * texture * alpha + tint * (1.0 - alpha);\n  }\n}"};
