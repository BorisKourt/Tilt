'use strict';var Tilt=Tilt||{},EXPORTED_SYMBOLS=["Tilt.Arcball"];
Tilt.Arcball=function(a,b,c){this.$mousePress=[0,0];this.$mouseRelease=[0,0];this.$mouseMove=[0,0];this.$mouseLerp=[0,0];this.$mouseButton=-1;this.$scrollValue=0;this.$keyCode=[];this.$startVec=vec3.create();this.$endVec=vec3.create();this.$pVec=vec3.create();this.$lastRot=quat4.create([0,0,0,1]);this.$deltaRot=quat4.create([0,0,0,1]);this.$currentRot=quat4.create([0,0,0,1]);this.$lastTrans=vec3.create();this.$deltaTrans=vec3.create();this.$currentTrans=vec3.create();this.$addKeyRot=[0,0];this.$addKeyTrans=
[0,0];this.$deltaKeyRot=quat4.create([0,0,0,1]);this.$deltaKeyTrans=vec3.create();this.resize(a,b,c)};
Tilt.Arcball.prototype={loop:function(a){var a="undefined"===typeof a?0.25:Tilt.Math.clamp(a/100,0.01,0.99),b=this.$radius,c=this.$width,d=this.$height,e=this.$mousePress,f=this.$mouseRelease,g=this.$mouseMove,h=this.$mouseLerp,i=this.$mouseButton,j=this.$scrollValue,l=this.$keyCode,q=this.$startVec,v=this.$endVec,r=this.$pVec,p=this.$lastRot,w=this.$deltaRot,o=this.$currentRot,n=this.$lastTrans,u=this.$deltaTrans,s=this.$currentTrans,t=this.$addKeyRot,x=this.$addKeyTrans,y=this.$deltaKeyRot,k=this.$deltaKeyTrans;
h[0]+=(g[0]-h[0])*a;h[1]+=(g[1]-h[1])*a;var C=h[0],h=h[1];if(i===3||C===f[0]&&h===f[1])this.$rotating=!1;i===1||this.$rotating?(this.$rotating=!0,this.pointToSphere(C,h,c,d,b,v),vec3.cross(q,v,r),vec3.length(r)>0?(w[0]=r[0],w[1]=r[1],w[2]=r[2],w[3]=-vec3.dot(q,v)):(w[0]=0,w[1]=0,w[2]=0,w[3]=1),quat4.multiply(p,w,o)):quat4.set(o,p);i===3?(u[0]=g[0]-e[0],u[1]=g[1]-e[1],s[0]=n[0]+u[0],s[1]=n[1]+u[1]):(n[0]=s[0],n[1]=s[1]);u[2]=(j-s[2])/10;s[2]+=u[2];l[65]&&(t[0]-=a/5);l[68]&&(t[0]+=a/5);l[87]&&(t[1]+=
a/5);l[83]&&(t[1]-=a/5);l[37]&&(x[0]+=a*50);l[39]&&(x[0]-=a*50);l[38]&&(x[1]+=a*50);l[40]&&(x[1]-=a*50);y[0]+=(t[0]-y[0])*a;y[1]+=(t[1]-y[1])*a;k[0]+=(x[0]-k[0])*a;k[1]+=(x[1]-k[1])*a;Tilt.Math.quat4fromEuler(y[0],y[1],0,w);u[0]=k[0];u[1]=k[1];u[2]=0;return{rotation:quat4.multiply(w,o),translation:vec3.add(u,s)}},mouseDown:function(a,b,c){this.$clearInterval();this.$mousePress[0]=a;this.$mousePress[1]=b;this.$mouseButton=c;this.$save();this.pointToSphere(a,b,this.$width,this.$height,this.$radius,
this.$startVec);quat4.set(this.$currentRot,this.$lastRot)},mouseUp:function(a,b){this.$mouseRelease[0]=a;this.$mouseRelease[1]=b;this.$mouseButton=-1},mouseMove:function(a,b){this.$mouseButton!==-1&&(this.$mouseMove[0]=a,this.$mouseMove[1]=b)},mouseOut:function(){this.$mouseButton=-1},mouseScroll:function(a){this.$clearInterval();this.$scrollValue-=a*10},keyDown:function(a){this.$clearInterval();this.$keyCode[a]=!0},keyUp:function(a){this.$keyCode[a]=!1},pointToSphere:function(a,b,c,d,e,f){a=(a-c/
2)/e;b=(b-d/2)/e;c=a*a+b*b;d=0;c>1?(d=1/Math.sqrt(c),f[0]=a*d,f[1]=b*d,f[2]=0):(f[0]=a,f[1]=b,f[2]=Math.sqrt(1-c))},resize:function(a,b,c){this.$width=a;this.$height=b;this.$radius="undefined"!==typeof c?c:b;this.$save()},translate:function(a,b){this.$addKeyTrans[0]+=a;this.$addKeyTrans[1]+=b},rotate:function(a,b){this.$addKeyRot[0]+=a;this.$addKeyRot[1]+=b},zoom:function(a){this.$scrollValue+=a},stop:function(){this.$clearInterval();this.$save();this.$mouseButton=-1},reset:function(a){var b=this.$scrollValue,
c=this.$lastRot,d=this.$deltaRot,e=this.$currentRot,f=this.$lastTrans,g=this.$deltaTrans,h=this.$currentTrans,i=this.$addKeyRot,j=this.$addKeyTrans;a?this.$setInterval(function(){var l=quat4.inverse(c);quat4.slerp(c,l,1-a);quat4.slerp(d,l,1-a);quat4.slerp(e,l,1-a);vec3.scale(f,a);vec3.scale(g,a);vec3.scale(h,a);i[0]*=a;i[1]*=a;j[0]*=a;j[1]*=a;this.$scrollValue*=a;vec3.length(c)<1.0E-4&&vec3.length(d)<1.0E-4&&vec3.length(e)<1.0E-4&&vec3.length(f)<0.01&&vec3.length(g)<0.01&&vec3.length(h)<0.01&&vec3.length([i[0],
i[1],b])<0.01&&vec3.length([j[0],j[1],b])<0.01&&this.$clearInterval()}.bind(this),1E3/60):(quat4.set([0,0,0,1],c),quat4.set([0,0,0,1],d),quat4.set([0,0,0,1],e),vec3.set([0,0,0],f),vec3.set([0,0,0],g),vec3.set([0,0,0],h),i[0]=0,i[1]=0,j[0]=0,j[1]=0)},$setInterval:function(a,b){if("undefined"===typeof this.$currentInterval)this.$currentInterval=window.setInterval(a,b)},$clearInterval:function(){"undefined"!==typeof this.$currentInterval&&(window.clearInterval(this.$currentInterval),delete this.$currentInterval)},
$save:function(){var a=this.$mousePress[0],b=this.$mousePress[1],c=this.$mouseMove,d=this.$mouseRelease,e=this.$mouseLerp;c[0]=a;c[1]=b;d[0]=a;d[1]=b;e[0]=a;e[1]=b},destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.VertexBuffer","Tilt.IndexBuffer"];Tilt.VertexBuffer=function(a,b,c){Tilt.Profiler.intercept("Tilt.VertexBuffer",this,null);this.components=this.$ref=null;this.numItems=this.itemSize=0;"undefined"!==typeof a&&this.initBuffer(a,b,c)};
Tilt.VertexBuffer.prototype={initBuffer:function(a,b,c){"undefined"===typeof c&&(c=a.length/b);this.components=new Float32Array(a);a=Tilt.$gl;this.$ref=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.$ref);a.bufferData(a.ARRAY_BUFFER,this.components,a.STATIC_DRAW);this.itemSize=b;this.numItems=c},destroy:function(){Tilt.$gl.deleteBuffer(this.$ref);Tilt.destroyObject(this)}};
Tilt.IndexBuffer=function(a,b){Tilt.Profiler.intercept("Tilt.IndexBuffer",this);this.components=this.$ref=null;this.numItems=this.itemSize=0;"undefined"!==typeof a&&this.initBuffer(a,b)};
Tilt.IndexBuffer.prototype={initBuffer:function(a,b){if("undefined"===typeof b)b=a.length;this.components=new Uint16Array(a);var c=Tilt.$gl;this.$ref=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.$ref);c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.components,c.STATIC_DRAW);this.itemSize=1;this.numItems=b},destroy:function(){Tilt.$gl.deleteBuffer(this.$ref);Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS="Tilt.$gl,Tilt.$renderer,Tilt.$activeShader,Tilt.$enabledAttributes,Tilt.$loadedTextures,Tilt.$ui,Tilt.clearCache,Tilt.destroyObject".split(",");
Tilt.$gl=null;Tilt.$renderer=null;Tilt.$activeShader=-1;Tilt.$enabledAttributes=-1;Tilt.$loadedTextures={};Tilt.clearCache=function(){Tilt.$gl=null;Tilt.$renderer=null;Tilt.$activeShader=-1;Tilt.$enabledAttributes=-1;Tilt.$loadedTextures={};Tilt.GLSL.$count=0;Tilt.TextureUtils.$count=0};Tilt.destroyObject=function(a){for(var b in a)try{"function"===typeof a[b].destroy&&a[b].destroy()}catch(c){}finally{delete a[b]}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Profiler"];
Tilt.Profiler={enabled:!1,functions:[],intercept:function(a,b,c,d,e,f){if(this.enabled)if(c){"undefined"===typeof d&&(d=this.beforeCall.bind(this));"undefined"===typeof e&&(e=this.afterCall.bind(this));"undefined"===typeof f&&(f=this.duringCall.bind(this));var g=b[c];if("function"===typeof g){var h=this.functions.length;this.functions[h]={name:(a+"."||"")+c,calls:0,averageTime:0,longestTime:0,totalTime:0};b[c]=function(){try{return d(h),f(b,g,arguments)}finally{e(h)}}}}else for(var i in b)"function"===
typeof b[i]&&this.intercept(a,b,i,d,e,f)},beforeCall:function(a){this.functions[a].currentTime=(new Date).getTime()},afterCall:function(a){var a=this.functions[a],b=a.currentTime,b=(new Date).getTime()-b;a.calls++;a.longestTime=Math.max(a.longestTime,b);a.averageTime=(a.longestTime+b)/2;a.totalTime+=b},duringCall:function(a,b,c){if(c.length===0)return b.call(a);a=0;c=c.length;for(b="";a<c;a++)b+="arguments[2]["+a+"]"+(a!==c-1?",":"");return eval("arguments[1].call(arguments[0], "+b+");")},log:function(){var a=
this.functions.slice(0),b,c,d,e;a.sort(function(a,b){return a.totalTime<b.totalTime?1:-1});for(d=0;d<a.length;d++){b=a[d];for(e=d+1;e<a.length;e++)if(c=a[e],b.name===c.name)b.calls+=c.calls,b.longestTime=Math.max(b.longestTime,c.longestTime),b.averageTime=(b.averageTime+c.averageTime)/2,b.totalTime+=c.totalTime,a.splice(e,1),e--;b.calls!==0&&Tilt.Console.log("function "+b.name+"\ncalls    "+b.calls+"\naverage  "+b.averageTime+"ms\nlongest  "+b.longestTime+"ms\ntotal    "+b.totalTime+"ms")}},reset:function(){this.functions=
[]}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Program"];Tilt.Program=function(a,b){Tilt.Profiler.intercept("Tilt.Program",this);this.$ref=null;this.$id=-1;this.$uniforms=this.$attributes=null;this.$cache={};arguments.length===2&&this.initProgram(a,b)};
Tilt.Program.prototype={initProgram:function(a,b){this.$ref=Tilt.GLSL.create(a,b);this.$id=this.$ref.id;this.$attributes=this.$ref.attributes;this.$uniforms=this.$ref.uniforms;delete this.$ref.id;delete this.$ref.attributes;delete this.$ref.uniforms},initProgramAt:function(a,b,c){arguments.length===2&&(c=b,b=a+".fs",a+=".vs");Tilt.Xhr.requests([a,b],function(a){this.initProgram(a[0].responseText,a[1].responseText);"function"===typeof c&&c()}.bind(this))},use:function(){if(Tilt.$activeShader!==this.$id){Tilt.$activeShader=
this.$id;var a=Tilt.$gl;a.useProgram(this.$ref);if(Tilt.$enabledAttributes<this.$attributes.length){Tilt.$enabledAttributes=this.$attributes.length;for(var b in this.$attributes)this.$attributes.hasOwnProperty(b)&&b!=="length"&&a.enableVertexAttribArray(this.$attributes[b])}}},bindVertexBuffer:function(a,b){var c=Tilt.$gl,d=this.$attributes[a],e=b.itemSize;c.bindBuffer(c.ARRAY_BUFFER,b.$ref);c.vertexAttribPointer(d,e,c.FLOAT,!1,0,0)},bindUniformMatrix:function(a,b){var c=this.$cache,d=(b[0]+b[1]+
b[2])*(b[4]+b[5]+b[6])*(b[8]+b[9]+b[10])*(b[12]+b[13]+b[14]);c[a]!==d&&(c[a]=d,Tilt.$gl.uniformMatrix4fv(this.$uniforms[a],!1,b))},bindUniformVec4:function(a,b){var c=this.$cache,d=b[3]*255<<24|b[0]*255<<16|b[1]*255<<8|b[2]*255;c[a]!==d&&(c[a]=d,Tilt.$gl.uniform4fv(this.$uniforms[a],b))},bindUniformFloat:function(a,b){var c=this.$cache;c[a]!==b&&(c[a]=b,Tilt.$gl.uniform1f(this.$uniforms[a],b))},bindTexture:function(a,b){var c=this.$cache,d=b.$id;if(c[a]!==d)c[a]=d,c=Tilt.$gl,c.bindTexture(c.TEXTURE_2D,
b.$ref),c.uniform1i(this.$uniforms[a],0)},clearCache:function(){this.$cache={}},destroy:function(){Tilt.$gl.deleteShader(this.$ref);Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.GLSL"];
Tilt.GLSL={create:function(a,b){var c=this.compile(a,"x-shader/x-vertex"),d=this.compile(b,"x-shader/x-fragment");return this.link(c,d)},compile:function(a,b){var c=Tilt.$gl,d;if("string"!==typeof a||a.length<1)return Tilt.Console.error(Tilt.StringBundle.get("compileShader.source.error")),null;if(b==="x-shader/x-vertex")d=c.createShader(c.VERTEX_SHADER);else if(b==="x-shader/x-fragment")d=c.createShader(c.FRAGMENT_SHADER);else return Tilt.Console.error(Tilt.StringBundle.format("compileShader.type.error"),
[a]),null;c.shaderSource(d,a);c.compileShader(d);d.src=a;return!c.getShaderParameter(d,c.COMPILE_STATUS)?(c=c.getShaderInfoLog(d),Tilt.Console.error(Tilt.StringBundle.format("compileShader.compile.error"),[c]),null):d},link:function(a,b){var c=Tilt.$gl,d;d=c.createProgram();c.attachShader(d,a);c.attachShader(d,b);c.linkProgram(d);if(!c.getProgramParameter(d,c.LINK_STATUS))return d=c.getProgramInfoLog(d),Tilt.Console.error(Tilt.StringBundle.format("linkProgram.error",[d])),null;d.id=this.$count++;
c=[a.src,b.src].join(" ").replace(/#.*|[(){};,]/g," ").split(" ");return this.shaderIOCache(d,c)},shaderAttribute:function(a,b){return Tilt.$gl.getAttribLocation(a,b)},shaderUniform:function(a,b){return Tilt.$gl.getUniformLocation(a,b)},shaderIO:function(a,b){if("string"===typeof b){if(b.length<1)return null;var c;return(c=this.shaderAttribute(a,b))>=0?c:this.shaderUniform(a,b)}return null},shaderIOCache:function(a,b){var c,d,e,f;a.attributes={};a.attributes.length=0;a.uniforms={};for(c=0,d=b.length;c<
d;c++)e=b[c],f=this.shaderIO(a,e),"number"===typeof f&&"undefined"===typeof a.attributes[e]&&(a.attributes[e]=f,a.attributes.length++),"object"===typeof f&&f instanceof WebGLUniformLocation&&"undefined"===typeof a.uniforms[e]&&(a.uniforms[e]=f);return a},$count:0};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Texture"];
Tilt.Texture=function(a,b,c){Tilt.Profiler.intercept("Tilt.Texture",this);this.$ref=null;this.height=this.width=this.$id=-1;this.loaded=!1;this.onload=c;"object"===typeof a?this.initTexture(a,b):"string"===typeof a?this.initTextureAt(a,b):Tilt.Console.error(Tilt.StringBundle.get("initTexture.source.error"))};
Tilt.Texture.prototype={initTexture:function(a,b){this.$ref=Tilt.TextureUtils.create(a,b);this.$id=this.$ref.id;this.width=this.$ref.width;this.height=this.$ref.height;this.loaded=!0;if("undefined"!==typeof this.onload)this.onload();delete this.$ref.id;delete this.$ref.width;delete this.$ref.height;delete this.onload},initTextureAt:function(a,b){var c=new Image;c.src=a;c.onload=function(){this.initTexture(c,b);b=c=null}.bind(this)},destroy:function(){Tilt.$gl.deleteTexture(this.$ref);Tilt.destroyObject(this)}};
Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.TextureUtils"];
Tilt.TextureUtils={create:function(a,b){b=b||{};if("undefined"!==typeof Tilt.$loadedTextures[a.src])return Tilt.$loadedTextures[a.src];var c=Tilt.$gl,d=Tilt.TextureUtils.resizeImageToPowerOfTwo(a,b),e=c.getParameter(c.TEXTURE_BINDING_2D),f=a.width,g=a.height,h=c.createTexture();c.bindTexture(c.TEXTURE_2D,h);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,d);h.width=f;h.height=g;h.id=this.$count++;this.setTextureParams(b);c.bindTexture(c.TEXTURE_2D,e);"undefined"!==typeof a.src&&(Tilt.$loadedTextures[a.src]=
h);return h},setTextureParams:function(a){var b=Tilt.$gl,c=b.TEXTURE_MIN_FILTER,d=b.TEXTURE_MAG_FILTER,e=b.TEXTURE_WRAP_S,f=b.TEXTURE_WRAP_T,a=a||{};a.texture&&b.bindTexture(b.TEXTURE_2D,a.texture.ref);"nearest"===a.minFilter?b.texParameteri(b.TEXTURE_2D,c,b.NEAREST):"linear"===a.minFilter&&a.mipmap?b.texParameteri(b.TEXTURE_2D,c,b.LINEAR_MIPMAP_LINEAR):b.texParameteri(b.TEXTURE_2D,c,b.LINEAR);"nearest"===a.magFilter?b.texParameteri(b.TEXTURE_2D,d,b.NEAREST):"linear"===a.magFilter&&a.mipmap?b.texParameteri(b.TEXTURE_2D,
d,b.LINEAR_MIPMAP_LINEAR):b.texParameteri(b.TEXTURE_2D,d,b.LINEAR);"repeat"===a.wrapS?b.texParameteri(b.TEXTURE_2D,e,b.REPEAT):b.texParameteri(b.TEXTURE_2D,e,b.CLAMP_TO_EDGE);"repeat"===a.wrapT?b.texParameteri(b.TEXTURE_2D,f,b.REPEAT):b.texParameteri(b.TEXTURE_2D,f,b.CLAMP_TO_EDGE);a.mipmap&&b.generateMipmap(b.TEXTURE_2D)},resizeImageToPowerOfTwo:function(a,b){var c=(a.src||"").indexOf("chrome://"),d=Tilt.Math.isPowerOfTwo(a.width),e=Tilt.Math.isPowerOfTwo(a.height);if(d&&e&&c===-1)return a;b=b||
{};c=Tilt.Math.nextPowerOfTwo(a.width);d=Tilt.Math.nextPowerOfTwo(a.height);c=Tilt.Document.initCanvas(c,d);d=c.getContext("2d");if(b.fill)d.fillStyle=b.fill,d.fillRect(0,0,c.width,c.height);d.drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);if(b.stroke)d.strokeStyle=b.stroke,d.lineWidth=b.strokeWeight,d.strokeRect(0,0,c.width,c.height);return c},setTextureFlipY:function(a){Tilt.$gl.pixelStorei(Tilt.$gl.UNPACK_FLIP_Y_WEBGL,a)},$count:0};
function style_html(a,b){var c,d,e,f,b=b||{};d=b.indent_size||2;e=b.indent_char||" ";f=b.brace_style||"collapse";c=new function(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.token_text=this.last_token=this.last_text=this.token_type=this.tag_type="";this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),
in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}};this.get_content=function(){for(var a="",b=[],c=!1;this.input.charAt(this.pos)!=="<";){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.pos);this.pos++;this.line_char_count++;if(this.Utils.in_array(a,this.Utils.whitespace))b.length&&(c=!0),this.line_char_count--;else{if(c){if(this.line_char_count>=this.max_char){b.push("\n");for(c=0;c<this.indent_level;c++)b.push(this.indent_string);
this.line_char_count=0}else b.push(" "),this.line_char_count++;c=!1}b.push(a)}}return b.length?b.join(""):""};this.get_script=function(){var a="",b=[],a=/<\/script>/igm;a.lastIndex=this.pos;for(var c=(a=a.exec(this.input))?a.index:this.input.length;this.pos<c;){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.pos);this.pos++;b.push(a)}return b.length?b.join(""):""};this.record_tag=function(a){this.tags[a+"count"]?this.tags[a+"count"]++:this.tags[a+"count"]=
1;this.tags[a+this.tags[a+"count"]]=this.indent_level;this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent;this.tags.parent=a+this.tags[a+"count"]};this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b;){if(a+this.tags[a+"count"]===b)break;b=this.tags[b+"parent"]}if(b)this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"];delete this.tags[a+this.tags[a+"count"]+"parent"];delete this.tags[a+this.tags[a+"count"]];this.tags[a+"count"]==
1?delete this.tags[a+"count"]:this.tags[a+"count"]--}};this.get_tag=function(){var a="",b=[],c=!1;do{if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.pos);this.pos++;this.line_char_count++;if(this.Utils.in_array(a,this.Utils.whitespace))c=!0,this.line_char_count--;else{if(a==="'"||a==='"')if(!b[1]||b[1]!=="!")a+=this.get_unformatted(a),c=!0;a==="="&&(c=!1);if(b.length&&b[b.length-1]!=="="&&a!==">"&&c)this.line_char_count>=this.max_char?(this.print_newline(!1,
b),this.line_char_count=0):(b.push(" "),this.line_char_count++),c=!1;b.push(a)}}while(a!==">");a=b.join("");c=a.indexOf(" ")!=-1?a.indexOf(" "):a.indexOf(">");c=a.substring(1,c).toLowerCase();a.charAt(a.length-2)==="/"||this.Utils.in_array(c,this.Utils.single_token)?this.tag_type="SINGLE":c==="script"?(this.record_tag(c),this.tag_type="SCRIPT"):c==="style"?(this.record_tag(c),this.tag_type="STYLE"):c==="a"?(a=this.get_unformatted("</a>",a),b.push(a),this.tag_type="SINGLE"):c.charAt(0)==="!"?c.indexOf("[if")!=
-1?(a.indexOf("!IE")!=-1&&(a=this.get_unformatted("--\>",a),b.push(a)),this.tag_type="START"):c.indexOf("[endif")!=-1?(this.tag_type="END",this.unindent()):(a=c.indexOf("[cdata[")!=-1?this.get_unformatted("]]\>",a):this.get_unformatted("--\>",a),b.push(a),this.tag_type="SINGLE"):(c.charAt(0)==="/"?(this.retrieve_tag(c.substring(1)),this.tag_type="END"):(this.record_tag(c),this.tag_type="START"),this.Utils.in_array(c,this.Utils.extra_liners)&&this.print_newline(!0,this.output));return b.join("")};
this.get_unformatted=function(a,b){if(b&&b.indexOf(a)!=-1)return"";var c="",d="",e=!0;do{if(this.pos>=this.input.length)break;c=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(c,this.Utils.whitespace)){if(!e){this.line_char_count--;continue}if(c==="\n"||c==="\r"){d+="\n";for(c=0;c<this.indent_level;c++)d+=this.indent_string;e=!1;this.line_char_count=0;continue}}d+=c;this.line_char_count++;e=!0}while(d.indexOf(a)==-1);return d};this.get_token=function(){var a;if(this.last_token==="TK_TAG_SCRIPT"){a=
this.get_script();if(typeof a!=="string")return a;a=js_beautify(a,{indent_size:this.indent_size,indent_char:this.indent_character,indent_level:this.indent_level,brace_style:this.brace_style});return[a.replace(/^[\t ]+/,""),"TK_CONTENT"]}if(this.current_mode==="CONTENT")return a=this.get_content(),typeof a!=="string"?a:[a,"TK_CONTENT"];if(this.current_mode==="TAG")return a=this.get_tag(),typeof a!=="string"?a:[a,"TK_TAG_"+this.tag_type]};this.printer=function(a,b,c,d,e){this.input=a||"";this.output=
[];this.indent_character=b;this.indent_string="";this.indent_size=c;this.brace_style=e;this.indent_level=0;this.max_char=d;for(a=this.line_char_count=0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0;if(b&&b.length){if(!a)for(;this.Utils.in_array(b[b.length-1],this.Utils.whitespace);)b.pop();b.push("\n");for(var c=0;c<this.indent_level;c++)b.push(this.indent_string)}};this.print_token=function(a){this.output.push(a)};this.indent=
function(){this.indent_level++};this.unindent=function(){this.indent_level>0&&this.indent_level--}};return this};for(c.printer(a,e,d,80,f);;){d=c.get_token();c.token_text=d[0];c.token_type=d[1];if(c.token_type==="TK_EOF")break;switch(c.token_type){case "TK_TAG_START":case "TK_TAG_SCRIPT":case "TK_TAG_STYLE":c.print_newline(!1,c.output);c.print_token(c.token_text);c.indent();c.current_mode="CONTENT";break;case "TK_TAG_END":c.print_newline(!0,c.output);c.print_token(c.token_text);c.current_mode="CONTENT";
break;case "TK_TAG_SINGLE":c.print_newline(!1,c.output);c.print_token(c.token_text);c.current_mode="CONTENT";break;case "TK_CONTENT":c.token_text!==""&&(c.print_newline(!1,c.output),c.print_token(c.token_text)),c.current_mode="TAG"}c.last_token=c.token_type;c.last_text=c.token_text}return c.output.join("")}
function js_beautify(a,b){function c(a){for(a=typeof a==="undefined"?!1:a;n.length&&(n[n.length-1]===" "||n[n.length-1]===B||n[n.length-1]===O||a&&(n[n.length-1]==="\n"||n[n.length-1]==="\r"));)n.pop()}function d(a){return a.replace(/^\s\s*|\s\s*$/,"")}function e(){var a=H;H=!1;f();H=a}function f(a){k.eat_next_space=!1;if(!H||!l(k.mode))if(a=typeof a==="undefined"?!0:a,k.if_line=!1,c(),n.length){if(n[n.length-1]!=="\n"||!a)K=!0,n.push("\n");O&&n.push(O);for(a=0;a<k.indentation_level;a+=1)n.push(B);
k.var_line&&k.var_line_reindented&&(R===" "?n.push("    "):n.push(B))}}function g(){if(k.eat_next_space)k.eat_next_space=!1;else{var a=" ";n.length&&(a=n[n.length-1]);a!==" "&&a!=="\n"&&a!==B&&n.push(" ")}}function h(){K=!1;k.eat_next_space=!1;n.push(u)}function i(){n.length&&n[n.length-1]===B&&n.pop()}function j(a){k&&C.push(k);k={previous_mode:k?k.mode:"BLOCK",mode:a,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case:!1,eat_next_space:!1,indentation_baseline:-1,
indentation_level:k?k.indentation_level+(k.var_line&&k.var_line_reindented?1:0):0,ternary_depth:0}}function l(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"}function q(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"||a==="(EXPRESSION)"}function v(){P=k.mode==="DO_BLOCK";C.length>0&&(k=C.pop())}function r(a,b){for(var c=0;c<a.length;c++)if(d(a[c])[0]!=b)return!1;return!0}function p(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function w(){I=0;if(m>=D)return["",
"TK_EOF"];N=!1;var a=o.charAt(m);m+=1;if(H&&l(k.mode)){for(var b=0;p(a,E);){a==="\n"?(c(),n.push("\n"),K=!0,b=0):a==="\t"?b+=4:a!=="\r"&&(b+=1);if(m>=D)return["","TK_EOF"];a=o.charAt(m);m+=1}if(k.indentation_baseline===-1)k.indentation_baseline=b;if(K){var e;for(e=0;e<k.indentation_level+1;e+=1)n.push(B);if(k.indentation_baseline!==-1)for(e=0;e<b-k.indentation_baseline;e++)n.push(" ")}}else{for(;p(a,E);){a==="\n"&&(I+=S?I<=S?1:0:1);if(m>=D)return["","TK_EOF"];a=o.charAt(m);m+=1}if(Q&&I>1)for(e=0;e<
I;e+=1)f(e===0),K=!0;N=I>0}if(p(a,F)){if(m<D)for(;p(o.charAt(m),F);)if(a+=o.charAt(m),m+=1,m===D)break;if(m!==D&&a.match(/^[0-9]+[Ee]$/)&&(o.charAt(m)==="-"||o.charAt(m)==="+"))return b=o.charAt(m),m+=1,e=w(m),a+=b+e[0],[a,"TK_WORD"];if(a==="in")return[a,"TK_OPERATOR"];N&&s!=="TK_OPERATOR"&&s!=="TK_EQUALS"&&!k.if_line&&(Q||t!=="var")&&f();return[a,"TK_WORD"]}if(a==="("||a==="[")return[a,"TK_START_EXPR"];if(a===")"||a==="]")return[a,"TK_END_EXPR"];if(a==="{")return[a,"TK_START_BLOCK"];if(a==="}")return[a,
"TK_END_BLOCK"];if(a===";")return[a,"TK_SEMICOLON"];if(a==="/"){b="";e=!0;if(o.charAt(m)==="*"){m+=1;if(m<D)for(;!(o.charAt(m)==="*"&&o.charAt(m+1)&&o.charAt(m+1)==="/")&&m<D;){a=o.charAt(m);b+=a;if(a==="\r"||a==="\n")e=!1;m+=1;if(m>=D)break}m+=2;return e?["/*"+b+"*/","TK_INLINE_COMMENT"]:["/*"+b+"*/","TK_BLOCK_COMMENT"]}if(o.charAt(m)==="/"){for(b=a;o.charAt(m)!=="\r"&&o.charAt(m)!=="\n";)if(b+=o.charAt(m),m+=1,m>=D)break;m+=1;N&&f();return[b,"TK_COMMENT"]}}if(a==="'"||a==='"'||a==="/"&&(s==="TK_WORD"&&
p(t,["return","do"])||s==="TK_COMMENT"||s==="TK_START_EXPR"||s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_OPERATOR"||s==="TK_EQUALS"||s==="TK_EOF"||s==="TK_SEMICOLON")){b=a;e=!1;var g=a;if(m<D)if(b==="/")for(a=!1;e||a||o.charAt(m)!==b;){if(g+=o.charAt(m),e?e=!1:(e=o.charAt(m)==="\\",o.charAt(m)==="["?a=!0:o.charAt(m)==="]"&&(a=!1)),m+=1,m>=D)return[g,"TK_STRING"]}else for(;e||o.charAt(m)!==b;)if(g+=o.charAt(m),e=e?!1:o.charAt(m)==="\\",m+=1,m>=D)return[g,"TK_STRING"];m+=1;g+=b;if(b==="/")for(;m<
D&&p(o.charAt(m),F);)g+=o.charAt(m),m+=1;return[g,"TK_STRING"]}if(a==="#"){if(n.length===0&&o.charAt(m)==="!"){for(g=a;m<D&&a!="\n";)a=o.charAt(m),g+=a,m+=1;n.push(d(g)+"\n");f();return w()}b="#";if(m<D&&p(o.charAt(m),L)){do a=o.charAt(m),b+=a,m+=1;while(m<D&&a!=="#"&&a!=="=");a!=="#"&&(o.charAt(m)==="["&&o.charAt(m+1)==="]"?(b+="[]",m+=2):o.charAt(m)==="{"&&o.charAt(m+1)==="}"&&(b+="{}",m+=2));return[b,"TK_WORD"]}}if(a==="<"&&o.substring(m-1,m+3)==="<\!--")return m+=3,k.in_html_comment=!0,["<\!--",
"TK_COMMENT"];if(a==="-"&&k.in_html_comment&&o.substring(m-1,m+2)==="--\>")return k.in_html_comment=!1,m+=2,N&&f(),["--\>","TK_COMMENT"];if(p(a,G)){for(;m<D&&p(a+o.charAt(m),G);)if(a+=o.charAt(m),m+=1,m>=D)break;return a==="="?[a,"TK_EQUALS"]:[a,"TK_OPERATOR"]}return[a,"TK_UNKNOWN"]}var o,n,u,s,t,x,y,k,C,B,E,F,G,m,A,L,z,M,P,N,K,I,O="",b=b?b:{},J;if(b.space_after_anon_function!==void 0&&b.jslint_happy===void 0)b.jslint_happy=b.space_after_anon_function;b.braces_on_own_line!==void 0&&(J=b.braces_on_own_line?
"expand":"collapse");J=b.brace_style?b.brace_style:J?J:"collapse";y=b.indent_size?b.indent_size:2;var R=b.indent_char?b.indent_char:" ",Q=typeof b.preserve_newlines==="undefined"?!0:b.preserve_newlines,S=typeof b.max_preserve_newlines==="undefined"?!1:b.max_preserve_newlines,T=b.jslint_happy==="undefined"?!1:b.jslint_happy,H=typeof b.keep_array_indentation==="undefined"?!1:b.keep_array_indentation;K=!1;var D=a.length;for(B="";y>0;)B+=R,y-=1;for(;a&&(a[0]===" "||a[0]==="\t");)O+=a[0],a=a.substring(1);
o=a;y="";s="TK_START_EXPR";x=t="";n=[];P=!1;E="\n\r\t ".split("");F="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");L="0123456789".split("");G="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(" ");A="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(",");C=[];j("BLOCK");for(m=0;;){M=w(m);u=M[0];M=M[1];if(M==="TK_EOF")break;switch(M){case "TK_START_EXPR":if(u===
"["){if(s==="TK_WORD"||t===")"){p(t,A)&&g();j("(EXPRESSION)");h();break}if(k.mode==="[EXPRESSION]"||k.mode==="[INDENTED-EXPRESSION]")if(x==="]"&&t===","){if(k.mode==="[EXPRESSION]")k.mode="[INDENTED-EXPRESSION]",H||(k.indentation_level+=1);j("[EXPRESSION]");H||f()}else if(t==="["){if(k.mode==="[EXPRESSION]")k.mode="[INDENTED-EXPRESSION]",H||(k.indentation_level+=1);j("[EXPRESSION]");H||f()}else j("[EXPRESSION]");else j("[EXPRESSION]")}else j("(EXPRESSION)");t===";"||s==="TK_START_BLOCK"?f():s==="TK_END_EXPR"||
s==="TK_START_EXPR"||s==="TK_END_BLOCK"||t==="."||(s!=="TK_WORD"&&s!=="TK_OPERATOR"?g():y==="function"||y==="typeof"?T&&g():(p(t,A)||t==="catch")&&g());h();break;case "TK_END_EXPR":if(u==="]")if(H){if(t==="}"){i();h();v();break}}else if(k.mode==="[INDENTED-EXPRESSION]"&&t==="]"){v();f();h();break}v();h();break;case "TK_START_BLOCK":y==="do"?j("DO_BLOCK"):j("BLOCK");J=="expand"?(s!=="TK_OPERATOR"&&(t==="return"||t==="="?g():f(!0)),h(),k.indentation_level+=1):(s!=="TK_OPERATOR"&&s!=="TK_START_EXPR"?
s==="TK_START_BLOCK"?f():g():l(k.previous_mode)&&t===","&&(x==="}"?g():f()),k.indentation_level+=1,h());break;case "TK_END_BLOCK":v();J=="expand"?t!=="{"&&f():s==="TK_START_BLOCK"?K?i():c():l(k.mode)&&H?(H=!1,f(),H=!0):f();h();break;case "TK_WORD":if(P){g();h();g();P=!1;break}if(u==="function"){if(k.var_line)k.var_line_reindented=!0;if((K||t===";")&&t!=="{"){I=K?I:0;Q||(I=1);for(z=0;z<2-I;z++)f(!1)}}if(u==="case"||u==="default"){t===":"?i():(k.indentation_level--,f(),k.indentation_level++);h();k.in_case=
!0;break}z="NONE";s==="TK_END_BLOCK"?p(u.toLowerCase(),["else","catch","finally"])?J=="expand"||J=="end-expand"?z="NEWLINE":(z="SPACE",g()):z="NEWLINE":s==="TK_SEMICOLON"&&(k.mode==="BLOCK"||k.mode==="DO_BLOCK")?z="NEWLINE":s==="TK_SEMICOLON"&&q(k.mode)?z="SPACE":s==="TK_STRING"?z="NEWLINE":s==="TK_WORD"?(t==="else"&&c(!0),z="SPACE"):s==="TK_START_BLOCK"?z="NEWLINE":s==="TK_END_EXPR"&&(g(),z="NEWLINE");p(u,A)&&t!==")"&&(z=t=="else"?"SPACE":"NEWLINE");if(k.if_line&&s==="TK_END_EXPR")k.if_line=!1;if(p(u.toLowerCase(),
["else","catch","finally"]))s!=="TK_END_BLOCK"||J=="expand"||J=="end-expand"?f():(c(!0),g());else if(z==="NEWLINE"){if(!((s==="TK_START_EXPR"||t==="="||t===",")&&u==="function"))if(u==="function"&&t=="new")g();else if(t==="return"||t==="throw")g();else if(s!=="TK_END_EXPR"){if((s!=="TK_START_EXPR"||u!=="var")&&t!==":")u==="if"&&y==="else"&&t!=="{"?g():(k.var_line=!1,k.var_line_reindented=!1,f())}else if(p(u,A)&&t!=")")k.var_line=!1,k.var_line_reindented=!1,f()}else l(k.mode)&&t===","&&x==="}"?f():
z==="SPACE"&&g();h();y=u;if(u==="var")k.var_line=!0,k.var_line_reindented=!1,k.var_line_tainted=!1;if(u==="if")k.if_line=!0;if(u==="else")k.if_line=!1;break;case "TK_SEMICOLON":h();k.var_line=!1;k.var_line_reindented=!1;if(k.mode=="OBJECT")k.mode="BLOCK";break;case "TK_STRING":s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_SEMICOLON"?f():s==="TK_WORD"&&g();h();break;case "TK_EQUALS":if(k.var_line)k.var_line_tainted=!0;g();h();g();break;case "TK_OPERATOR":z=x=!0;if(k.var_line&&u===","&&q(k.mode))k.var_line_tainted=
!1;if(k.var_line&&u===",")if(k.var_line_tainted){h();k.var_line_reindented=!0;k.var_line_tainted=!1;f();break}else k.var_line_tainted=!1;if(t==="return"||t==="throw"){g();h();break}if(u===":"&&k.in_case){h();f();k.in_case=!1;break}if(u==="::"){h();break}if(u===","){k.var_line?k.var_line_tainted?(h(),f(),k.var_line_tainted=!1):(h(),g()):s==="TK_END_BLOCK"&&k.mode!=="(EXPRESSION)"?(h(),k.mode==="OBJECT"&&t==="}"?f():g()):k.mode==="OBJECT"?(h(),f()):(h(),g());break}else p(u,["--","++","!"])||p(u,["-",
"+"])&&(p(s,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||p(t,A))?(z=x=!1,t===";"&&q(k.mode)&&(x=!0),s==="TK_WORD"&&p(t,A)&&(x=!0),k.mode==="BLOCK"&&(t==="{"||t===";")&&f()):u==="."?x=!1:u===":"?k.ternary_depth==0?(k.mode="OBJECT",x=!1):k.ternary_depth-=1:u==="?"&&(k.ternary_depth+=1);x&&g();h();z&&g();break;case "TK_BLOCK_COMMENT":x=u.split(/\x0a|\x0d\x0a/);if(r(x.slice(1),"*")){f();n.push(x[0]);for(z=1;z<x.length;z++)f(),n.push(" "),n.push(d(x[z]))}else{x.length>1?(f(),c()):g();
for(z=0;z<x.length;z++)n.push(x[z]),n.push("\n")}f();break;case "TK_INLINE_COMMENT":g();h();q(k.mode)?g():e();break;case "TK_COMMENT":N?f():g();h();e();break;case "TK_UNKNOWN":(t==="return"||t==="throw")&&g(),h()}x=t;s=M;t=u}return O+n.join("").replace(/[\n ]+$/,"")}if(typeof exports!=="undefined")exports.js_beautify=js_beautify;var glMatrixArrayType,vec3,mat3,mat4,quat4;glMatrixArrayType=typeof Float32Array!="undefined"?Float32Array:typeof WebGLFloatArray!="undefined"?WebGLFloatArray:Array;
vec3={create:function(a){var b=new glMatrixArrayType(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},add:function(a,b,c){if(!c||a==c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a==c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,
b,c){if(!c||a==c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(f){if(f==1)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return b},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1],a=a[2],f=b[0],g=b[1],b=b[2];c[0]=e*b-a*g;c[1]=a*f-d*b;c[2]=d*g-e*f;return c},length:function(a){var b=a[0],c=a[1],a=a[2];return Math.sqrt(b*b+c*c+a*a)},
dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1],a=a[2]-b[2],b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"}};
mat3={create:function(a){var b=new glMatrixArrayType(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];
b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}};
mat4={create:function(a){var b=new glMatrixArrayType(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=f;a[11]=a[14];a[12]=e;a[13]=g;a[14]=h;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=
a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],l=a[9],q=a[10],v=a[11],r=a[12],p=a[13],w=a[14],a=a[15];return r*l*h*e-j*p*h*e-r*g*q*e+f*p*q*e+j*g*w*e-f*l*w*e-r*l*d*i+j*p*d*i+r*c*q*i-b*p*q*i-j*c*w*i+b*l*w*i+r*g*d*v-f*p*d*v-r*c*h*v+b*p*h*v+f*c*w*v-b*g*w*v-j*g*d*a+f*l*d*a+j*c*h*a-b*l*h*a-f*c*q*a+b*g*q*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],l=a[8],q=a[9],v=a[10],r=a[11],p=a[12],w=a[13],o=a[14],n=a[15],u=c*h-d*g,s=c*i-e*g,t=c*j-f*g,x=
d*i-e*h,y=d*j-f*h,k=e*j-f*i,C=l*w-q*p,B=l*o-v*p,E=l*n-r*p,F=q*o-v*w,G=q*n-r*w,m=v*n-r*o,A=1/(u*m-s*G+t*F+x*E-y*B+k*C);b[0]=(h*m-i*G+j*F)*A;b[1]=(-d*m+e*G-f*F)*A;b[2]=(w*k-o*y+n*x)*A;b[3]=(-q*k+v*y-r*x)*A;b[4]=(-g*m+i*E-j*B)*A;b[5]=(c*m-e*E+f*B)*A;b[6]=(-p*k+o*t-n*s)*A;b[7]=(l*k-v*t+r*s)*A;b[8]=(g*G-h*E+j*C)*A;b[9]=(-c*G+d*E-f*C)*A;b[10]=(p*y-w*t+n*u)*A;b[11]=(-l*y+q*t-r*u)*A;b[12]=(-g*F+h*B-i*C)*A;b[13]=(c*F-d*B+e*C)*A;b[14]=(-p*x+w*s-o*u)*A;b[15]=(l*x-q*s+v*u)*A;return b}};
mat4.toRotationMat=function(a,b){b||(b=mat4.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};mat4.toMat3=function(a,b){b||(b=mat3.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};
mat4.toInverseMat3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],i=a[8],j=a[9],l=a[10],q=l*g-h*j,v=-l*f+h*i,r=j*f-g*i,p=c*q+d*v+e*r;if(!p)return null;p=1/p;b||(b=mat3.create());b[0]=q*p;b[1]=(-l*d+e*j)*p;b[2]=(h*d-e*g)*p;b[3]=v*p;b[4]=(l*c-e*i)*p;b[5]=(-h*c+e*f)*p;b[6]=r*p;b[7]=(-j*c+d*i)*p;b[8]=(g*c-d*f)*p;return b};
mat4.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],l=a[7],q=a[8],v=a[9],r=a[10],p=a[11],w=a[12],o=a[13],n=a[14],a=a[15],u=b[0],s=b[1],t=b[2],x=b[3],y=b[4],k=b[5],C=b[6],B=b[7],E=b[8],F=b[9],G=b[10],m=b[11],A=b[12],L=b[13],z=b[14],b=b[15];c[0]=u*d+s*h+t*q+x*w;c[1]=u*e+s*i+t*v+x*o;c[2]=u*f+s*j+t*r+x*n;c[3]=u*g+s*l+t*p+x*a;c[4]=y*d+k*h+C*q+B*w;c[5]=y*e+k*i+C*v+B*o;c[6]=y*f+k*j+C*r+B*n;c[7]=y*g+k*l+C*p+B*a;c[8]=E*d+F*h+G*q+m*w;c[9]=E*e+F*i+G*v+m*o;c[10]=E*f+F*
j+G*r+m*n;c[11]=E*g+F*l+G*p+m*a;c[12]=A*d+L*h+z*q+b*w;c[13]=A*e+L*i+z*v+b*o;c[14]=A*f+L*j+z*r+b*n;c[15]=A*g+L*l+z*p+b*a;return c};mat4.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c};
mat4.multiplyVec4=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b;return c};
mat4.translate=function(a,b,c){var d=b[0],e=b[1],b=b[2];if(!c||a==c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;var f=a[0],g=a[1],h=a[2],i=a[3],j=a[4],l=a[5],q=a[6],v=a[7],r=a[8],p=a[9],w=a[10],o=a[11];c[0]=f;c[1]=g;c[2]=h;c[3]=i;c[4]=j;c[5]=l;c[6]=q;c[7]=v;c[8]=r;c[9]=p;c[10]=w;c[11]=o;c[12]=f*d+j*e+r*b+a[12];c[13]=g*d+l*e+p*b+a[13];c[14]=h*d+q*e+w*b+a[14];c[15]=i*d+v*e+o*b+a[15];return c};
mat4.scale=function(a,b,c){var d=b[0],e=b[1],b=b[2];if(!c||a==c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};
mat4.rotate=function(a,b,c,d){var e=c[0],f=c[1],c=c[2],g=Math.sqrt(e*e+f*f+c*c);if(!g)return null;g!=1&&(g=1/g,e*=g,f*=g,c*=g);var h=Math.sin(b),i=Math.cos(b),j=1-i,b=a[0],g=a[1],l=a[2],q=a[3],v=a[4],r=a[5],p=a[6],w=a[7],o=a[8],n=a[9],u=a[10],s=a[11],t=e*e*j+i,x=f*e*j+c*h,y=c*e*j-f*h,k=e*f*j-c*h,C=f*f*j+i,B=c*f*j+e*h,E=e*c*j+f*h,e=f*c*j-e*h,f=c*c*j+i;d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*t+v*x+o*y;d[1]=g*t+r*x+n*y;d[2]=l*t+p*x+u*y;d[3]=q*t+w*x+s*y;d[4]=b*k+v*C+o*B;d[5]=
g*k+r*C+n*B;d[6]=l*k+p*C+u*B;d[7]=q*k+w*C+s*B;d[8]=b*E+v*e+o*f;d[9]=g*E+r*e+n*f;d[10]=l*E+p*e+u*f;d[11]=q*E+w*e+s*f;return d};mat4.rotateX=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[4],f=a[5],g=a[6],h=a[7],i=a[8],j=a[9],l=a[10],q=a[11];c?a!=c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+i*d;c[5]=f*b+j*d;c[6]=g*b+l*d;c[7]=h*b+q*d;c[8]=e*-d+i*b;c[9]=f*-d+j*b;c[10]=g*-d+l*b;c[11]=h*-d+q*b;return c};
mat4.rotateY=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[0],f=a[1],g=a[2],h=a[3],i=a[8],j=a[9],l=a[10],q=a[11];c?a!=c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+i*-d;c[1]=f*b+j*-d;c[2]=g*b+l*-d;c[3]=h*b+q*-d;c[8]=e*d+i*b;c[9]=f*d+j*b;c[10]=g*d+l*b;c[11]=h*d+q*b;return c};
mat4.rotateZ=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],l=a[6],q=a[7];c?a!=c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+i*d;c[1]=f*b+j*d;c[2]=g*b+l*d;c[3]=h*b+q*d;c[4]=e*-d+i*b;c[5]=f*-d+j*b;c[6]=g*-d+l*b;c[7]=h*-d+q*b;return c};
mat4.frustum=function(a,b,c,d,e,f,g){g||(g=mat4.create());var h=b-a,i=d-c,j=f-e;g[0]=e*2/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=e*2/i;g[6]=0;g[7]=0;g[8]=(b+a)/h;g[9]=(d+c)/i;g[10]=-(f+e)/j;g[11]=-1;g[12]=0;g[13]=0;g[14]=-(f*e*2)/j;g[15]=0;return g};mat4.perspective=function(a,b,c,d,e,f){a=c*Math.tan(a*Math.PI/360);b*=a;return mat4.frustum(-b,b,-a*(f?-1:1),a*(f?-1:1),c,d,e)};
mat4.ortho=function(a,b,c,d,e,f,g){g||(g=mat4.create());var h=b-a,i=d-c,j=f-e;g[0]=2/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/i;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=-2/j;g[11]=0;g[12]=-(a+b)/h;g[13]=-(d+c)/i;g[14]=-(f+e)/j;g[15]=1;return g};
mat4.lookAt=function(a,b,c,d){d||(d=mat4.create());var e=a[0],f=a[1],a=a[2],g=c[0],h=c[1],i=c[2],c=b[1],j=b[2];if(e==b[0]&&f==c&&a==j)return mat4.identity(d);var l,q,v,r,c=e-b[0],j=f-b[1],b=a-b[2];r=1/Math.sqrt(c*c+j*j+b*b);c*=r;j*=r;b*=r;l=h*b-i*j;i=i*c-g*b;g=g*j-h*c;(r=Math.sqrt(l*l+i*i+g*g))?(r=1/r,l*=r,i*=r,g*=r):g=i=l=0;h=j*g-b*i;q=b*l-c*g;v=c*i-j*l;(r=Math.sqrt(h*h+q*q+v*v))?(r=1/r,h*=r,q*=r,v*=r):v=q=h=0;d[0]=l;d[1]=h;d[2]=c;d[3]=0;d[4]=i;d[5]=q;d[6]=j;d[7]=0;d[8]=g;d[9]=v;d[10]=b;d[11]=0;
d[12]=-(l*e+i*f+g*a);d[13]=-(h*e+q*f+v*a);d[14]=-(c*e+j*f+b*a);d[15]=1;return d};mat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"};
quat4={create:function(a){var b=new glMatrixArrayType(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},calculateW:function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b},inverse:function(a,b){if(!b||a==b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b},length:function(a){var b=
a[0],c=a[1],d=a[2],a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);if(g==0)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=f*g;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],a=a[3],g=b[0],h=b[1],i=b[2],b=b[3];c[0]=d*b+a*g+e*i-f*h;c[1]=e*b+a*h+f*g-d*i;c[2]=f*b+a*i+d*h-e*g;c[3]=a*b-d*g-e*h-f*i;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],
b=a[0],g=a[1],h=a[2],a=a[3],i=a*d+g*f-h*e,j=a*e+h*d-b*f,l=a*f+b*e-g*d,d=-b*d-g*e-h*f;c[0]=i*a+d*-b+j*-h-l*-g;c[1]=j*a+d*-g+l*-b-i*-h;c[2]=l*a+d*-h+i*-g-j*-b;return c},toMat3:function(a,b){b||(b=mat3.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,l=c*h;c*=i;var q=d*h;d*=i;e*=i;g*=f;h*=f;f*=i;b[0]=1-(q+e);b[1]=l-f;b[2]=c+h;b[3]=l+f;b[4]=1-(j+e);b[5]=d-g;b[6]=c-h;b[7]=d+g;b[8]=1-(j+q);return b},toMat4:function(a,b){b||(b=mat4.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=
e+e,j=c*g,l=c*h;c*=i;var q=d*h;d*=i;e*=i;g*=f;h*=f;f*=i;b[0]=1-(q+e);b[1]=l-f;b[2]=c+h;b[3]=0;b[4]=l+f;b[5]=1-(j+e);b[6]=d-g;b[7]=0;b[8]=c-h;b[9]=d+g;b[10]=1-(j+q);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},slerp:function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(Math.abs(e)>=1)return d!=a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;var f=Math.acos(e),g=Math.sqrt(1-e*e);if(Math.abs(g)<0.0010)return d[0]=a[0]*0.5+b[0]*0.5,d[1]=a[1]*0.5+b[1]*0.5,d[2]=a[2]*0.5+b[2]*0.5,
d[3]=a[3]*0.5+b[3]*0.5,d;e=Math.sin((1-c)*f)/g;c=Math.sin(c*f)/g;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};var JSON;JSON||(JSON={});
(function(){function a(a){return a<10?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var e,h,r,p,w=f,o,n=d[a];n&&typeof n==="object"&&typeof n.toJSON==="function"&&(n=n.toJSON(a));typeof i==="function"&&(n=i.call(d,a,n));switch(typeof n){case "string":return b(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";f+=g;o=[];if(Object.prototype.toString.apply(n)==="[object Array]"){p=n.length;for(e=0;e<p;e+=1)o[e]=c(e,n)||"null";r=o.length===0?"[]":f?"[\n"+f+o.join(",\n"+f)+"\n"+w+"]":"["+o.join(",")+"]";f=w;return r}if(i&&typeof i==="object"){p=i.length;for(e=0;e<p;e+=1)typeof i[e]==="string"&&(h=i[e],(r=c(h,n))&&o.push(b(h)+(f?": ":":")+r))}else for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&(r=c(h,n))&&o.push(b(h)+(f?": ":":")+r);r=o.length===0?"{}":f?"{\n"+f+o.join(",\n"+
f)+"\n"+w+"}":"{"+o.join(",")+"}";f=w;return r}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,d){var e;g=f="";if(typeof d==="number")for(e=0;e<d;e+=1)g+=" ";else typeof d==="string"&&(g=d);if((i=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&typeof g==="object")for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=c(g,e),f!==void 0?g[e]=f:delete g[e]);return b.call(a,d,g)}var e,a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),typeof b==="function"?c({"":e},""):e;throw new SyntaxError("JSON.parse");}})();Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Cube"];
Tilt.Cube=function(a,b,c){Tilt.Profiler.intercept("Tilt.Cube",this);a=a||1;b=b||1;c=c||1;this.vertices=new Tilt.VertexBuffer([-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,0.5*a,0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,0.5*a,-0.5*b,-0.5*c,0.5*a,-0.5*b,0.5*c,-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c,0.5*a,
0.5*b,0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,-0.5*c],3);this.texCoord=new Tilt.VertexBuffer([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],2);this.indices=new Tilt.IndexBuffer([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23])};Tilt.Cube.prototype={destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.CubeWireframe"];
Tilt.CubeWireframe=function(a,b,c){Tilt.Profiler.intercept("Tilt.CubeWireframe",this);a=a||1;b=b||1;c=c||1;this.vertices=new Tilt.VertexBuffer([-0.5*a,-0.5*b,0.5*c,0.5*a,-0.5*b,0.5*c,0.5*a,0.5*b,0.5*c,-0.5*a,0.5*b,0.5*c,0.5*a,-0.5*b,-0.5*c,-0.5*a,-0.5*b,-0.5*c,-0.5*a,0.5*b,-0.5*c,0.5*a,0.5*b,-0.5*c],3);this.indices=new Tilt.IndexBuffer([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,5,1,4,2,7,3,6])};Tilt.CubeWireframe.prototype={destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Rectangle"];
Tilt.Rectangle=function(){Tilt.Profiler.intercept("Tilt.Rectangle",this);this.vertices=new Tilt.VertexBuffer([0,0,1,0,0,1,1,1],2);this.texCoord=new Tilt.VertexBuffer([0,0,1,0,0,1,1,1],2)};Tilt.Rectangle.prototype={destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.RectangleWireframe"];Tilt.RectangleWireframe=function(){Tilt.Profiler.intercept("Tilt.RectangleWireframe",this);this.vertices=new Tilt.VertexBuffer([0,0,1,0,1,1,0,1],2)};
Tilt.RectangleWireframe.prototype={destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Mesh"];
Tilt.Mesh=function(a,b){Tilt.Profiler.intercept("Tilt.Mesh",this);for(var c in a)this[c]=a[c];if("string"===typeof this.color)this.color=Tilt.Math.hex2rgba(this.color);else if("undefined"===typeof this.color)this.color=[1,1,1,1];if("number"===typeof this.texalpha&&this.texalpha>1)this.texalpha/=255;else if("number"===typeof this.texalpha&&this.texalpha<0)this.texalpha=0;else if("undefined"===typeof this.texalpha)this.texalpha=1;if("undefined"===typeof this.drawMode)this.drawMode=Tilt.$renderer.TRIANGLES;
if("function"===typeof b)this.draw=b};Tilt.Mesh.prototype={draw:function(){if(this.hidden!==!0){var a=Tilt.$renderer,b=this.vertices,c=this.texCoord,d=this.indices,e=this.color,f=this.texalpha,g=this.texture,h=this.drawMode;g?a.useTextureShader(b,c,e,f,g):a.useColorShader(b,e);d?a.drawIndexedVertices(h,d):a.drawVertices(h,b.numItems);this.mvMatrix=mat4.create(a.mvMatrix);this.projMatrix=mat4.create(a.projMatrix)}},destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Renderer"];
Tilt.Renderer=function(a,b,c){Tilt.Profiler.intercept("Tilt.Renderer",this);this.canvas=a;this.gl=this.create3DContext(a);Tilt.clearCache();Tilt.$gl=this.gl;Tilt.$renderer=this;if("undefined"!==typeof this.gl&&this.gl!==null)this.TRIANGLES=this.gl.TRIANGLES,this.TRIANGLE_STRIP=this.gl.TRIANGLE_STRIP,this.TRIANGLE_FAN=this.gl.TRIANGLE_FAN,this.LINES=this.gl.LINES,this.LINE_STRIP=this.gl.LINE_STRIP,this.LINE_LOOP=this.gl.LINE_LOOP,this.POINTS=this.gl.POINTS,this.COLOR_BUFFER_BIT=this.gl.COLOR_BUFFER_BIT,
this.DEPTH_BUFFER_BIT=this.gl.DEPTH_BUFFER_BIT,this.STENCIL_BUFFER_BIT=this.gl.STENCIL_BUFFER_BIT,"function"===typeof c&&c();else if(Tilt.Console.log(Tilt.StringBundle.get("initWebGL.error")),"function"===typeof b){b();return}this.width=a.width;this.height=a.height;this.mvMatrixStack=[];this.mvMatrix=mat4.identity(mat4.create());this.projMatrix=mat4.identity(mat4.create());this.$clearColor=[0,0,0,0];this.$tintColor=[1,1,1,1];this.$fillColor=[1,1,1,1];this.$strokeColor=[0,0,0,1];this.$textureAlphaValue=
this.$strokeWeightValue=1;this.colorShader=new Tilt.Program(Tilt.Shaders.Color.vs,Tilt.Shaders.Color.fs);this.textureShader=new Tilt.Program(Tilt.Shaders.Texture.vs,Tilt.Shaders.Texture.fs);this.$rectangle=new Tilt.Rectangle;this.$rectangleWireframe=new Tilt.RectangleWireframe;this.$cube=new Tilt.Cube;this.$cubeWireframe=new Tilt.CubeWireframe;this.$lastTime=0;this.$currentTime=null;this.frameDelta=this.frameRate=this.frameCount=this.elapsedTime=0;this.origin();this.perspective();this.defaults()};
Tilt.Renderer.prototype={clear:function(a,b,c,d){var e=this.$clearColor,f=this.gl;if(e[0]!==a||e[1]!==b||e[2]!==c||e[3]!==d)e[0]=a,e[1]=b,e[2]=c,e[3]=d,f.clearColor(a,b,c,d),a*=255,b*=255,c*=255,d*=255,this.canvas.setAttribute("style",["background: rgba(",a,", ",b,", ",c,", ",d,"); width: 100%; height: 100%;"].join(""));f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)},background:function(a){a="string"===typeof a?Tilt.Math.hex2rgba(a):"undefined"===typeof a?[0,0,0,1]:"number"===typeof a?[a/255,a/255,
a/255,1]:[a[0]/255,a[1]/255,a[2]/255,a[3]/255];this.clear(a[0],a[1],a[2],a[3])},perspective:function(){var a=this.width,b=this.height,c=a/2,d=b/2,e=d/Math.tan(Tilt.Math.radians(45)/2);mat4.perspective(45,a/b,e/10,e*100,this.projMatrix,!0);mat4.translate(this.projMatrix,[-c,-d,-e]);mat4.identity(this.mvMatrix)},ortho:function(){mat4.ortho(0,this.width,this.height,0,-1E6,1E6,this.projMatrix);mat4.translate(this.projMatrix,[0,0,-999999]);mat4.identity(this.mvMatrix)},projection:function(a){mat4.set(a,
this.projMatrix)},pushMatrix:function(){this.mvMatrixStack.push(mat4.create(this.mvMatrix))},popMatrix:function(){if(this.mvMatrixStack.length>0)this.mvMatrix=this.mvMatrixStack.pop()},origin:function(){mat4.identity(this.mvMatrix)},transform:function(a){mat4.multiply(this.mvMatrix,a)},translate:function(a,b,c){mat4.translate(this.mvMatrix,[a,b,c||0])},rotate:function(a,b,c,d){mat4.rotate(this.mvMatrix,a,[b,c,d])},rotateX:function(a){mat4.rotateX(this.mvMatrix,a)},rotateY:function(a){mat4.rotateY(this.mvMatrix,
a)},rotateZ:function(a){mat4.rotateZ(this.mvMatrix,a)},scale:function(a,b,c){mat4.scale(this.mvMatrix,[a,b,c||0])},tint:function(a){this.$tintColor=Tilt.Math.hex2rgba(a)},noTint:function(){var a=this.$tintColor;a[0]=1;a[1]=1;a[2]=1;a[3]=1},fill:function(a){this.$fillColor=Tilt.Math.hex2rgba(a)},noFill:function(){var a=this.$fillColor;a[0]=0;a[1]=0;a[2]=0;a[3]=0},stroke:function(a){this.$strokeColor=Tilt.Math.hex2rgba(a)},noStroke:function(){var a=this.$strokeColor;a[0]=0;a[1]=0;a[2]=0;a[3]=0},strokeWeight:function(a){if(this.$strokeWeightValue!==
a)this.$strokeWeightValue=a,this.gl.lineWidth(a)},textureAlpha:function(a){if(this.$textureAlphaValue!==a/255)this.$textureAlphaValue=a/255},blendMode:function(a){var b=this.gl;"alpha"===a?(b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA)):"add"===a||"additive"===a?(b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE)):b.disable(b.BLEND)},depthTest:function(a){var b=this.gl;a?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST)},defaults:function(a,b){this.tint("#fff");this.fill("#fff");this.stroke("#000");
this.strokeWeight(1);this.textureAlpha(255);this.depthTest(a||!0);this.blendMode(b||"alpha")},useColorShader:function(a,b){var c=this.colorShader;c.use();c.bindVertexBuffer("vertexPosition",a);c.bindUniformMatrix("mvMatrix",this.mvMatrix);c.bindUniformMatrix("projMatrix",this.projMatrix);c.bindUniformVec4("color",b)},useTextureShader:function(a,b,c,d,e){var f=this.textureShader;f.use();f.bindVertexBuffer("vertexPosition",a);f.bindVertexBuffer("vertexTexCoord",b);f.bindUniformMatrix("mvMatrix",this.mvMatrix);
f.bindUniformMatrix("projMatrix",this.projMatrix);f.bindUniformVec4("color",c);f.bindUniformFloat("texalpha",d);f.bindTexture("sampler",e)},triangle:function(a,b,c){a=new Tilt.VertexBuffer(a.concat(b,c),3);b=this.$fillColor;c=this.$strokeColor;b[3]&&(this.useColorShader(a,b),this.drawVertices(this.TRIANGLE_STRIP,a.numItems));c[3]&&(this.useColorShader(a,c),this.drawVertices(this.LINE_LOOP,a.numItems))},rectMode:function(a){this.$rectangle.rectModeValue=a},rect:function(a,b,c,d){var e=this.$rectangle,
f=this.$rectangleWireframe,g=this.$fillColor,h=this.$strokeColor;"center"===this.$rectangle.rectModeValue&&(a-=c/2,b-=d/2);this.pushMatrix();this.translate(a,b,0);this.scale(c,d,1);g[3]&&(this.useColorShader(e.vertices,g),this.drawVertices(this.TRIANGLE_STRIP,e.vertices.numItems));h[3]&&(this.useColorShader(f.vertices,h),this.drawVertices(this.LINE_LOOP,f.vertices.numItems));this.popMatrix()},imageMode:function(a){this.$rectangle.imageModeValue=a},image:function(a,b,c,d,e,f){if(a.loaded){var g=this.$rectangle,
h=this.$tintColor,i=this.$textureAlphaValue,f=f||g.texCoord;if("undefined"===typeof d||"undefined"===typeof e)d=a.width,e=a.height;"center"===g.imageModeValue&&(b-=d/2,c-=e/2);h[3]&&(this.pushMatrix(),this.translate(b,c,0),this.scale(d,e,1),this.useTextureShader(g.vertices,f,h,i,a),this.drawVertices(this.TRIANGLE_STRIP,g.vertices.numItems),this.popMatrix())}},box:function(a,b,c,d){var e=this.$cube,f=this.$cubeWireframe,g=this.$tintColor,h=this.$fillColor,i=this.$strokeColor,j=this.$textureAlphaValue;
this.pushMatrix();this.scale(a,b,c);d?g[3]&&(this.useTextureShader(e.vertices,e.texCoord,g,j,d),this.drawIndexedVertices(this.TRIANGLES,e.indices)):h[3]&&(this.useColorShader(e.vertices,h),this.drawIndexedVertices(this.TRIANGLES,e.indices));i[3]&&(this.useColorShader(f.vertices,i),this.drawIndexedVertices(this.LINES,f.indices));this.popMatrix()},drawVertices:function(a,b){this.gl.drawArrays(a,0,b)},drawIndexedVertices:function(a,b){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.$ref);c.drawElements(a,
b.numItems,c.UNSIGNED_SHORT,0)},create3DContext:function(a,b){var c=["experimental-webgl","webgl","webkit-3d","moz-webgl"],d,e,f;for(e=0,f=c.length;e<f;++e){try{d=a.getContext(c[e],b)}catch(g){}if(d)break}return d},loop:function(a){window.requestAnimFrame(a);this.perspective();this.$currentTime=(new Date).getTime();if(this.$lastTime!==0)this.frameDelta=this.$currentTime-this.$lastTime,this.frameRate=1E3/this.frameDelta;this.$lastTime=this.$currentTime;this.elapsedTime+=this.frameDelta;this.frameCount++},
destroy:function(){Tilt.destroyObject(this);Tilt.clearCache()}};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Shaders.Color"];Tilt.Shaders={};
Tilt.Shaders.Color={vs:"attribute vec3 vertexPosition;\nuniform mat4 mvMatrix;\nuniform mat4 projMatrix;\nvoid main(void) {\n    gl_Position = projMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n}",fs:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 color;\nvoid main(void) {\n    gl_FragColor = color;\n}"};
Tilt.Shaders.Texture={vs:"attribute vec3 vertexPosition;\nattribute vec2 vertexTexCoord;\nuniform mat4 mvMatrix;\nuniform mat4 projMatrix;\nvarying vec2 texCoord;\nvoid main(void) {\n  gl_Position = projMatrix * mvMatrix * vec4(vertexPosition, 1.0);\n  texCoord = vertexTexCoord;\n}",fs:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 color;\nuniform float texalpha;\nuniform sampler2D sampler;\nvarying vec2 texCoord;\nvoid main(void) {\n  vec4 tex = texture2D(sampler, vec2(texCoord.s, texCoord.t));\n  gl_FragColor = color * tex * texalpha + color * (1.0 - texalpha);\n}"};
Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Container"];Tilt.Container=function(a){Tilt.Profiler.intercept("Tilt.Container",this);a=a||{};this.hidden=a.hidden||!1;this.disabled=a.disabled||!1;this.$background=a.background||null;this.$x=a.x||0;this.$y=a.y||0;this.$width=a.width||0;this.$height=a.height||0;this.$offset=a.offset||[0,0];a.elements instanceof Array&&a.elements.forEach(function(a){this.push(a)}.bind(this));Tilt.UI.push(this)};Tilt.Container.prototype=[];
Tilt.Container.prototype.setPosition=function(a,b){this.$x=a;this.$y=b};Tilt.Container.prototype.setSize=function(a,b){this.$width=a;this.$height=b};Tilt.Container.prototype.setX=function(a){this.$x=a};Tilt.Container.prototype.setY=function(a){this.$y=a};Tilt.Container.prototype.setWidth=function(a){this.$width=a};Tilt.Container.prototype.setHeight=function(a){this.$height=a};Tilt.Container.prototype.getX=function(){return this.$x};Tilt.Container.prototype.getY=function(){return this.$y};
Tilt.Container.prototype.getWidth=function(){return this.$width};Tilt.Container.prototype.getHeight=function(){return this.$height};Tilt.Container.prototype.update=function(a,b){var c,d,e;for(d=0,e=this.length;d<e;d++)c=this[d],"function"===typeof c.update&&!c.hidden&&!c.disabled&&c.update(a,b)};
Tilt.Container.prototype.draw=function(a,b){var b=b||Tilt.$renderer,c;c=this.$background;var d=this.$x,e=this.$y,f=this.$width,g=this.$height,h=this.$offset,i=d+h[0],h=e+h[1],j,l,q,v,r,p,w,o,n,u;c!==null&&(b.fill(c),b.noStroke(),b.rect(d,e,f||b.width,g||b.height));b.pushMatrix();b.translate(i,h,0);for(n=0,u=this.length;n<u;n++)if(c=this[n],c.drawable=!1,c.$parentX=d,c.$parentY=e,c.$parentWidth=f,c.$parentHeight=g,!c.hidden)if(f===0||g===0)c.draw(a,b),c.drawable=!0;else if(j=c.$bounds||[1,1,1,1],l=
j[0]+i,q=j[1]+h,v=j[2],r=j[3],j=l,p=q,l+=v,q+=r,v=d,r=e,w=d+f,o=e+g,j>v&&l<w&&p>r&&q<o)c.draw(a,b),c.drawable=!0;b.popMatrix()};Tilt.Container.prototype.isMouseOver=function(a){var b=Tilt.UI,c=b.mouseX,b=b.mouseY,d=this.$offset||[0,0],e=a.$bounds||[-1,-1,-1,-1],a=e[0]+(this.$x||0+d[0]),d=e[1]+(this.$y||0+d[1]),f=e[2],e=e[3];return c>a&&c<a+f&&b>d&&b<d+e};Tilt.Container.prototype.destroy=function(){Tilt.UI.splice(Tilt.UI.indexOf(this),1);Tilt.destroyObject(this)};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Scrollview"];
Tilt.ScrollContainer=function(a){Tilt.Profiler.intercept("Tilt.ScrollContainer",this);Tilt.UI.push(this);this.view=new Tilt.Container(a);this.scrollbars=new Tilt.Container;var b=new Tilt.Button(a.top,{x:this.view.$x-25,y:this.view.$y-5,width:32,height:30,fill:a.top?null:"#f00a"}),c=new Tilt.Button(a.bottom,{x:this.view.$x-25,y:this.view.$y+this.view.$height-25,width:32,height:30,fill:a.bottom?null:"#0f0a"}),a=new Tilt.Button(a.topReset,{x:this.view.$x-25,y:this.view.$y+12.5,width:32,height:30,fill:a.topReset?
null:"#0f0b"});b.onmousedown=function(){window.clearInterval(this.$scrollTopReset);var a=Tilt.UI;this.$scrollTop=window.setInterval(function(){this.view.$offset[1]+=5;a.mousePressed||(a=null,window.clearInterval(this.$scrollTop))}.bind(this),1E3/60)}.bind(this);c.onmousedown=function(){window.clearInterval(this.$scrollTopReset);var a=Tilt.UI;this.$scrollBottom=window.setInterval(function(){this.view.$offset[1]-=5;a.mousePressed||(a=null,window.clearInterval(this.$scrollBottom))}.bind(this),1E3/60)}.bind(this);
a.onmousedown=function(){this.$scrollTopReset=window.setInterval(function(){this.view.$offset[1]/=1.15;Math.abs(this.view.$offset[1])<0.1&&window.clearInterval(this.$scrollTopReset)}.bind(this),1E3/60)}.bind(this);this.scrollbars.push(b,a,c);c=b=null};Tilt.ScrollContainer.prototype={update:function(){this.scrollbars.hidden=this.view.hidden;this.scrollbars.disabled=this.view.disabled},draw:function(){},destroy:function(){Tilt.UI.splice(Tilt.UI.indexOf(this),1);Tilt.destroyObject(this)}};
Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Button"];
Tilt.Button=function(a,b){Tilt.Profiler.intercept("Tilt.Button",this);b=b||{};this.hidden=b.hidden||!1;this.disabled=b.disabled||!1;this.$sprite=a||{$x:-1,$y:-1,$width:-1,$height:-1};this.$sprite.$x=b.x||this.$sprite.$x;this.$sprite.$y=b.y||this.$sprite.$y;this.$sprite.$width=b.width||this.$sprite.$width;this.$sprite.$height=b.height||this.$sprite.$height;this.$padding=b.padding||[0,0,0,0];this.$fill=b.fill||null;this.$stroke=b.stroke||null;this.$bounds=[this.$sprite.$x+this.$padding[0],this.$sprite.$y+
this.$padding[1],this.$sprite.$width-this.$padding[2],this.$sprite.$height-this.$padding[3]]};
Tilt.Button.prototype={setPosition:function(a,b){"function"===typeof this.$sprite.setPosition?this.$sprite.setPosition(a,b):(this.$sprite.$x=a,this.$sprite.$y=b);this.$bounds[0]=a+this.$padding[0];this.$bounds[1]=b+this.$padding[1]},setSize:function(a,b){"function"===typeof this.$sprite.setSize?this.$sprite.setSize(a,b):(this.$sprite.$width=a,this.$sprite.$height=b);this.$bounds[2]=a-this.$padding[2];this.$bounds[3]=b-this.$padding[3]},setX:function(a){this.setPosition(a,this.$sprite.$y)},setY:function(a){this.setPosition(this.$sprite.$x,
a)},setWidth:function(a){this.setSize(a,this.$sprite.$height)},setHeight:function(a){this.setSize(this.$sprite.$width,a)},setSprite:function(a){var b=this.$sprite.$x,c=this.$sprite.$y;this.$sprite=a;this.$sprite.$x=b;this.$sprite.$y=c;this.$bounds[2]=a.$width;this.$bounds[3]=a.$height},setFill:function(a){this.$fill=a},setStroke:function(a){this.$stroke=a},getX:function(){return this.$sprite.$x},getY:function(){return this.$sprite.$y},getWidth:function(){return this.$sprite.$width},getHeight:function(){return this.$sprite.$height},
getFill:function(){return this.$fill},getStroke:function(){return this.$stroke},draw:function(a,b){b=b||Tilt.$renderer;"undefined"!==typeof this.$sprite.$texture&&this.$sprite.draw(b);var c,d,e=this.$fill,f=this.$stroke;if(e||f)c=this.$bounds,d=this.$padding,b.fill(e||"#fff"),b.stroke(f||"#000"),b.rect(c[0]-d[0],c[1]-d[1],c[2]+d[2],c[3]+d[3])},destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Slider"];
Tilt.Slider=function(a,b){Tilt.Profiler.intercept("Tilt.Slider",this);b=b||{};this.hidden=b.hidden||!1;this.disabled=b.disabled||!1;this.$sprite=new Tilt.Sprite(a.$texture,a.$region,{padding:a.$padding,tint:a.$tint});this.$sprite.$x=b.x||this.$sprite.$x;this.$sprite.$y=b.y||this.$sprite.$y;this.$sprite.$width=b.width||this.$sprite.$width;this.$sprite.$height=b.height||this.$sprite.$height;this.$x=this.$sprite.$x;this.$y=this.$sprite.$y;this.$size=b.size||100;this.$direction=b.direction||0;this.$bounds=
[this.$sprite.$x+this.$sprite.$padding[0],this.$sprite.$y+this.$sprite.$padding[1],this.$sprite.$width-this.$sprite.$padding[2],this.$sprite.$height-this.$sprite.$padding[3]];this.setValue(b.value||0)};
Tilt.Slider.prototype={setPosition:function(a,b){this.$x=a;this.$y=b;this.$bounds[0]=a+this.$sprite.$padding[0];this.$bounds[1]=b+this.$sprite.$padding[1];this.setValue(this.$value)},setX:function(a){this.setPosition(a,this.$y);this.setValue(this.$value)},setY:function(a){this.setPosition(this.$x,a);this.setValue(this.$value)},setSize:function(a){this.$size=a;this.setValue(this.$value)},setValue:function(a){var b=this.$sprite,c=this.$x,d=this.$y,e=this.$size,f=this.$direction;this.$value=Tilt.Math.clamp(a,
0,100);f===0?(a=Tilt.Math.map(this.$value,0,100,c,c+e),b.setPosition(a,d),this.$bounds[0]=a+b.$padding[0]):(a=Tilt.Math.map(this.$value,0,100,d,d+e),b.setPosition(c,a),this.$bounds[1]=a+b.$padding[1])},getX:function(){return this.$x},getY:function(){return this.$y},getSize:function(){return this.$size},getValue:function(){return this.$value},update:function(){var a=Tilt.UI;if(this.mousePressed)this.$sliding=!0;else if(!a.mousePressed)this.$sliding=!1;if(this.$sliding){var b=this.$sprite,c=this.$parentX,
d=this.$parentY,e=this.$x,f=this.$y,g=this.$size;this.$direction===0?(e+=c,d=e+g,a=Tilt.Math.clamp(a.mouseX-b.$width/2,e,d),c=a-c,b.setPosition(c,f),this.$value=Tilt.Math.map(a,e,d,0,100),this.$bounds[0]=c+b.$padding[0]):(f+=d,a=Tilt.Math.clamp(a.$mouseY-b.$height/2,f,f+g),pmpy=a-d,b.setPosition(e,pmpy),this.$value=Tilt.Math.map(pmpy,f,f+g,0,100),this.$bounds[1]=pmpy+b.$padding[1])}},draw:function(a,b){b=b||Tilt.$renderer;this.$sprite.draw(b)},destroy:function(){Tilt.destroyObject(this)}};
Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Sprite"];
Tilt.Sprite=function(a,b,c){Tilt.Profiler.intercept("Tilt.Sprite",this);c=c||{};this.hidden=c.hidden||!1;this.disabled=c.disabled||!1;this.$texture=a;this.$region=b||[0,0,a.width,a.height];this.$x=c.x||0;this.$y=c.y||0;this.$width=c.width||this.$region[2];this.$height=c.height||this.$region[3];this.$padding=c.padding||[0,0,0,0];this.$tint=c.tint||null;this.$depthTest=c.depthTest||!1;this.$bounds=[this.$x+this.$padding[0],this.$y+this.$padding[1],this.$width-this.$padding[2],this.$height-this.$padding[3]];
this.$texCoord=null};
Tilt.Sprite.prototype={setPosition:function(a,b){this.$x=a;this.$y=b;this.$bounds[0]=a+this.$padding[0];this.$bounds[1]=b+this.$padding[1]},setSize:function(a,b){this.$width=a;this.$height=b;this.$bounds[2]=a-this.$padding[2];this.$bounds[3]=b-this.$padding[3]},setX:function(a){this.setPosition(a,this.$y)},setY:function(a){this.setPosition(this.$x,a)},setWidth:function(a){this.setSize(a,this.$height)},setHeight:function(a){this.setSize(this.$width,a)},getX:function(){return this.$x},getY:function(){return this.$y},
getWidth:function(){return this.$width},getHeight:function(){return this.$height},draw:function(a,b){var b=b||Tilt.$renderer,c=this.$region,d=this.$texture,e=this.$x,f=this.$y,g=this.$width,h=this.$height,i=this.$depthTest,j=this.$tint;if(this.$texCoord===null&&d.loaded)this.$texCoord=new Tilt.VertexBuffer([c[0]/d.width,c[1]/d.height,(c[0]+c[2])/d.width,c[1]/d.height,c[0]/d.width,(c[1]+c[3])/d.height,(c[0]+c[2])/d.width,(c[1]+c[3])/d.height],2);j!==null&&b.tint(j);i?(b.depthTest(!0),b.image(d,e,f,
g,h,this.$texCoord),b.depthTest(!1)):b.image(d,e,f,g,h,this.$texCoord);if(j!==null)c=b.$tintColor,c[0]=1,c[1]=1,c[2]=1,c[3]=1},destroy:function(){Tilt.destroyObject(this)}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.UI"];Tilt.UI=[];Tilt.UI.mouseX=0;Tilt.UI.mouseY=0;Tilt.UI.mousePressed=!1;Tilt.UI.mouseScrollAmmount=0;Tilt.UI.keyPressed=[];
Tilt.UI.refresh=function(a){var b=Tilt.$renderer,c,d,e;b.ortho();b.defaults();b.depthTest(!1);for(c=0,d=this.length;c<d;c++)e=this[c],e.hidden||(e.disabled||e.update(a,b),e.draw(a,b))};Tilt.UI.presentModal=function(a){if(!(a.modal||this.indexOf(a)===-1)){for(var b=0,c=this.length;b<c;b++)this[b].$prevDisabled=this[b].disabled,this[b].disabled=!0;a.modal=!0;a.hidden=!1;a.disabled=!1}};
Tilt.UI.dismissModal=function(a){if(a.modal&&this.indexOf(a)!==-1){for(var b=0,c=this.length;b<c;b++)this[b].disabled=this[b].$prevDisabled,delete this[b].$prevDis;a.modal=!1;a.hidden=!0;a.disabled=!0}};Tilt.UI.mouseDown=function(a,b,c){this.mousePressed=!0;this.mouseOver=!1;this.$handleMouseEvent("onmousedown",a,b,c)};Tilt.UI.mouseUp=function(a,b,c){this.mouseOver=this.mousePressed=!1;this.$handleMouseEvent("onmouseup",a,b,c)};Tilt.UI.click=function(a,b){this.$handleMouseEvent("onclick",a,b)};
Tilt.UI.doubleClick=function(a,b){this.$handleMouseEvent("ondoubleclick",a,b)};Tilt.UI.mouseMove=function(a,b){this.mouseX=a;this.mouseY=b};Tilt.UI.mouseScroll=function(a){this.mouseScrollAmmount=a;this.$handleKeyEvent("onmousescroll",a)};Tilt.UI.mouseOver=function(){};Tilt.UI.mouseOut=function(){};Tilt.UI.keyDown=function(a){this.keyPressed[a]=!0;this.$handleKeyEvent("onkeydown",a)};Tilt.UI.keyUp=function(a){this.keyPressed[a]=!1;this.$handleKeyEvent("onkeyup",a)};
Tilt.UI.$handleMouseEvent=function(a,b,c,d){var e,f,g,h,i,j,l,q,v,r,p,w,o=this.mouseX,n=this.mouseY;for(e=0,g=this.length;e<g;e++)if(i=this[e],!i.hidden&&!i.disabled){f=i.$offset||[0,0];l=i.$x+f[0];q=i.$y+f[1];for(f=0,h=i.length;f<h;f++)if(j=i[f],!j.hidden&&!j.disabled&&j.drawable){v=j.$bounds||[-1,-1,-1,-1];r=v[0]+l;p=v[1]+q;w=v[2];v=v[3];if("onmouseup"===a)j.mousePressed=!1;if(o>r&&o<r+w&&n>p&&n<p+v){if("onmousedown"===a)j.mousePressed=!0;this.mouseOver=!0;j=j[a];"function"===typeof j&&j(b,c,d)}}}};
Tilt.UI.$handleKeyEvent=function(a,b){var c,d,e,f,g,h;for(c=0,e=this.length;c<e;c++)if(g=this[c],!g.hidden&&!g.disabled)for(d=0,f=g.length;d<f;d++)h=g[d],!h.hidden&&!h.disabled&&(h=h[a],"function"===typeof h&&h(b))};Tilt.Profiler.intercept("Tilt.UI",Tilt.UI);Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Console","Tilt.StringBundle"];
Tilt.Console={alert:function(a,b){var c;"undefined"===typeof b&&(b="undefined");try{c=Components.classes["@mozilla.org/embedcomp/prompt-service;1"].getService(Components.interfaces.nsIPromptService),c.alert(null,a,b)}catch(d){alert(b)}},log:function(a){var b;"undefined"===typeof a&&(a="undefined");try{b=Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService),b.logStringMessage(a)}catch(c){alert(a)}},error:function(a,b,c,d,e,f,g){var h,i;"undefined"===
typeof a&&(a="undefined");try{h=Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService),i=Components.classes["@mozilla.org/scripterror;1"].createInstance(Components.interfaces.nsIScriptError),i.init(a,b,c,d,e,f,g),h.logMessage(i)}catch(j){alert(a)}}};
Tilt.StringBundle={bundle:"tilt-string-bundle",get:function(a){if("undefined"===typeof a)return"undefined";var b=document.getElementById(this.bundle);return b?b.getString(a):a},format:function(a,b){if("undefined"===typeof a)return"undefined";if("undefined"===typeof b)return a;var c=document.getElementById(this.bundle);return c?c.getFormattedString(a,b):[a,b].join(" ")}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Document"];
Tilt.Document={currentContentDocument:void 0,currentParentNode:void 0,initCanvas:function(a,b,c,d){if("undefined"===typeof this.currentContentDocument)this.currentContentDocument=document;if("undefined"===typeof this.currentParentNode)this.currentParentNode=document.body;var e=this.currentContentDocument,f=this.currentParentNode;if("undefined"===typeof e||e===null||"undefined"===typeof f||f===null)return null;e=e.createElement("canvas");e.setAttribute("style","width: 100%; height: 100%;");e.width=
a;e.height=b;e.id=d;c&&this.append(e,f);return e},initFullScreenCanvas:function(){var a=this.initCanvas(window.innerWidth,window.innerHeight,!0);this.currentParentNode.setAttribute("style","background: #000; margin: 0px; padding: 0px; overflow: hidden;");return a},append:function(a,b){b.appendChild(a)},remove:function(a){a.parentNode.removeChild(a)},traverse:function(a,b,c){if("undefined"===typeof this.uid)this.uid=0;var d=0,e=0,f=function(a,b,c){var j,l,q;for(j=0,l=b.childNodes.length;j<l;j++)q=
b.childNodes[j],c>d&&(d=c),e++,this.uid++,a(q,c,e,this.uid),f(a,q,c+1),q.localName==="iframe"&&f(a,q.contentDocument,c+1)}.bind(this);try{"function"===typeof a&&f(a,c||window.content.document,0),"function"===typeof b&&b(d,e)}finally{c=null}},getContentWindowDimensions:function(a){var b,c={width:a.innerWidth+a.scrollMaxX,height:a.innerHeight+a.scrollMaxY};this.traverse(function(a){b=this.getNodeCoordinates(a);c.width=Math.max(c.width,b.x||0+b.width||0);c.height=Math.max(c.height,b.y||0+b.height||0)}.bind(this),
null,a.document);return c},getNodeCoordinates:function(a){try{if(a.localName==="head"||a.localName==="body"||a.localName==="iframe")throw new Exception;var b=a.getBoundingClientRect();return{x:b.left+window.content.pageXOffset,y:b.top+window.content.pageYOffset,width:b.width,height:b.height}}catch(c){var d=b=0,e=a.clientWidth,f=a.clientHeight;if(a.offsetParent){do b+=a.offsetLeft,d+=a.offsetTop;while(a=a.offsetParent)}else{if(a.x)b=a.x;if(a.y)d=a.y}return{x:b,y:d,width:e,height:f}}finally{}},getNodeType:function(a){var b;
a.nodeType===1?b="ELEMENT_NODE":a.nodeType===2?b="ATTRIBUTE_NODE":a.nodeType===3?b="TEXT_NODE":a.nodeType===4?b="CDATA_SECTION_NODE":a.nodeType===5?b="ENTITY_REFERENCE_NODE":a.nodeType===6?b="ENTITY_NODE":a.nodeType===7?b="PROCESSING_INSTRUCTION_NODE":a.nodeType===8?b="COMMENT_NODE":a.nodeType===9?b="DOCUMENT_NODE":a.nodeType===10?b="DOCUMENT_TYPE_NODE":a.nodeType===11?b="DOCUMENT_FRAGMENT_NODE":a.nodeType===12&&(b="NOTATION_NODE");return b},getAttributesString:function(a){var b=[],c,d;for(c=0,d=
a.length;c<d;c++)b.push(a[c].name+' = "'+a[c].value+'"');return b.join("\n")+"\n"},getModifiedCss:function(a){var b=[],c,d,e;for(e=0;e<a.length;e++)c=a[e],d=a.getPropertyValue(c),d=c+": "+d+";",'background-attachment: scroll;background-clip: border-box;background-color: transparent;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: repeat;background-size: auto auto;border-bottom-color: rgb(0, 0, 0);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;border-bottom-style: none;border-bottom-width: 0px;border-collapse: separate;border-left-color: rgb(0, 0, 0);border-left-style: none;border-left-width: 0px;border-right-color: rgb(0, 0, 0);border-right-style: none;border-right-width: 0px;border-spacing: 0px 0px;border-top-color: rgb(0, 0, 0);border-top-left-radius: 0px;border-top-right-radius: 0px;border-top-style: none;border-top-width: 0px;bottom: auto;box-shadow: none;caption-side: top;clear: none;clip: auto;color: rgb(0, 0, 0);content: none;counter-increment: none;counter-reset: none;cursor: auto;direction: ltr;display: block;empty-cells: -moz-show-background;float: none;font-family: serif;font-size: 16px;font-size-adjust: none;font-stretch: normal;font-style: normal;font-variant: normal;font-weight: 400;height: 0px;ime-mode: auto;left: auto;letter-spacing: normal;line-height: 19.2px;list-style-image: none;list-style-position: outside;list-style-type: disc;margin-bottom: 8px;margin-left: 8px;margin-right: 8px;margin-top: 8px;marker-offset: auto;max-height: none;max-width: none;min-height: 0px;min-width: 0px;opacity: 1;outline-color: rgb(0, 0, 0);outline-offset: 0px;outline-style: none;outline-width: 0px;overflow: visible;overflow-x: visible;overflow-y: visible;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;page-break-after: auto;page-break-before: auto;pointer-events: auto;position: static;quotes: "\u201c" "\u201d" "\u2018" "\u2019";resize: none;right: auto;table-layout: auto;text-align: start;text-decoration: none;text-indent: 0px;text-overflow: clip;text-shadow: none;text-transform: none;top: auto;unicode-bidi: embed;vertical-align: baseline;visibility: visible;white-space: normal;width: 1157px;word-spacing: 0px;word-wrap: normal;z-index: auto;-moz-animation-delay: 0s;-moz-animation-direction: normal;-moz-animation-duration: 0s;-moz-animation-fill-mode: none;-moz-animation-iteration-count: 1;-moz-animation-name: none;-moz-animation-play-state: running;-moz-animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);-moz-appearance: none;-moz-background-inline-policy: continuous;-moz-binding: none;-moz-border-bottom-colors: none;-moz-border-image: none;-moz-border-left-colors: none;-moz-border-right-colors: none;-moz-border-top-colors: none;-moz-box-align: stretch;-moz-box-direction: normal;-moz-box-flex: 0;-moz-box-ordinal-group: 1;-moz-box-orient: horizontal;-moz-box-pack: start;-moz-box-sizing: content-box;-moz-column-count: auto;-moz-column-gap: 16px;-moz-column-rule-color: rgb(0, 0, 0);-moz-column-rule-style: none;-moz-column-rule-width: 0px;-moz-column-width: auto;-moz-float-edge: content-box;-moz-font-feature-settings: normal;-moz-font-language-override: normal;-moz-force-broken-image-icon: 0;-moz-hyphens: manual;-moz-image-region: auto;-moz-orient: horizontal;-moz-outline-radius-bottomleft: 0px;-moz-outline-radius-bottomright: 0px;-moz-outline-radius-topleft: 0px;-moz-outline-radius-topright: 0px;-moz-stack-sizing: stretch-to-fit;-moz-tab-size: 8;-moz-text-blink: none;-moz-text-decoration-color: rgb(0, 0, 0);-moz-text-decoration-line: none;-moz-text-decoration-style: solid;-moz-transform: none;-moz-transform-origin: 50% 50%;-moz-transition-delay: 0s;-moz-transition-duration: 0s;-moz-transition-property: all;-moz-transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);-moz-user-focus: none;-moz-user-input: auto;-moz-user-modify: read-only;-moz-user-select: auto;-moz-window-shadow: default;clip-path: none;clip-rule: nonzero;color-interpolation: srgb;color-interpolation-filters: linearrgb;dominant-baseline: auto;fill: rgb(0, 0, 0);fill-opacity: 1;fill-rule: nonzero;filter: none;flood-color: rgb(0, 0, 0);flood-opacity: 1;image-rendering: auto;lighting-color: rgb(255, 255, 255);marker-end: none;marker-mid: none;marker-start: none;mask: none;shape-rendering: auto;stop-color: rgb(0, 0, 0);stop-opacity: 1;stroke: none;stroke-dasharray: none;stroke-dashoffset: 0px;stroke-linecap: butt;stroke-linejoin: miter;stroke-miterlimit: 4;stroke-opacity: 1;stroke-width: 1px;text-anchor: start;text-rendering: auto;'.indexOf(d)===
-1&&c!=="quotes"&&b.push(d);return b.join("\n")+"\n"}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Math"];
Tilt.Math={radians:function(a){return a*Math.PI/180},degrees:function(a){return a*180/Math.PI},map:function(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))},isPowerOfTwo:function(a){return(a&a-1)===0},nextPowerOfTwo:function(a){var b;--a;for(b=1;b<32;b<<=1)a|=a>>b;return a+1},clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},quat4fromAxis:function(a,b,c){b*=0.5;var d=Math.sin(b),e=a[0]*d,f=a[1]*d,a=a[2]*d,b=Math.cos(b);return"undefined"===typeof c?[e,f,a,b]:(c[0]=e,c[1]=f,c[2]=a,c[3]=b,c)},quat4fromEuler:function(a,
b,c,d){var e;b*=0.5;a*=0.5;c*=0.5;e=Math.sin(b);var f=Math.sin(a),g=Math.sin(c),h=Math.cos(b),i=Math.cos(a),j=Math.cos(c),b=e*i*j-h*f*g,a=h*f*j+e*i*g,c=h*i*g-e*f*j;e=h*i*j+e*f*g;return"undefined"===typeof d?[b,a,c,e]:(d[0]=b,d[1]=a,d[2]=c,d[3]=e,d)},unproject:function(a,b,c,d,e){var f=mat4.create(),e=e||quat4.create();mat4.multiply(d,c,f);mat4.inverse(f);e[0]=+((a[0]-b[0])/b[2]*2-1);e[1]=-((a[1]-b[1])/b[3]*2-1);e[2]=2*a[2]-1;e[3]=1;mat4.multiplyVec4(f,e);e[3]=1/e[3];e[0]*=e[3];e[1]*=e[3];e[2]*=e[3];
return e},createRay:function(a,b,c,d,e){this.unproject(a,c,d,e,a);this.unproject(b,c,d,e,b);return{position:a,lookAt:b,direction:vec3.normalize(vec3.subtract(b,a))}},intersectRayTriangle:function(a,b,c,d,e){var f=vec3.create(),g=vec3.create(),h=vec3.create(),i=vec3.create(),j=vec3.create(),l=d.position,d=d.direction;"undefined"===typeof e&&(e=vec3.create());vec3.subtract(b,a,f);vec3.subtract(c,a,g);vec3.cross(f,g,h);if(h[0]===0&&h[1]===0&&h[2]===0)return-1;vec3.subtract(l,a,j);b=-vec3.dot(h,j);h=
+vec3.dot(h,d);if(Math.abs(h)<1.0E-4)return b==0?2:0;h=b/h;if(h<0)return 0;vec3.add(l,vec3.scale(d,h),e);l=vec3.dot(f,f);d=vec3.dot(f,g);h=vec3.dot(g,g);vec3.subtract(e,a,i);a=vec3.dot(i,f);g=vec3.dot(i,g);i=d*d-l*h;e=(d*g-h*a)/i;if(e<0||e>1)return 0;g=(d*a-l*g)/i;return g<0||e+g>1?0:1},hue2rgb:function(a,b,c){c<0&&(c+=1);c>1&&(c-=1);return c<1/6?a+(b-a)*6*c:c<0.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},rgb2hsl:function(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),f,g=(d+e)/2;if(d===e)f=
e=0;else{var h=d-e,e=g>0.5?h/(2-d-e):h/(d+e);switch(d){case a:f=(b-c)/h+(b<c?6:0);break;case b:f=(c-a)/h+2;break;case c:f=(a-b)/h+4}f/=6}return[f,e,g]},hsl2rgb:function(a,b,c){if(b===0)c=b=a=c;else var d=c<0.5?c*(1+b):c+b-c*b,e=2*c-d,c=this.hue2rgb(e,d,a+1/3),b=this.hue2rgb(e,d,a),a=this.hue2rgb(e,d,a-1/3);return[c*255,b*255,a*255]},rgb2hsv:function(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),f,g=d-e;if(d===e)f=0;else{switch(d){case a:f=(b-c)/g+(b<c?6:0);break;case b:f=(c-
a)/g+2;break;case c:f=(a-b)/g+4}f/=6}return[f,d===0?0:g/d,d]},hsv2rgb:function(a,b,c){var d,e,f,g=Math.floor(a*6),h=a*6-g,a=c*(1-b),i=c*(1-h*b),b=c*(1-(1-h)*b);switch(g%6){case 0:d=c;e=b;f=a;break;case 1:d=i;e=c;f=a;break;case 2:d=a;e=c;f=b;break;case 3:d=a;e=i;f=c;break;case 4:d=b;e=a;f=c;break;case 5:d=c,e=a,f=i}return[d*255,e*255,f*255]},hex2rgba:function(a){var b,c,d,e,a=a.charAt(0)==="#"?a.substring(1):a;if("undefined"!==typeof this[a])return this[a];if(a.length===3)b=a.charAt(0),c=a.charAt(1),
d=a.charAt(2),a=[b,b,c,c,d,d,"ff"].join("");else if(a.length===4)b=a.charAt(0),c=a.charAt(1),d=a.charAt(2),a=a.charAt(3),a=[b,b,c,c,d,d,a,a].join("");else if(a.match("^rgba")=="rgba")return b=a.substring(5,a.length-1).split(","),b[0]/=255,b[1]/=255,b[2]/=255,b[3]/=255,this[a]=b;else if(a.match("^rgb")=="rgb")return b=a.substring(4,a.length-1).split(","),b[0]/=255,b[1]/=255,b[2]/=255,b[3]=1,this[a]=b;b=parseInt(a.substring(0,2),16)/255;c=parseInt(a.substring(2,4),16)/255;d=parseInt(a.substring(4,6),
16)/255;e=a.length===6?1:parseInt(a.substring(6,8),16)/255;return this[a]=b=[b,c,d,e]}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.String"];Tilt.String={trim:function(a){return a.replace(/^\s+|\s+$/g,"")},ltrim:function(a){return a.replace(/^\s+/,"")},rtrim:function(a){return a.replace(/\s+$/,"")}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Extensions.WebGL"];Tilt.Extensions={};
Tilt.Extensions.WebGL={initDocumentImage:function(a){var b,c,d,e;b=Tilt.Document.initCanvas();c=Tilt.Document.initCanvas();b=Tilt.Renderer.prototype.create3DContext(b);d=b.getParameter(b.MAX_TEXTURE_SIZE);e=Tilt.Document.getContentWindowDimensions(a);b=Tilt.Math.clamp(e.width,0,d);d=Tilt.Math.clamp(e.height,0,d);c.width=b;c.height=d;c.getContext("2d").drawWindow(a,0,0,b,d,"#fff");return c}};Tilt=Tilt||{};EXPORTED_SYMBOLS=["Tilt.Xhr"];
Tilt.Xhr={request:function(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.send(null);d.onreadystatechange=function(){d.readyState===4&&"function"===typeof b&&b(d,c)}},requests:function(a,b,c){function d(d,g){e[g]=d;f++;f===a.length&&"function"===typeof b&&b(e,c)}var e=[],f=0,g,h;for(g=0,h=a.length;g<h;g++)this.request(a[g],d,g)}};
